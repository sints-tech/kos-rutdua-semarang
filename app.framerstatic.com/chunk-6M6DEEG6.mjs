import{$ as $g,$f as Dy,A as zg,B as Ug,Gf as Ty,Hf as Ny,Ic as Qg,K as Wg,Pf as wy,Rf as Ry,Sc as To,Tc as Ds,Td as wi,Tf as xy,Uc as ry,Uf as Wn,Vc as oy,Wc as ny,Xc as iy,Yc as sy,Yd as $c,Zc as ly,Zd as Bn,_c as ks,_d as Fs,aa as Hg,ad as xt,bd as Ps,cd as cy,cf as vy,dd as dy,df as Iy,ed as uy,ef as As,eg as Jo,fd as my,gd as py,gg as Fy,ha as Gg,hf as zn,hg as Es,id as fy,ig as Xy,jg as Ky,la as Uc,mb as Vs,ng as Yy,qf as Un,se as by,tb as Jg,za as jg}from"https://app.framerstatic.com/chunk-G2SVSL52.mjs";import{d as Xg,i as Kg,t as Yg}from"https://app.framerstatic.com/chunk-3TJANG4N.mjs";import{E as jy,a as Zg,c as ey,d as ty,g as Ni}from"https://app.framerstatic.com/chunk-P7XPDU7P.mjs";import{i as Cy}from"https://app.framerstatic.com/chunk-JB3A7NVR.mjs";import{k as Wc}from"https://app.framerstatic.com/chunk-HTH46QE2.mjs";import{b as Sr}from"https://app.framerstatic.com/chunk-JU6ZA2PL.mjs";import{i as Bg}from"https://app.framerstatic.com/chunk-4AKWN7KV.mjs";import{N as Og}from"https://app.framerstatic.com/chunk-D3O6H5GO.mjs";import{a as _c,b as Uy}from"https://app.framerstatic.com/chunk-GTMRROB6.mjs";import{q as gy}from"https://app.framerstatic.com/chunk-F7V7DNCL.mjs";import{a as _g}from"https://app.framerstatic.com/chunk-NHENQ4BH.mjs";import{a as yy,c as Ay,d as Ly,e as Ey,f as Oy,g as jc,i as By,l as zy,m as Os,n as Wy,o as $y,p as Hy,q as Gy,t as qy}from"https://app.framerstatic.com/chunk-CFPWEMX5.mjs";import{a as My,b as Hc,c as Vy,e as Gc}from"https://app.framerstatic.com/chunk-5ZPLZ5Y5.mjs";import{d as qg,f as Jr,g as ay,i as hy,j as Sy}from"https://app.framerstatic.com/chunk-NWXZUV7M.mjs";import{a as Ls}from"https://app.framerstatic.com/chunk-PABHF7FN.mjs";import{$ as Bp,Ac as eg,Af as Rg,Bb as Bh,Bf as xg,Db as Ss,Ec as tg,Ef as Mg,Fb as zh,Ff as Vg,Fg as ws,Gb as Uh,Gf as Dg,Hb as Wh,Hd as Ts,Hf as kg,Ib as Ct,Ic as bs,Id as Ns,If as Pg,Jb as Ln,Kb as $h,Kf as Fg,Kg as Rs,Lb as En,Lc as rg,Mc as og,Mf as Bc,Nb as Hh,Ob as Gh,Oc as ng,Oe as On,Og as xs,Pb as jh,Pe as fg,Pg as Ag,Qd as ag,Rd as sg,Re as hg,Sd as lg,Sg as Lg,T as Ot,Td as Oc,U as Mp,Ua as kh,W as Dp,Wa as gs,We as gg,Y as Ep,Yb as Jh,Z as Op,Zb as qh,_b as Xh,a as Cp,bd as ig,be as cg,da as Wp,ea as $p,eb as Ph,fb as Fh,ga as xn,gb as Ah,gd as Ii,h as bp,hf as yg,if as Sg,ja as qa,jb as Lh,jf as Cg,kb as Eh,lb as Io,mb as it,mc as Kh,nb as ys,ne as dg,pe as ug,pf as bg,qf as vg,rf as Ig,tc as Yh,ub as Ec,ud as vs,vc as Qh,vd as Is,wb as _o,xb as Oh,xc as Zh,xf as Tg,ye as mg,yf as Ng,zc as Cs,ze as pg,zf as wg}from"https://app.framerstatic.com/chunk-N6T5M2U2.mjs";import{e as St,k as jo,m as Dh,v as _h}from"https://app.framerstatic.com/chunk-MTCSGQFI.mjs";import{f as $t}from"https://app.framerstatic.com/chunk-JRE74LV4.mjs";import{b as Jy,d as Jc}from"https://app.framerstatic.com/chunk-WKRIJFLD.mjs";import{He as Ms,Ng as Ti}from"https://app.framerstatic.com/chunk-MJU7MCEH.mjs";import{a as _y}from"https://app.framerstatic.com/chunk-NC7G7GJK.mjs";import{h as ky,l as Py,m as qr}from"https://app.framerstatic.com/chunk-LM2ZSXH3.mjs";import{$a as Fp,$e as hf,$g as vo,$h as th,Ae as mf,Af as Mf,Be as pf,Bh as hs,C as Ja,Ch as jf,Ci as Th,Dd as ts,Dg as Ef,Di as Nh,E as gr,Ei as wh,Fd as af,Fe as ff,Fh as _f,Gd as sf,Gg as R,Gh as Jf,Hg as Go,Hi as Rh,Ib as Gp,Ic as Xa,Ig as as,Jd as rs,Jg as Vr,Ki as xh,La as Vp,Lg as kn,Mg as Of,Mh as qf,Ne as Dc,Nf as Vf,Ni as Mh,Og as ss,Oh as Xf,Pc as Ka,Pg as ls,Pi as An,Qb as jp,Qe as os,Qg as cs,Qh as Kf,Qi as Vh,R as Tp,Rg as Bf,Sa as kp,Sf as kc,T as Np,Ta as J,Tb as _p,Td as lf,Th as Yf,Ua as Pp,Uc as jr,Ug as zf,Uh as yr,V as wp,Vc as Jp,Wa as B,Wc as Co,Wd as cf,Wf as is,Wh as Ac,Xa as Ge,Xc as _r,Xh as Qf,Ya as Wo,Yc as qp,Yd as bi,Yf as Df,Yg as Uf,Yh as Zf,Zc as Xp,Zg as Wf,Zh as Lc,_c as Ya,_h as eh,ab as Ap,af as gf,ah as ds,ai as rh,bb as Lp,bd as Qa,bh as Pn,bi as oh,cb as zp,cd as $o,ch as Fn,ci as nh,df as yf,dh as us,di as ih,eb as Up,ed as Kp,ef as Sf,eg as kf,eh as $f,f as vp,fd as Yp,gd as Qp,gf as Cf,gh as Hf,hf as Ho,hi as ah,ii as sh,jb as Rn,jd as Zp,jg as Pf,k as Nn,kg as Pc,kh as Gf,ki as lh,lc as So,lf as bf,li as ch,mf as vf,mi as dh,n as Ha,ng as Fc,ni as uh,o as ar,oi as mh,p as Uo,pf as If,pg as Ff,pi as ph,qi as fh,r as wn,re as Vc,rf as wf,ri as hh,s as Ga,sb as Hp,se as df,sg as vi,si as gh,t as ja,tb as nt,td as Za,te as uf,tg as Dn,ti as yh,u as Ip,ua as Rp,ud as rf,uf as Rf,ui as Sh,vd as es,vh as fs,vi as Ch,wd as of,xd as Vn,xg as Af,xi as bh,y as _a,yd as Mc,yi as vh,zd as nf,zf as xf,zg as Lf,zi as Ih}from"https://app.framerstatic.com/chunk-EBH5X5S4.mjs";import{$ as ic,$c as ui,$o as Wm,$s as Ic,Ad as Me,Af as qu,Ak as pm,Am as Ee,An as Am,B as Lo,Bd as U,Bf as wa,Bg as xa,Bh as $e,Bi as $r,Bk as fm,Bn as zo,Bu as xc,Ca as ku,Cb as ci,Cd as Ve,Cf as Ra,Ch as pt,Ci as ka,Cm as yn,D as Ru,Dd as Ne,Df as Xu,Dh as gn,Di as Pa,Dl as vm,Dm as fc,Dr as np,Dt as Wa,Ed as Wu,Eg as Zu,Ei as Bo,El as Im,Et as Sp,Fb as di,Fd as $u,Fe as fn,Fg as uo,Fi as pc,Fl as Aa,G as Ue,Gd as _e,Gf as Ku,Gj as cm,Gq as gc,Gs as pp,Hd as G,Hg as em,Hl as Tm,Ho as Bm,Hq as yc,Id as De,Ie as Je,Ii as im,Iq as Xm,It as Tc,Jd as Ta,Ji as am,Jm as xm,Jq as Km,Js as fp,Kd as ot,Ke as yt,Ks as yo,Kt as Nc,L as nc,Lc as Ft,Ld as so,Lp as Hr,M as gt,Mc as Uu,Md as pn,Mk as hm,Mn as La,Mp as _m,N as et,Ni as sm,Nn as Ea,Nq as He,Nr as Mr,Ns as hi,Op as ft,Pc as k,Pm as Mm,Pp as Ba,Pr as ip,Qe as Gu,Qm as Vm,Qr as ap,Qu as $a,Rf as Yu,Sl as Nm,Sp as Jm,Ta as Pu,Tc as mt,Tp as bn,Tt as gi,Up as qm,Ur as sp,Vm as Dm,Vs as vc,Vt as yi,Wo as ve,Wq as Ym,Xh as fi,Xo as zm,Xq as Qm,Xr as Gr,Yd as Hu,Yh as mo,Yi as lm,Yo as Um,Yt as wc,Za as un,Zh as Tr,Zk as gm,Zl as wm,Zq as Wt,_ as xu,_a as Ca,_k as ym,_o as Rr,_t as Rc,ab as ba,ai as om,ak as Fa,ar as Ua,at as hp,au as Q,bc as Ou,bd as va,bl as fo,bu as v,ca as Mu,cd as ao,ch as mi,co as Lm,cs as lp,cu as Nt,cv as xp,dd as Ur,dg as Qu,dh as cc,dk as dm,dl as Sm,do as Em,dr as Sc,ds as Cc,dt as vn,du as O,dv as Rt,ec as me,ed as At,ee as Ir,ej as po,er as Zm,et as gp,eu as Si,ev as Ci,fc as mn,fe as lo,fh as dc,fl as Cm,fo as Om,fr as st,fu as re,fv as ef,gc as zu,ge as Oo,gi as Va,gn as km,gs as cp,gu as p,gv as tf,hk as um,hu as he,it as Tt,j as rc,ji as mc,jq as za,js as dp,ju as le,kq as go,kv as Mn,l as P,la as pr,lm as Rm,lr as ep,ms as bc,mu as In,ns as up,nu as Tn,oh as uc,ok as mm,pf as ju,ph as tm,pm as Lt,pr as tp,pv as ns,qd as nr,qv as bo,rd as ir,re as co,rs as mp,rv as Tf,se as Na,sm as Nr,ss as Et,sv as Nf,tr as rp,tt as yp,un as Pm,vb as Eo,vd as Wr,vh as pi,vn as wr,w as Su,wd as Ia,wf as lc,wi as Da,wn as Fm,xa as Vu,xd as Le,xe as sc,xl as bm,xn as ho,xu as wt,ya as Du,yb as Lu,yd as We,yf as _u,yh as hn,yi as nm,zb as Eu,zd as pe,zf as Ju,zh as Ma,zr as op}from"https://app.framerstatic.com/chunk-WDCEA3EQ.mjs";import{a as jm,b as hc}from"https://app.framerstatic.com/chunk-5DSVU7DA.mjs";import{c as Sn,g as Oa,i as $m,r as Cn,u as Xt,v as Hm,w as xr,y as hr,z as Gm}from"https://app.framerstatic.com/chunk-4DUBS6C5.mjs";import{r as bT,u as Bu}from"https://app.framerstatic.com/chunk-2C4FJUEI.mjs";import{a as Ao,b as Pt}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import{G as Cu}from"https://app.framerstatic.com/chunk-SSXQNR5C.mjs";import{b as ms,c as ps}from"https://app.framerstatic.com/chunk-4ZPMQ7AD.mjs";import{g as Bt,i as zc,m as Eg}from"https://app.framerstatic.com/chunk-3PGDFP4U.mjs";import{b as yu}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{a as bu,b as ha,c as oc,d as vu,j as Iu,m as Tu,n as Nu,p as wu}from"https://app.framerstatic.com/chunk-XFCQREKZ.mjs";import{p as at}from"https://app.framerstatic.com/chunk-3DFADFT7.mjs";import{a as fr,b as E,d as H,e as tt,f as or,h as Fu,i as w,j as ya,k as Au,l as rt,n as ac,o as Sa}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Ia as ga,Rd as rm,a as CT,b as dn}from"https://app.framerstatic.com/chunk-NOOQGO4X.mjs";import{g as fa}from"https://app.framerstatic.com/chunk-4CB4BQFV.mjs";import{a as tc,b as hu,g as gu}from"https://app.framerstatic.com/chunk-ORIFM75E.mjs";import{c as fu}from"https://app.framerstatic.com/chunk-66XIMNKS.mjs";import{B as vr,C as kt,D as Ce,F as ec,G as mu,H as Fe,J as ut,K as Z,X as zr,ca as pu,da as ma,ga as qt,i as uu,ia as pa,l as Re,p as xe,u as fe,y as oe,z as ht}from"https://app.framerstatic.com/chunk-IZV4HDYJ.mjs";import{a as g,b as z}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{d as ST,e as io,j as I,k as b,l as $,m as ie,n as Ze}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var Ri=new Xu(async()=>{let e=await Promise.all([import("https://app.framerstatic.com/dist-UBOM75PL.mjs"),import("https://app.framerstatic.com/dist-NO2QPBRR.mjs"),import("https://app.framerstatic.com/dist-MJ6IU2KU.mjs"),import("https://app.framerstatic.com/dist-K7NPOJ6B.mjs"),import("https://app.framerstatic.com/dist-3Z7TBJKD.mjs"),import("https://app.framerstatic.com/dist-FUKVCZCW.mjs"),import("https://app.framerstatic.com/dist-62LMN7PQ.mjs"),import("https://app.framerstatic.com/dist-FMNFBH4C.mjs"),import("https://app.framerstatic.com/prosemirror-suggest-7VONC64C.mjs")]);return Object.assign({},...e)});function mk(){let e=Ri.preload();e&&e.catch(Re)}async function pk(){let e=Ri.preload();return e&&await e,Ri.read()}function fk(){let e=Ri.preload();if(e)throw e;return Ri.read()}var{onewayMethodTemplate:Mk,voidMethodTemplate:Vk,valueMethodTemplate:vT,streamMethodTemplate:Dk}=gu,qc;(t=>t.service={id:"__ColorSampler__",fingerprint:"2f07b191423077f3239a93a5dec7e417",methods:{sampleColor:{}},newOutgoingWrapper:r=>({sampleColor:vT.bind(-1,"sampleColor",!1,r)})})(qc||={});var Xc;(o=>{o.service=qc.service;function t(n){let i=tc.shared();return{expect:()=>i.expectWithoutDiscovery(o.service,n),discover:a=>i.discover(o.service,n,a),register:a=>i.register({channel:n,service:o.service,implementation:a})}}o.on=t;async function r(n){tc.shared().unregister(n)}o.unregister=r})(Xc||={});var IT=fe("update-tree-cache-for-vekter");function TT(e,t){return t?Fu(t)?t.has(e):t===e:!0}var Kc=[];Object.freeze(Kc);var Yc=[];Object.freeze(Yc);function NT(e,t,r,o){return Tt(e)?De(e)?o??r??gr.identity():!r||!t?gr.identity():gr.boundingRectMatrix(r,t):r??gr.identity()}function wT(e,t,r,o,n,i,a,s){let l=e.root,c=l.cache,m=l.getLocale(i);c.visible=!0,c.lockedByParent=!1,c.renderId=l.id,zs(c);let d=l.children;for(let u of d)if(!(s&&!TT(u.id,s))){if(St(u)){if(!u.isLoaded())continue;RT(e,u,l,t,r,o,n,m,a)}else Qc(e,u,l,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,Kc,Yc,void 0,void 0,t,r,o,n,m,void 0,void 0,!1,a,void 0);$n(l,u)}return e}function lP(e,t){return wT(e.treeStore.tree,e.layoutCache,e.treeStore.sandboxCollectionData,e.treeStore.sandboxVisibility,P.activeBundleHash,e.chromeStore.canvasLocaleId,e.effectStore.getState(),t)}function RT(e,t,r,o,n,i,a,s,l){let c=t.cache;c.visible=!0,c.lockedByParent=!1,c.renderId=t.id,c.parentRenderId=r.id,zs(c);let m=t.children,{combinedVariableValueMap:d,combinedVariableControlMap:u}=t.combineVariableValueAndControlMaps(e,void 0,void 0,P,n,a,s),f=U(t);for(let h of m)Qc(e,h,t,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,Kc,Yc,d,u,o,n,i,a,s,void 0,void 0,!1,l,f),$n(t,h)}function Qc(e,t,r,o,n,i,a,s,l,c,m,d,u,f,h,y,S,C,T,N,x,V,A,F,j,W,K,ce){let D=t.cache,ye=D.activeVekterLocale;D.activeVekterLocale=A;let{combinedVariableValueMap:ne,combinedVariableControlMap:Y,combinedVariableMapsAreEqual:de}=t.combineVariableValueAndControlMaps(e,S,C,P,N,V,A),ae=Le(t),Ie=ae?N.isEmpty(t.id):!1,[je,ee]=kT(e,t,r,a,s,T,N,x);D.groundNodeAncestorId=F?.groundNodeId,D.masterAncestorId=c,D.replicaAncestorId=m,D.overlayAncestorId=d,D.formContainerAncestorId=f;let L=n&&!!je,ue=!F||gr.equals(D.groundNodeMatrix,F.groundNodeMatrix),we=!ui(t)||D.layout===t.layout,Ye=ye===D.activeVekterLocale,Vt=Ic(t,F),Te=!!K?.nodes.has(t.id),tr=Te===D.isEffectPreview&&pr(K?.effectIds??null,D.effectIds)&&(K?.type??null)===D.effectType&&D.webPageEffect===ce,Dt=vc(t)||et.equals(D.viewportRect,Vt);o||=Lt(t);let mr=we&&Ye&&Dt&&tr&&de&&D.insideVariant===o&&D.visible===L&&D.collectionIsEmpty===Ie&&D.lockedByParent===i&&D.lastUpdate===t.update&&D.parentDirected===j&&D.parentDirectedRowHeightFitContent===W&&rS(t.cache.getRenderInstance(t.id),je)&&DT(t.cache.secondaryRenderInstances,ee)&&Am(e,t)===D.usesLayoutTemplateRectForModuleIdentifier;if(mr&&ue)return;D.isEffectPreview=Te,D.effectIds=K?.effectIds??null,D.effectType=K?.type??null,D.webPageEffect=ce,D.ancestorRepeaterIds=h,D.repeatedAncestorRepeaterIds=y;let lt=!1;lt&&lt.cacheUpdated(),mr?D.canvasRect=void 0:(lt&&lt.cacheReset(),D.reset(),D.groundNodeAncestorId=F?.groundNodeId,D.masterAncestorId=c,D.replicaAncestorId=m,D.overlayAncestorId=d,D.slotPropertyAncestorId=u,D.formContainerAncestorId=f,D.activeVekterLocale=A,D.visible=L,D.collectionIsEmpty=Ie,D.insideVariant=o,D.lockedByParent=i,D.lastUpdate=t.update,D.parentDirected=j,D.parentDirectedRowHeightFitContent=W,D.viewportRect=Vt,D.layout=ui(t)?t.layout:void 0,D.ancestorRepeaterIds=h,D.repeatedAncestorRepeaterIds=y,D.usesLayoutTemplateRectForModuleIdentifier=ho(t)?t.usesLayoutTemplateRectForModuleIdentifier():void 0,je&&(D.renderId=t.id,Object.assign(D,je)),D.secondaryRenderInstances=ee);let{parentRectByRenderIdForChildren:ct,parentMatrixByRenderIdForChildren:te,parentUsesDOMRectForChildren:se,groundNodeContextForChildren:ze}=tS(e,t,l,F,T),rr=t.children;if(!rr)return;let br=ao(t)?t.layout:void 0,no=At(t)&&t.gridRowHeightType==="fit",_t=c;!_t&&Lu(t)&&(_t=t.id);let Jt=m;!Jt&&ci(t)&&(Jt=t.id);let Qe=Bs(t,h);for(let dt of rr){if(!we)for(let[,yT]of dt.cache.iterateRenderInstances())yT.parentRect=void 0;let Br=ae&&Mn(e,dt,t),ua=Br&&Ie,du=ae&&!Br,gT=at.isOn("visibilityFromSandbox")?L:Br?!ua&&L:L;Qc(e,dt,t,o,gT,Mf(t),ct,te,se,_t,Jt,Tt(t)?t.id:d,Na(t)?t.id:u,Mr(t)?t.id:f,Qe,Br?Bs(t,y):y,du?S:ne,du?C:Y,T,N,x,V,A,ze,br,no,K,ce),$n(t,dt)}}function cP(e,t,r){let o=xT(e,r),n=e.root,i=n.cache;i.visible=!0,i.renderId=n.id,zs(i);let a=n.children;for(let s of a){if(St(s)){if(!s.isLoaded())continue;MT(e,s,n,t,o)}else Zc(e,s,n,new Map,new Map,!1,t,o,void 0,!1,void 0);$n(n,s)}return o}function xT(e,t){let r=new Set,o=new Set;function n(a){o.has(a.id)||(r.add(a.id),o.add(a.id),a.children&&a.children.forEach(n))}function i(a){let s=a.id;for(;s&&!r.has(s);)r.add(s),s=e.getNode(s)?.parentid}for(let a of t){let s=e.getNode(a);s&&(i(s),s.children&&s.children.forEach(n))}return r}function Bs(e,t){return Le(e)?t.length===0?[e.id]:[...t,e.id]:t}function MT(e,t,r,o,n){let i=t.cache;i.visible=!0,i.renderId=t.id,i.parentRenderId=r.id,zs(i);let a=t.children;for(let s of a)Zc(e,s,t,new Map,new Map,!1,o,n,void 0,!1,void 0),$n(t,s)}function Zc(e,t,r,o,n,i,a,s,l,c,m){if(!s.has(t.id))return;let d=t.cache;if(d.parentDirected=l,d.parentDirectedRowHeightFitContent=c,d.viewportRect=Ic(t,m),!d.visible)return;for(let[N,x]of d.iterateRenderInstances()){let V=x.parentRenderId;g(V,"Missing `parentRenderId`"),x.parentRect=o.get(V),x.parentMatrix=n.get(V),x.parentDirectedRect=oS(t,N,r,a)}let{parentRectByRenderIdForChildren:u,parentMatrixByRenderIdForChildren:f,parentUsesDOMRectForChildren:h,groundNodeContextForChildren:y}=tS(e,t,i,m,a),S=t.children;if(!S)return;let C=ao(t)?t.layout:void 0,T=At(t)&&t.gridRowHeightType==="fit";for(let N of S)Zc(e,N,t,u,f,h,a,s,C,T,y),$n(t,N)}function VT(e,t){if(!t||!yt(e)||!Ee(e))return;let r=new Map;for(let[o,n]of t){let i=n.originX??kc*n.width,a=n.originY??kc*n.height,s=gr.identity();_p||(s=s.translate(e.left??0,e.top??0));let l=s.translate(i,a).multiplySelf(gr.identity().translate(n.x,n.y).multiplySelf(n.matrix)).translateSelf(-i,-a),c=gr.convertPointsWithClipping(l,et.pointsAtOrigin({width:n.width,height:n.height}));r.set(o,{domRect:n,canvasCorners:c,canvasRect:et.boundingRectFromPoints(c)})}return r}function tS(e,t,r,o,n){let i=t.cache,a=n.getRects(t.id);a&&(i.domRects=new Map(a));let s=ho(t)&&!!i.usesLayoutTemplateRectForModuleIdentifier;s&&(i.layoutTemplateRects=VT(t,n.getLayoutTemplateRects(t.id))),i.groundNodeMatrix=o?.groundNodeMatrix??null;let l=ho(t)&&t.usesDOMRectCached(),c=!(l||r),m=!!i.viewportRect||!vc(t),d,u=new Map,f=new Map;for(let[h,y]of i.iterateRenderInstances()){let{parentRect:S,parentMatrix:C,parentDirectedRect:T}=y,N=e.getParentSizeInfo(t,void 0,c,m,h),x=T??t.rect(N,c,void 0,h);u.set(h,x);let V=t.originAdjustedMatrix(N,x,h),A=NT(t,S,C,o?.groundNodeMatrix),F;try{F=A.multiply(V)}catch(ce){IT.reportErrorOncePerMinute(ce,{parentRect:S,frame:x,parentMatrix:A,transformMatrix:V}),F=new DOMMatrix}let j=Vf(t)?F:gr.flatProjectionMatrix(F);f.set(h,j),y.matrix=F;let W=e.convertCornerPointsToCanvas(t,!1,void 0,h);y.cornerPoints=W;let K=et.boundingRectFromPoints(W);if(y.canvasRect=K,Ja(t)&&zf(t)&&t.strokeEnabled){let ce=t.resolveValue("strokeWidth")??0;K=et.inflate(K,ce/2)}s?eS(y,i.getLayoutTemplateContainerRect()?.canvasRect??K):eS(y,K),My(h)&&(d=o??hp(t,x,{groundNodeId:t.id,groundNodeMatrix:j}))}return{parentRectByRenderIdForChildren:u,parentMatrixByRenderIdForChildren:f,parentUsesDOMRectForChildren:l,groundNodeContextForChildren:d}}function Qy(e,t,r){if(at.isOn("visibilityFromSandbox"))return r.getVisible(t);let o=Tt(e)&&!e.cache.overlayVisible;return e.isVisible()&&!Eu(e)&&!o}function rS(e,t){return!e&&!t?!0:!e||!t?!1:et.equals(e.parentRect??null,t.parentRect??null)&&gr.equals(e.parentMatrix??null,t.parentMatrix??null)&&et.equals(e.parentDirectedRect??null,t.parentDirectedRect??null)&&Ou(e.collectionItemIds,t.collectionItemIds)&&e.collectionItemId===t.collectionItemId}function DT(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;for(let[r,o]of t){let n=e.get(r);if(!rS(o,n))return!1}return!0}function Zy(e,t,r,o,n,i,a,s,l){return{parentRenderId:o,parentRect:i.get(o),parentMatrix:a.get(o),parentDirectedRect:oS(e,t,r,s),matrix:void 0,canvasRect:void 0,cornerPoints:void 0,collectionItemIds:l.getItemIds(t),collectionItemId:n,minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}}function kT(e,t,r,o,n,i,a,s){let l=new Map;if(Le(r)&&Mn(e,t,r))for(let[d,u]of r.cache.iterateRenderInstances()){let f=u.collectionItemIds;if(f)for(let h=0;h<f.length;h++){let y=f[h];if(!y)continue;let S=Vy(d,r.id,y,h),C=Hc(S,t.id);Qy(t,C,s)&&l.set(C,Zy(t,C,r,d,y??u.collectionItemId,o,n,i,a))}}else for(let[d,u]of r.cache.iterateRenderInstances()){let f=Hc(d,t.id);Qy(t,f,s)&&l.set(f,Zy(t,f,r,d,u.collectionItemId,o,n,i,a))}let c=l.get(t.id);l.delete(t.id);let m=l.size>0?l:void 0;return[c,m]}function zs(e){e.minX=1/0,e.maxX=-1/0,e.minY=1/0,e.maxY=-1/0}function eS(e,t){e.minX=t.x,e.maxX=t.x+t.width,e.minY=t.y,e.maxY=t.y+t.height}function PT(e,t){e.minX>t.minX&&(e.minX=t.minX),e.maxX<t.maxX&&(e.maxX=t.maxX),e.minY>t.minY&&(e.minY=t.minY),e.maxY<t.maxY&&(e.maxY=t.maxY)}function $n(e,t){for(let[,r]of t.cache.iterateRenderInstances()){let o=r.parentRenderId;g(o,"Missing `parentRenderId`");let n=e.cache.getRenderInstance(o);g(n,"Missing `renderInstance`"),PT(n,r)}}function oS(e,t,r,o){if(ao(r)&&wn(e,r))return o.getRect(t)}var nS="https://app.framerstatic.com/cursor-add-6XAMN4WT.png";var iS="https://app.framerstatic.com/cursor-add@2x-2LFPOUCY.png";var aS="https://app.framerstatic.com/cursor-disconnect-ZKL7EWFU.png";var sS="https://app.framerstatic.com/cursor-disconnect@2x-OE3AENSJ.png";var lS="https://app.framerstatic.com/cursor-feedback-BOBWQH3Z.png";var cS="https://app.framerstatic.com/cursor-feedback@2x-6D4B4MBW.png";var dS="https://app.framerstatic.com/cursor-grab-FRV55RHP.png";var uS="https://app.framerstatic.com/cursor-grab@2x-GIY2VUEH.png";var mS="https://app.framerstatic.com/cursor-grabbing-OKC4B74I.png";var pS="https://app.framerstatic.com/cursor-grabbing@2x-WE42DW3I.png";var fS="https://app.framerstatic.com/cursor-insert-6UGIJVAR.png";var hS="https://app.framerstatic.com/cursor-insert@2x-ZOKYLV6L.png";var gS="https://app.framerstatic.com/cursor-remove-Q4ORWDOQ.png";var yS="https://app.framerstatic.com/cursor-remove@2x-QZ7R5XN6.png";var SS="https://app.framerstatic.com/cursor-swap-2VDBHJ6M.png";var CS="https://app.framerstatic.com/cursor-swap@2x-BAI7OT3Z.png";var bS="https://app.framerstatic.com/cursor-vector-add-L3563YFF.png";var vS="https://app.framerstatic.com/cursor-vector-add@2x-24A2HJDM.png";var IS="https://app.framerstatic.com/cursor-vector-point-6OWAA3FG.png";var TS="https://app.framerstatic.com/cursor-vector-point@2x-4OEKRKH6.png";var NS="https://app.framerstatic.com/cursor-vector-OLHKU4LP.png";var wS="https://app.framerstatic.com/cursor-vector@2x-YFL4EEVU.png";var RS="https://app.framerstatic.com/cursor-zoom-in-2YKQ3Z67.png";var xS="https://app.framerstatic.com/cursor-zoom-in@2x-ZUXRFEB6.png";var MS="https://app.framerstatic.com/cursor-zoom-out-IWSRWDMJ.png";var VS="https://app.framerstatic.com/cursor-zoom-out@2x-EW4OYJ5J.png";var DS="https://app.framerstatic.com/resize-east-west-ANAPBU4H.png";var kS="https://app.framerstatic.com/resize-east-west@2x-HS4NZ3H2.png";var PS="https://app.framerstatic.com/resize-east-XHHFSY6J.png";var FS="https://app.framerstatic.com/resize-east@2x-3TA77JQ5.png";var AS="https://app.framerstatic.com/resize-nesw-GL7KYSRE.png";var LS="https://app.framerstatic.com/resize-nesw@2x-7OD4PILK.png";var ES="https://app.framerstatic.com/resize-north-east-OYDCT3XA.png";var OS="https://app.framerstatic.com/resize-north-east@2x-GB4FBRV3.png";var BS="https://app.framerstatic.com/resize-north-south-JYDNIYWS.png";var zS="https://app.framerstatic.com/resize-north-south@2x-IHAJOLEA.png";var US="https://app.framerstatic.com/resize-north-west-WOGBMCQ7.png";var WS="https://app.framerstatic.com/resize-north-west@2x-CGE2AJ7O.png";var $S="https://app.framerstatic.com/resize-north-TOADQ3IJ.png";var HS="https://app.framerstatic.com/resize-north@2x-U6CXDTI2.png";var GS="https://app.framerstatic.com/resize-nwse-CTXL5YSS.png";var jS="https://app.framerstatic.com/resize-nwse@2x-H5TFIU4Y.png";var _S="https://app.framerstatic.com/resize-south-east-7BL2E7ZY.png";var JS="https://app.framerstatic.com/resize-south-east@2x-YOYUZV36.png";var qS="https://app.framerstatic.com/resize-south-west-EZHHVQZN.png";var XS="https://app.framerstatic.com/resize-south-west@2x-XZTWVP5E.png";var KS="https://app.framerstatic.com/resize-south-MEM66EWG.png";var YS="https://app.framerstatic.com/resize-south@2x-KMVPTHAA.png";var QS="https://app.framerstatic.com/resize-west-GRT5XBDQ.png";var ZS="https://app.framerstatic.com/resize-west@2x-DBCUQ6K5.png";var eC="https://app.framerstatic.com/touch-active-CQT44XON.png";var tC="https://app.framerstatic.com/touch-active@2x-N44WHZVB.png";var rC="https://app.framerstatic.com/touch-K4JGV3WE.png";var oC="https://app.framerstatic.com/touch@2x-M3Y2EBTW.png";var nC={"cursor-add":[nS,iS],"cursor-disconnect":[aS,sS],"cursor-feedback":[lS,cS],"cursor-grab":[dS,uS],"cursor-grabbing":[mS,pS],"cursor-insert":[fS,hS],"cursor-remove":[gS,yS],"cursor-swap":[SS,CS],"cursor-vector-add":[bS,vS],"cursor-vector-point":[IS,TS],"cursor-vector":[NS,wS],"cursor-zoom-in":[RS,xS],"cursor-zoom-out":[MS,VS],"resize-nesw":[AS,LS],"resize-nwse":[GS,jS],"resize-north-east":[ES,OS],"resize-north-west":[US,WS],"resize-south-east":[_S,JS],"resize-south-west":[qS,XS],"resize-east-west":[DS,kS],"resize-west":[QS,ZS],"resize-east":[PS,FS],"resize-north-south":[BS,zS],"resize-north":[$S,HS],"resize-south":[KS,YS],"touch-active":[eC,tC],touch:[rC,oC]};var FN=Cu.isFirefox(),sr=(e,t=12)=>{let r=H(t)?t:t.x,o=H(t)?t:t.y,[n,i]=nC[e];return FN?`url(${n}) ${r} ${o}, auto`:`-webkit-image-set(url(${n}) 1x, url(${i}) 2x) ${r} ${o}, default`},td={x:6,y:2},IA=sr("cursor-vector",td),TA=sr("cursor-vector-add",td),NA=sr("cursor-vector-point",td),wA=sr("cursor-disconnect",10),RA=sr("cursor-add",10),xA=sr("cursor-remove",10),MA=sr("cursor-swap",{x:3,y:3}),VA=sr("cursor-feedback",{x:16,y:16}),Us={x:15,y:15},DA=sr("cursor-insert",Us),kA=sr("cursor-zoom-in",Us),PA=sr("cursor-zoom-out",Us),FA=sr("cursor-grabbing",Us),AN=(e,t)=>{switch(e){case 0:{if(t.x&&t.y)return 8;if(t.x)return 6;if(t.y)return 2;break}case 1:{if(t.x)return 7;break}case 2:{if(t.x&&t.y)return 6;if(t.x)return 8;if(t.y)return 0;break}case 3:{if(t.y)return 5;break}case 5:{if(t.y)return 3;break}case 6:{if(t.x&&t.y)return 2;if(t.x)return 0;if(t.y)return 8;break}case 7:{if(t.x)return 1;break}case 8:{if(t.x&&t.y)return 0;if(t.x)return 2;if(t.y)return 6;break}default:break}return e},LN=e=>8-e,EN=(e,t,r)=>{let{fx:o,fy:n}=e,i=t.findIndex(m=>m.fx===o&&m.fy===n),a=AN(i,r),s=t[a];g(s,"handle must be defined",s,t);let l=LN(a),c=t[l];return g(c,"handle must be defined",c,t),Ue.angleFromX(c,s)},ON=e=>{switch(e){case 0:return 15;case 1:return 8;case 2:return 9;case 3:return 14;case 5:return 10;case 6:return 13;case 7:return 12;case 8:return 11}},Hn=e=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M5 10.25v3.5c0 .138.112.25.25.25H13v2.7a.25.25 0 0 0 .415.187l5.37-4.699a.25.25 0 0 0 0-.376l-5.37-4.7a.25.25 0 0 0-.415.189V10H5.25a.25.25 0 0 0-.25.25Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${e} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${e} 0 0)' transform-origin='center center'/><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M6 11h8V9l3.5 3-3.5 3v-2H6z'/></g></g></svg>") 12 12, pointer`,BN=e=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M9 13.98v2.72a.25.25 0 0 1-.415.187l-5.37-4.699a.25.25 0 0 1 0-.376l5.37-4.7A.25.25 0 0 1 9 7.302V10l6 .02V7.3a.25.25 0 0 1 .415-.187l5.37 4.699a.25.25 0 0 1 0 .376l-5.37 4.7a.25.25 0 0 1-.415-.189V14l-6-.02Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${e} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${e} 0 0)' transform-origin='center center'/><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M16 13v2l3.5-3L16 9v2H8V9l-3.5 3L8 15v-2z'/></g></g></svg>") 12 12, pointer`,ed=e=>e+180,zN=(e,t,r)=>{if(t){let o=t.x.max&&t.x.min,n=t.y.max&&t.y.min,i=ON(e),a=i===8||i===12,s=i===14||i===10;if(a&&n||s&&o)return;if(s&&t.x.max)return Hn(ed(r));if(s&&t.x.min)return Hn(r);if(a&&t.y.max)return Hn(ed(r));if(a&&t.y.min)return Hn(r);let l=i===15||i===13||i===9||i===11;if(l&&t.x.max&&t.y.max)return Hn(ed(r));if(l&&t.x.min&&t.y.min)return Hn(r)}return BN(r)},AA=(e,t,r,o={})=>{let n=t.findIndex(i=>i.fx===e.fx&&i.fy===e.fy);if(!(n<-1))return zN(n,r,EN(e,t,o))},UN=e=>{switch(e){case 0:return[6,2];case 2:return[0,8];case 8:return[2,6];case 6:return[8,0];default:return[8,0]}},WN=(e,t)=>{let{fx:r,fy:o}=e,n=t.findIndex(T=>T.fx===r&&T.fy===o),i=t[n];g(i,"handle must be defined",i,t);let[a,s]=UN(n),l=t[a],c=t[s];g(l&&c,"handle must be defined",a,s,t);let m=Ue.angleFromX(i,l),d=Ue.angleFromX(i,c),u=Math.abs(m-d),f=(u>180?360-u:u)/2,h=[t[0],t[4],t[2]];return(qu.isClockwise(h)?m:d)+f-180},$N=e=>`url("data:image/svg+xml,<svg width='24px' height='24px' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><path d='M10.25,20 C10.1119288,20 10,19.8880712 10,19.75 L10,12.6035534 C10,12.4654822 10.1119288,12.3535534 10.25,12.3535534 C10.3163041,12.3535534 10.3798926,12.3798926 10.4267767,12.4267767 L12.9218922,14.9225703 C13.5940823,14.1362843 14,13.1155457 14,12 C14,10.8844543 13.5940823,9.86371572 12.9218922,9.07742971 L10.4267767,11.5732233 C10.3798926,11.6201074 10.3163041,11.6464466 10.25,11.6464466 C10.1119288,11.6464466 10,11.5345178 10,11.3964466 L10,4.25 C10,4.11192881 10.1119288,4 10.25,4 L17.3964466,4 C17.4627507,4 17.5263392,4.02633921 17.5732233,4.0732233 C17.6708544,4.17085438 17.6708544,4.32914562 17.5732233,4.4267767 L15.7556302,6.24518726 C17.1490803,7.75912242 18,9.78018974 18,12 C18,14.2195857 17.1492525,16.2404687 15.7560531,17.7543533 L17.5732233,19.5732233 C17.6708544,19.6708544 17.6708544,19.8291456 17.5732233,19.9267767 C17.5263392,19.9736608 17.4627507,20 17.3964466,20 L10.25,20 Z' id='b'/><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='0.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='0.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='0.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter></defs><g fill='none' fill-rule='evenodd'><g transform='translate(0, 0.75) rotate(${e} 12 12)'><use fill='%23000' filter='url(%23a)' xlink:href='%23b'/></g><g transform='translate(0, 1) rotate(${e} 12 12)'><use fill='%23000' filter='url(%23c)' xlink:href='%23b'/></g><g transform='rotate(${e} 12 12)'><use fill='%23FFF' xlink:href='%23b'/><path d='M11,19 L11,14.5 L12.8568184,16.3571474 C14.160342,15.3514059 15,13.7737593 15,12 C15,10.2262407 14.160342,8.6485941 12.8568184,7.64285263 L11,9.5 L11,5 L12.193,4.99949654 L15.5,5 L14.2798125,6.22017067 C15.9414235,7.59584189 17,9.67429905 17,12 C17,14.3257233 15.9414031,16.4041981 14.2797646,17.779869 L15.5,19 L11,19 Z' fill='%23000'/></g></g></svg>") 12 12, pointer`,LA=(e,t)=>$N(WN(e,t));var UA="appPointerEvents_arpwu8w",WA="appDisablePointerEvents_a1pulxae";var iC=io(bT());var xi=io(dn());async function aC(e,t,r=1/0,o){o??=new Wn(e,{silent:!0});let n=[],i=[],a=[];for(let l of t){if(a.length>=r){i.push(l);continue}if(!ps.includes(l.type)){n.push(l);continue}let c=o.add(l);a.push(c)}return n.length>0&&Sr({type:"add",key:"importUploadImagesUnsupported",variant:"warning",text:(0,xi.jsxs)("span",{className:Ti,children:["Skipped ",n.length," unsupported images"]}),duration:1e4}),i.length>0&&Sr({type:"add",key:"importUploadImagesSkipped",variant:"warning",text:(0,xi.jsxs)("span",{className:Ti,children:["Skipped ",i.length," images over field limit"]}),duration:1e4}),rd(o,a).catch(()=>{}),(await Promise.all(a)).filter(Ni)}async function rd(e,t){let r="uploadEmbeddedImagesByUrl",o={type:"add",key:r,variant:"progress",icon:"image",duration:1/0,showCloseButton:"never"};for await(let{completed:i,started:a}of e.statusUpdates())Sr({...o,text:(0,xi.jsxs)("span",{className:Ti,children:["Adding ",i," of ",a," images\u2026"]})});await Promise.allSettled(t);let{failed:n}=e.status;n>0&&Sr({type:"add",key:"importUploadImagesFailed",variant:"warning",text:(0,xi.jsxs)("span",{className:Ti,children:["Failed to upload ",n," ",(0,iC.default)("image",n)]}),duration:5e3}),Sr({type:"remove",key:r})}var sC=fe("ChooseFileService"),od=class{constructor(t,r,o){this.engine=t;this.assetService=r;this.filePickerRef=o;I(this,"assetUploader");this.assetUploader=new Wn(this.engine)}async pickFile({allowedFileTypes:t,multiple:r}={}){let o=this.filePickerRef.current;if(!o)return null;let n=await o.show(t?.map(i=>`.${i}`),r);return n.isFiles()?n.value:null}async pickImage({allowedFileTypes:t=ms,multiple:r}={}){return this.pickFile({allowedFileTypes:t,multiple:r})}async pickAndUploadImage(t={}){try{let r=await this.pickImage(t);if(!r)return[];if(r.length===1){let o=await this.assetUploader.add(r[0]);if(!o)return[];if(await this.assetService.refresh().catch(Re),Ni(o))return[o]}else return await aC(this.engine,r,t.maxUploads)}catch(r){sC.warn("Failed to upload file:",r)}return[]}async pickAndUploadFile(t){try{let r=await this.pickFile(t);if(!r)return;let o=r[0];return o?await this.assetUploader.add(o):void 0}catch(r){sC.warn("Failed to upload file:",r)}}async addImages(t){if(!t?.length)return[];let o=(await Promise.all(Array.from(t,n=>this.assetUploader.add(n)))).filter(Ni);return o.length===0||await this.engine.stores.assetStore.assetService?.refresh().catch(Re),o}},{service:lC,resolve:GN}=ey();function eL(e,t,r){GN(new od(e,t,r))}var cC=class{constructor(){I(this,"nodeIdToRenderIdToRect",new Map);I(this,"nodeIdToLayoutTemplateSelectorToRect",new Map);I(this,"nodeIdToRenderIdToChildrenRects",new Map)}processLayoutMeasurements(t){let r=new Set,o=new Set;for(let{nodeId:n,renderId:i,layoutMetrics:a,layoutTemplateSelector:s}of t){let{childrenRects:l,...c}=a;o.has(n)||this.nodeIdToLayoutTemplateSelectorToRect.delete(n),o.add(n);let m=s?this.nodeIdToLayoutTemplateSelectorToRect.get(n)?.get(s):this.nodeIdToRenderIdToRect.get(n)?.get(i),d=this.nodeIdToRenderIdToChildrenRects.get(n)?.get(i);if(!(pr(m,c,!0)&&jN(d,l))){if(s){let u=this.nodeIdToLayoutTemplateSelectorToRect.get(n)??new Map,f=c.matrix?DOMMatrixReadOnly.fromMatrix(c.matrix):void 0;u.set(s,{...c,matrix:f}),this.nodeIdToLayoutTemplateSelectorToRect.set(n,u)}else{let u=this.nodeIdToRenderIdToRect.get(n)??new Map;u.set(i,et.from(c)),this.nodeIdToRenderIdToRect.set(n,u)}if(l){let u=this.nodeIdToRenderIdToChildrenRects.get(n)??new Map;u.set(i,l),this.nodeIdToRenderIdToChildrenRects.set(n,u)}r.add(n)}}return r}getContentSize(t){let r=this.getRect(t),o=this.getChildrenRects(t);if(!r||!o)return;let{width:n,height:i}=et.merge(...o);return{width:n,height:i}}getRect(t){let r=Gc(t);return this.nodeIdToRenderIdToRect.get(r)?.get(t)}getRects(t){return this.nodeIdToRenderIdToRect.get(t)}getLayoutTemplateRects(t){return this.nodeIdToLayoutTemplateSelectorToRect.get(t)}getChildrenRects(t){let r=Gc(t);return this.nodeIdToRenderIdToChildrenRects.get(r)?.get(t)}pruneAfterTreeChanges(t){for(let r of t){let o=r.to.parentid&&r.from?.parentid&&r.to.parentid!==r.from.parentid;r.removed?(this.nodeIdToRenderIdToRect.delete(r.id),this.nodeIdToRenderIdToChildrenRects.delete(r.id),this.nodeIdToLayoutTemplateSelectorToRect.delete(r.id)):o&&this.nodeIdToRenderIdToRect.delete(r.id)}}};function jN(e,t){return e===t?!0:e===void 0||t===void 0||e.length!==t.length?!1:t.every((r,o)=>et.equals(r,e[o]??null))}var _N={cache:!0,mutable:!0,update:!0,parentid:!0,originalid:!0,duplicatedFrom:!0,moduleSourceRevision:!0,moduleSourceRevisionHint:!0,moduleSourceRevisionCommittedHint:!0,kitSectionsStructure:!0,layoutTemplateIdentifierOverride:!0};function No(e,t){if(!w(t)&&!_N[e]&&!e.startsWith("export")&&!rp(e))return t}function JN(e,t){if(e!=="children")return No(e,t)}function qN(e,t,r,o,n){if(!hm(e)||!mc(t))return t;if(t.type==="slot")return!or(t.value)||G(r)&&r.slotsAreChildNodes?t:t.value.map(i=>{let a=n.get(i.reference);return Rs(o,a)?a:void 0});if(t.type==="componentinstance"){if(!E(t.value))return t;let i=n.get(t.value);return Rs(o,i)?i:void 0}else if(t.type==="array"){if(!or(t.value))return t;let i=[],a=!1;for(let s of t.value){if(!mc(s)||s.type!=="componentinstance"||(a=!0,!E(s.value)))continue;let l=n.get(s.value);Rs(o,l)&&i.push(l)}return a?i:t}return t}function XN(e,t){return(r,o,n)=>No(r,qN(r,o,n,t,e))}var Mi=fe("ModuleSourceRevision");function vL(e){return zr(qt(e,No))}function KN(e,t){switch(e.__class){case"CollectionItemNode":case"ImageStylePresetNode":case"InlineCodeStylePresetNode":case"LayoutTemplateNode":case"LinkStylePresetNode":case"SmartComponentNode":case"TableStylePresetNode":case"WebPageNode":return zr(qt(e,No));case"FrameNode":{let r=t.get(e.parentid);return!r||!Ve(r)?void 0:zr(qt(e,XN(t,r.id)))}case"CollectionNode":{g(ot(e),"Expected collection node");let r=qt(t.root.locales),o=qt(e,JN),n=qt(e.getUnsortedChildren()?.map(i=>i.moduleSourceRevision));return zr(r+o+n)}case"PresetsListNode":{let r=e.children?.filter(o=>!Ot(o,t))??[];return zr(qt(r,No))}case"TextStylePresetNode":case"BlockquoteStylePresetNode":{if(ci(e))return e.moduleSourceRevision;let r=qt(e,No);return e.cache.replicaInstances?.forEach(o=>{let n=t.getNodeWithTrait(o,ci);n&&(r+=qt(n,No))}),zr(r)}case"VectorSetNode":{g(Me(e),"Expected VectorSetNode");let r=e.getVectorSetItems().map(o=>{let n=ut("vector",o.id,"default").localId,i=t.getNodeWithTrait(n,lf);return i?i.save.moduleId:""});return zr(qt(r)+e.name)}case"ShapeContainerNode":{if(!Rt(e))return;let r=t.getScopeNodeFor(e);if(!Me(r))return;let o=qt(e,No);return zr(o+qt(r.variables))}case"CanvasPageNode":case"RootNode":return;case"ComponentPresetNode":return;case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BooleanShapeNode":case"BoxShadow":case"CanvasNode":case"CanvasScopeNode":case"DesignPageNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeComponentNode":case"CodeFileEntityTypeRootNode":case"CollectionReferenceVariableEditTool":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HighlightStackItemTool":case"HighlightTool":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"LayoutTemplateEntityTypeRootNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"Menu":case"MoveTool":case"MutableNode":case"OvalShapeNode":case"OverlayNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathNode":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PolygonShapeNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RectangleShapeNode":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextNode":case"RichTextVariableEditTool":case"RotateTool":case"RouteNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"ShapeGroupNode":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"StarShapeNode":case"StringVariableEditTool":case"DateVariableEditTool":case"EnumVariableEditTool":case"StyledTextDraft":case"SVGNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextNode":case"VectorSetEntityTypeRootNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"ZoomSelectTool":case"ZoomTool":return;default:z(e.__class,"getModuleRevision: node.__class must be a valid value")}}function id(e,t){let r=e.get(t);return!r||!Ot(r,e)?!1:w(r.moduleSourceRevisionHint)||r.moduleSourceRevisionCommittedHint===r.moduleSourceRevisionHint?(Mi.debug(`Hint hasn't changed for ${r.id}.`),!1):(Mi.debug(`Initial Revision: ${r.moduleSourceRevision}`),!0)}function nd(e,t){let r=e.get(t);if(!r||!Ot(r,e))return;let o=performance.now(),n=KN(r,e);Mi.debug(`Spent ${performance.now()-o}ms computing module revision for ${r.id}`);let i=H(n)&&n!==r.moduleSourceRevision;Mi.debug(`Revisions: ${r.moduleSourceRevision}, ${n}`);let a=r.moduleSourceRevisionHint,s=i?{moduleSourceRevision:n,moduleSourceRevisionCommittedHint:a}:{moduleSourceRevisionCommittedHint:a};return Mi.debug(i?`Updating moduleSourceRevision for ${r.id}.`:`Updating moduleSourceRevisionCommittedHint for ${r.id}.`),r.setIgnoringReplica(s,e),i?n:void 0}function uC(e,t){return t(r=>{if(r.isViewOnly)return;let o=r.get(e);return ot(o)&&o.getUnsortedChildren()?.forEach(n=>{id(r,n.id)&&nd(r,n.id)}),nd(r,e)})}function mC(e,t){return t(r=>{if(!r.isViewOnly)return e.reduce((o,n)=>(o[n.id]=nd(r,n.id)??1,o),{})})}function pC(e){window.addEventListener("beforeunload",t=>{e()&&(t.preventDefault(),t.returnValue="You have unsaved changes. They might be lost if you leave the page.")})}var YN={track:!0};function fC(e){let t={...e,event:"preview_shown"};yu(t,YN)}var QN=fe("CodeGenerationStore"),ZN="transform",Gn,qo,Ws=class{constructor(t){this.sourceNode=t;$(this,Gn,[]);$(this,qo)}start(t){let r=performance.now();return{end:o=>{b(this,Gn).push([t,performance.now()-r]),ie(this,qo,b(this,qo)??o),t===ZN&&this.completeSession()}}}restartSession(){ie(this,Gn,[]),ie(this,qo,void 0)}completeSession(){b(this,qo)?.forEach(({type:t,source:r,artifacts:o})=>{let n=ew(t,this.sourceNode);if(!n)return;let i={codeType:n,durationMs:0,updateCount:0,updateDurationMs:0,serializationDurationMs:0,compilationDurationMs:0,synchronizationDurationMs:0,size:r.length,id:this.sourceNode.id,nodes:o?.metrics?.nodes??1,variants:o?.metrics?.variants??0,svgBytes:o?.metrics?.svgBytes,textBytes:o?.metrics?.textBytes};for(let[s,l]of b(this,Gn))switch(i.durationMs+=l,s){case"update":i.updateCount++,i.updateDurationMs+=l;break;case"serialize":i.serializationDurationMs+=l;break;case"transform":i.compilationDurationMs+=l;break;case"synchronize":i.synchronizationDurationMs+=l;break;default:z(s)}let a;for(a in i){let s=i[a];H(s)&&(i[a]=Math.round(s))}QN.trace("Code Generation Metrics",i),$t("code_generation",i)}),this.restartSession()}};Gn=new WeakMap,qo=new WeakMap;function ew(e,t){switch(e){case"canvasComponent":return"smart_component";case"css":return"styles_preset";case"collection":return"collection";case"draftCollection":return"draft_collection";case"componentPresets":return"component_presets";case"screen":return U(t)?"web_page":"prototype_screen";case"prototype":return"prototype";case"vector":return"vector";case"vectorSet":return"vector_set";case"codeFile":case"config":case"siteMetadata":case"webPageMetadata":case"layoutTemplate":case"localization":case"design":case"kit":return;default:z(e)}}function tw(e,t){let r={};if(!t||wm(e))return r;for(let o of e.cases)for(let n of t){let i=o.nameLocalized;if(!i)continue;let a=i[n.id]?.value;if(!E(a))continue;let s=r[o.id]??{};r[o.id]=s,s[n.id]=a}return r}function hC(e,t,r){if(e.cases.length===0)return p`(value) => value`;let o=tw(e,t),n=p`value`,i=p`locale`,a=p`fallbackLocale`;return new v(re.lines(p`(${n}, ${i}) => {`,p`const ${a} = ${i}?.fallback;`,p`switch (${n}) {`,...e.cases.map(({id:s,name:l})=>{let c=o[s];return c?new v(re.lines(p`case ${s}:`,p`switch (${i}?.id) {`,...Object.entries(c).map(([m,d])=>p`case ${m}: return ${d};`),p`default:`,p`if (${a}) return ${v.fn(r,n,a)};`,p`return ${l};`,p`}`)):p`case ${s}: return ${l};`}),p`default: return "";`,p`}`,p`}`))}var ad="framercms";function gC(e,t,r){return`${e}-${t}.${r}`}var $s=class{constructor(t){this.componentSourceNodeId=t;I(this,"assets",{})}create(t,r,o){let n=gC(this.componentSourceNodeId,t,r);return this.assets[n]=o,p`new URL(${`./${n}`}, import.meta.url).href`}};var yC=io(CT());function Oe(e,...t){if(!e)throw Error("Assertion Error"+(t.length>0?": "+t.join(" "):""))}function Vi(e){throw new Error(`Unexpected value: ${e}`)}var rw=io(dn());var SC=`// src/code-generation/components/cms/bundled/getRichTextJsonResolver.tsx?bundle
import { ComponentPresetsConsumer, Link, motion } from "framer";

// ../../library/src/router/lazy.tsx
import { forwardRef, isValidElement, useEffect } from "react";
var preloadKey = "preload";
function isLazyComponentType(componentType) {
  return typeof componentType === "object" && componentType !== null && !isValidElement(componentType) && preloadKey in componentType;
}

// src/code-generation/components/cms/bundled/getRichTextJsonResolver.tsx?bundle
import { Fragment, createElement } from "react";

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}

// src/code-generation/components/cms/bundled/getRichTextJsonResolver.tsx?bundle
var RichTextJsonType = /* @__PURE__ */ ((RichTextJsonType2) => {
  RichTextJsonType2[RichTextJsonType2["Fragment"] = 1] = "Fragment";
  RichTextJsonType2[RichTextJsonType2["Link"] = 2] = "Link";
  RichTextJsonType2[RichTextJsonType2["Module"] = 3] = "Module";
  RichTextJsonType2[RichTextJsonType2["Tag"] = 4] = "Tag";
  RichTextJsonType2[RichTextJsonType2["Text"] = 5] = "Text";
  return RichTextJsonType2;
})(RichTextJsonType || {});
function getRichTextJsonResolver(components) {
  const cache = /* @__PURE__ */ new Map();
  function deserializeChildren(children) {
    return children.map(deserializeNode);
  }
  function deserializeNode(node) {
    switch (node[0]) {
      case 1 /* Fragment */: {
        const [, ...children] = node;
        const childNodes = deserializeChildren(children);
        return createElement(Fragment, void 0, ...childNodes);
      }
      case 2 /* Link */: {
        const [, props, ...children] = node;
        const childNodes = deserializeChildren(children);
        return createElement(Link, props, ...childNodes);
      }
      case 3 /* Module */: {
        const [, identifier, props] = node;
        const Component = components[identifier];
        assert(Component, "Module not found");
        if (isLazyComponentType(Component)) {
          void Component.preload();
        }
        return <ComponentPresetsConsumer componentIdentifier={identifier}>
                        {(presetProps) => <Component {...presetProps} {...props} />}
                    </ComponentPresetsConsumer>;
      }
      case 4 /* Tag */: {
        const [, tag, props, ...children] = node;
        const childNodes = deserializeChildren(children);
        if (tag === "a") {
          return createElement(motion.a, props, ...childNodes);
        }
        return createElement(tag, props, ...childNodes);
      }
      case 5 /* Text */: {
        const [, text] = node;
        return text;
      }
    }
  }
  return (pointer) => {
    const cached = cache.get(pointer);
    if (cached) return cached;
    const json = JSON.parse(pointer);
    const result = deserializeNode(json);
    cache.set(pointer, result);
    return result;
  };
}
export {
  RichTextJsonType,
  getRichTextJsonResolver
};
`;var Hs=class{constructor(t,r,o,n,i,a,s,l){this.collectionNode=t;this.treeStore=r;this.imports=o;this.submodules=n;this.bindings=i;this.declarations=a;this.assets=s;this.links=l;I(this,"scopeNode");I(this,"cache",new Map);I(this,"components",{});I(this,"resolvers");I(this,"serializers",{fragment:t=>[1,...t],link:(t,r)=>[2,t,...r],module:(t,r)=>{if(this.addModuleImport(t))return[3,t,r]},tag:(t,r,o)=>[4,t,r,...o],text:t=>[5,t]});I(this,"resolveRichTextBinding");this.resolveRichTextBinding=this.bindings.create("resolveRichText"),this.scopeNode=this.treeStore.tree.getScopeNodeFor(this.collectionNode),this.resolvers=Py(this.assets,this.links,void 0,void 0)}addModuleImport(t){if(t in this.components)return!0;let r=Z(t),o=this.imports.addModuleImport(r,{lazy:!0});return o?(this.components[t]=o,!0):!1}add(t){let r=this.cache.get(t);if(r)return r;let o=ky(t,this.resolvers,this.serializers,{definitionProvider:P,tree:this.treeStore.tree,nodeId:this.collectionNode.id,scopeId:this.scopeNode?.id}),n=JSON.stringify(o);return this.cache.set(t,n),n}serialize(){let t=this.imports.addImport(this.submodules.create(SC).submoduleImport,{exportSpecifier:"getRichTextJsonResolver"}),r=this.declarations.dedupe("richTextComponents",this.components);this.declarations.create(p`const ${this.resolveRichTextBinding} = ${v.fn(t,r)}`)}};var Gs=class{constructor(){I(this,"values",new Map)}add(t){let r=this.values.get(t);if(H(r))return r;let o=this.values.size;return this.values.set(t,o),o}serialize(t,r){let o=[];for(let[i,a]of this.values){let s=Z(i),{importSpecifier:l}=_r(s,"collection",t);g(l,"Import specifier must be defined"),o[a]=p`() => import(${l})`}let n=r.dedupe("vectors",o);return r.dedupe("resolveVectorSetItem",p`(pointer: number) => {${p.joinLines(p`const vector = ${n}[pointer]`,p`if (vector) return vector().then(v => v.default)`)}}`)}};var qe={Uint8:1,Uint16:2,Uint32:4,BigUint64:8,Int8:1,Int16:2,Int32:4,BigInt64:8,Float32:4,Float64:8},js=class{constructor(t){this.bytes=t;I(this,"offset",0);I(this,"view");I(this,"decoder",new TextDecoder);this.view=jn(this.bytes)}getOffset(){return this.offset}ensureLength(t){let r=this.bytes.length;if(!(this.offset+t<=r))throw new Error("Reading out of bounds")}readUint8(){let t=qe.Uint8;this.ensureLength(t);let r=this.view.getUint8(this.offset);return this.offset+=t,r}readUint16(){let t=qe.Uint16;this.ensureLength(t);let r=this.view.getUint16(this.offset);return this.offset+=t,r}readUint32(){let t=qe.Uint32;this.ensureLength(t);let r=this.view.getUint32(this.offset);return this.offset+=t,r}readUint64(){let t=this.readBigUint64();return Number(t)}readBigUint64(){let t=qe.BigUint64;this.ensureLength(t);let r=this.view.getBigUint64(this.offset);return this.offset+=t,r}readInt8(){let t=qe.Int8;this.ensureLength(t);let r=this.view.getInt8(this.offset);return this.offset+=t,r}readInt16(){let t=qe.Int16;this.ensureLength(t);let r=this.view.getInt16(this.offset);return this.offset+=t,r}readInt32(){let t=qe.Int32;this.ensureLength(t);let r=this.view.getInt32(this.offset);return this.offset+=t,r}readInt64(){let t=this.readBigInt64();return Number(t)}readBigInt64(){let t=qe.BigInt64;this.ensureLength(t);let r=this.view.getBigInt64(this.offset);return this.offset+=t,r}readFloat32(){let t=qe.Float32;this.ensureLength(t);let r=this.view.getFloat32(this.offset);return this.offset+=t,r}readFloat64(){let t=qe.Float64;this.ensureLength(t);let r=this.view.getFloat64(this.offset);return this.offset+=t,r}readBytes(t){let r=this.offset,o=r+t,n=this.bytes.subarray(r,o);return this.offset=o,n}readString(){let t=this.readUint32(),r=this.readBytes(t);return this.decoder.decode(r)}readJson(){let t=this.readString();return JSON.parse(t)}};function jn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}var ow=1024,nw=1.5,sd=e=>2**e-1,ld=e=>-(2**(e-1)),cd=e=>2**(e-1)-1,Dr={Uint8:0,Uint16:0,Uint32:0,Uint64:0,BigUint64:0,Int8:ld(8),Int16:ld(16),Int32:ld(32),Int64:Number.MIN_SAFE_INTEGER,BigInt64:-(BigInt(2)**BigInt(63))},kr={Uint8:sd(8),Uint16:sd(16),Uint32:sd(32),Uint64:Number.MAX_SAFE_INTEGER,BigUint64:BigInt(2)**BigInt(64)-BigInt(1),Int8:cd(8),Int16:cd(16),Int32:cd(32),Int64:Number.MAX_SAFE_INTEGER,BigInt64:BigInt(2)**BigInt(63)-BigInt(1)};function Pr(e,t,r,o){Oe(e>=t,e,"outside lower bound for",o),Oe(e<=r,e,"outside upper bound for",o)}var Xo=class{constructor(){I(this,"offset",0);I(this,"bytes",new Uint8Array(ow));I(this,"view",jn(this.bytes));I(this,"encoder",new TextEncoder);I(this,"encodedStrings",new Map)}getOffset(){return this.offset}slice(t=0,r=this.offset){return this.bytes.slice(t,r)}subarray(t=0,r=this.offset){return this.bytes.subarray(t,r)}ensureLength(t){let r=this.bytes.length;if(this.offset+t<=r)return;let o=Math.ceil(r*nw)+t,n=new Uint8Array(o);n.set(this.bytes),this.bytes=n,this.view=jn(n)}writeUint8(t){Pr(t,Dr.Uint8,kr.Uint8,"Uint8");let r=qe.Uint8;this.ensureLength(r),this.view.setUint8(this.offset,t),this.offset+=r}writeUint16(t){Pr(t,Dr.Uint16,kr.Uint16,"Uint16");let r=qe.Uint16;this.ensureLength(r),this.view.setUint16(this.offset,t),this.offset+=r}writeUint32(t){Pr(t,Dr.Uint32,kr.Uint32,"Uint32");let r=qe.Uint32;this.ensureLength(r),this.view.setUint32(this.offset,t),this.offset+=r}writeUint64(t){Pr(t,Dr.Uint64,kr.Uint64,"Uint64");let r=BigInt(t);this.writeBigUint64(r)}writeBigUint64(t){Pr(t,Dr.BigUint64,kr.BigUint64,"BigUint64");let r=qe.BigUint64;this.ensureLength(r),this.view.setBigUint64(this.offset,t),this.offset+=r}writeInt8(t){Pr(t,Dr.Int8,kr.Int8,"Int8");let r=qe.Int8;this.ensureLength(r),this.view.setInt8(this.offset,t),this.offset+=r}writeInt16(t){Pr(t,Dr.Int16,kr.Int16,"Int16");let r=qe.Int16;this.ensureLength(r),this.view.setInt16(this.offset,t),this.offset+=r}writeInt32(t){Pr(t,Dr.Int32,kr.Int32,"Int32");let r=qe.Int32;this.ensureLength(r),this.view.setInt32(this.offset,t),this.offset+=r}writeInt64(t){Pr(t,Dr.Int64,kr.Int64,"Int64");let r=BigInt(t);this.writeBigInt64(r)}writeBigInt64(t){Pr(t,Dr.BigInt64,kr.BigInt64,"BigInt64");let r=qe.BigInt64;this.ensureLength(r),this.view.setBigInt64(this.offset,t),this.offset+=r}writeFloat32(t){let r=qe.Float32;this.ensureLength(r),this.view.setFloat32(this.offset,t),this.offset+=r}writeFloat64(t){let r=qe.Float64;this.ensureLength(r),this.view.setFloat64(this.offset,t),this.offset+=r}writeBytes(t){let r=t.length;this.ensureLength(r),this.bytes.set(t,this.offset),this.offset+=r}encodeString(t){let r=this.encodedStrings.get(t);if(r)return r;let o=this.encoder.encode(t);return this.encodedStrings.set(t,o),o}writeString(t){let r=this.encodeString(t),o=r.length;this.writeUint32(o),this.writeBytes(r)}writeJson(t){let r=JSON.stringify(t);this.writeString(r)}};var CC=`var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// ../../../node_modules/dataloader/index.js
var require_dataloader = __commonJS({
  "../../../node_modules/dataloader/index.js"(exports, module) {
    "use strict";
    var DataLoader2 = /* @__PURE__ */ function() {
      function DataLoader3(batchLoadFn, options) {
        if (typeof batchLoadFn !== "function") {
          throw new TypeError("DataLoader must be constructed with a function which accepts " + ("Array<key> and returns Promise<Array<value>>, but got: " + batchLoadFn + "."));
        }
        this._batchLoadFn = batchLoadFn;
        this._maxBatchSize = getValidMaxBatchSize(options);
        this._batchScheduleFn = getValidBatchScheduleFn(options);
        this._cacheKeyFn = getValidCacheKeyFn(options);
        this._cacheMap = getValidCacheMap(options);
        this._batch = null;
        this.name = getValidName(options);
      }
      var _proto = DataLoader3.prototype;
      _proto.load = function load(key) {
        if (key === null || key === void 0) {
          throw new TypeError("The loader.load() function must be called with a value, " + ("but got: " + String(key) + "."));
        }
        var batch = getCurrentBatch(this);
        var cacheMap = this._cacheMap;
        var cacheKey = this._cacheKeyFn(key);
        if (cacheMap) {
          var cachedPromise = cacheMap.get(cacheKey);
          if (cachedPromise) {
            var cacheHits = batch.cacheHits || (batch.cacheHits = []);
            return new Promise(function(resolve) {
              cacheHits.push(function() {
                resolve(cachedPromise);
              });
            });
          }
        }
        batch.keys.push(key);
        var promise = new Promise(function(resolve, reject) {
          batch.callbacks.push({
            resolve,
            reject
          });
        });
        if (cacheMap) {
          cacheMap.set(cacheKey, promise);
        }
        return promise;
      };
      _proto.loadMany = function loadMany(keys) {
        if (!isArrayLike(keys)) {
          throw new TypeError("The loader.loadMany() function must be called with Array<key> " + ("but got: " + keys + "."));
        }
        var loadPromises = [];
        for (var i = 0; i < keys.length; i++) {
          loadPromises.push(this.load(keys[i])["catch"](function(error) {
            return error;
          }));
        }
        return Promise.all(loadPromises);
      };
      _proto.clear = function clear(key) {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          var cacheKey = this._cacheKeyFn(key);
          cacheMap["delete"](cacheKey);
        }
        return this;
      };
      _proto.clearAll = function clearAll() {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          cacheMap.clear();
        }
        return this;
      };
      _proto.prime = function prime(key, value) {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          var cacheKey = this._cacheKeyFn(key);
          if (cacheMap.get(cacheKey) === void 0) {
            var promise;
            if (value instanceof Error) {
              promise = Promise.reject(value);
              promise["catch"](function() {
              });
            } else {
              promise = Promise.resolve(value);
            }
            cacheMap.set(cacheKey, promise);
          }
        }
        return this;
      };
      return DataLoader3;
    }();
    var enqueuePostPromiseJob = typeof process === "object" && typeof process.nextTick === "function" ? function(fn) {
      if (!resolvedPromise) {
        resolvedPromise = Promise.resolve();
      }
      resolvedPromise.then(function() {
        process.nextTick(fn);
      });
    } : typeof setImmediate === "function" ? function(fn) {
      setImmediate(fn);
    } : function(fn) {
      setTimeout(fn);
    };
    var resolvedPromise;
    function getCurrentBatch(loader) {
      var existingBatch = loader._batch;
      if (existingBatch !== null && !existingBatch.hasDispatched && existingBatch.keys.length < loader._maxBatchSize) {
        return existingBatch;
      }
      var newBatch = {
        hasDispatched: false,
        keys: [],
        callbacks: []
      };
      loader._batch = newBatch;
      loader._batchScheduleFn(function() {
        dispatchBatch(loader, newBatch);
      });
      return newBatch;
    }
    function dispatchBatch(loader, batch) {
      batch.hasDispatched = true;
      if (batch.keys.length === 0) {
        resolveCacheHits(batch);
        return;
      }
      var batchPromise;
      try {
        batchPromise = loader._batchLoadFn(batch.keys);
      } catch (e) {
        return failedDispatch(loader, batch, new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function " + ("errored synchronously: " + String(e) + ".")));
      }
      if (!batchPromise || typeof batchPromise.then !== "function") {
        return failedDispatch(loader, batch, new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did " + ("not return a Promise: " + String(batchPromise) + ".")));
      }
      batchPromise.then(function(values) {
        if (!isArrayLike(values)) {
          throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did " + ("not return a Promise of an Array: " + String(values) + "."));
        }
        if (values.length !== batch.keys.length) {
          throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys." + ("\\n\\nKeys:\\n" + String(batch.keys)) + ("\\n\\nValues:\\n" + String(values)));
        }
        resolveCacheHits(batch);
        for (var i = 0; i < batch.callbacks.length; i++) {
          var value = values[i];
          if (value instanceof Error) {
            batch.callbacks[i].reject(value);
          } else {
            batch.callbacks[i].resolve(value);
          }
        }
      })["catch"](function(error) {
        failedDispatch(loader, batch, error);
      });
    }
    function failedDispatch(loader, batch, error) {
      resolveCacheHits(batch);
      for (var i = 0; i < batch.keys.length; i++) {
        loader.clear(batch.keys[i]);
        batch.callbacks[i].reject(error);
      }
    }
    function resolveCacheHits(batch) {
      if (batch.cacheHits) {
        for (var i = 0; i < batch.cacheHits.length; i++) {
          batch.cacheHits[i]();
        }
      }
    }
    function getValidMaxBatchSize(options) {
      var shouldBatch = !options || options.batch !== false;
      if (!shouldBatch) {
        return 1;
      }
      var maxBatchSize = options && options.maxBatchSize;
      if (maxBatchSize === void 0) {
        return Infinity;
      }
      if (typeof maxBatchSize !== "number" || maxBatchSize < 1) {
        throw new TypeError("maxBatchSize must be a positive number: " + maxBatchSize);
      }
      return maxBatchSize;
    }
    function getValidBatchScheduleFn(options) {
      var batchScheduleFn = options && options.batchScheduleFn;
      if (batchScheduleFn === void 0) {
        return enqueuePostPromiseJob;
      }
      if (typeof batchScheduleFn !== "function") {
        throw new TypeError("batchScheduleFn must be a function: " + batchScheduleFn);
      }
      return batchScheduleFn;
    }
    function getValidCacheKeyFn(options) {
      var cacheKeyFn = options && options.cacheKeyFn;
      if (cacheKeyFn === void 0) {
        return function(key) {
          return key;
        };
      }
      if (typeof cacheKeyFn !== "function") {
        throw new TypeError("cacheKeyFn must be a function: " + cacheKeyFn);
      }
      return cacheKeyFn;
    }
    function getValidCacheMap(options) {
      var shouldCache = !options || options.cache !== false;
      if (!shouldCache) {
        return null;
      }
      var cacheMap = options && options.cacheMap;
      if (cacheMap === void 0) {
        return /* @__PURE__ */ new Map();
      }
      if (cacheMap !== null) {
        var cacheFunctions = ["get", "set", "delete", "clear"];
        var missingFunctions = cacheFunctions.filter(function(fnName) {
          return cacheMap && typeof cacheMap[fnName] !== "function";
        });
        if (missingFunctions.length !== 0) {
          throw new TypeError("Custom cacheMap missing methods: " + missingFunctions.join(", "));
        }
      }
      return cacheMap;
    }
    function getValidName(options) {
      if (options && options.name) {
        return options.name;
      }
      return null;
    }
    function isArrayLike(x) {
      return typeof x === "object" && x !== null && typeof x.length === "number" && (x.length === 0 || x.length > 0 && Object.prototype.hasOwnProperty.call(x, x.length - 1));
    }
    module.exports = DataLoader2;
  }
});

// src/code-generation/components/cms/bundled/DatabaseCollection.ts?bundle
var import_dataloader = __toESM(require_dataloader());

// src/code-generation/components/cms/bundled/BufferReader.ts
var BYTE_LENGTH = {
  Uint8: 1,
  Uint16: 2,
  Uint32: 4,
  BigUint64: 8,
  Int8: 1,
  Int16: 2,
  Int32: 4,
  BigInt64: 8,
  Float32: 4,
  Float64: 8
};
var BufferReader = class {
  constructor(bytes) {
    this.bytes = bytes;
    __publicField(this, "offset", 0);
    __publicField(this, "view");
    __publicField(this, "decoder", new TextDecoder());
    this.view = getDataView(this.bytes);
  }
  getOffset() {
    return this.offset;
  }
  ensureLength(requiredBytes) {
    const oldLength = this.bytes.length;
    if (this.offset + requiredBytes <= oldLength) return;
    throw new Error("Reading out of bounds");
  }
  readUint8() {
    const size = BYTE_LENGTH.Uint8;
    this.ensureLength(size);
    const value = this.view.getUint8(this.offset);
    this.offset += size;
    return value;
  }
  readUint16() {
    const size = BYTE_LENGTH.Uint16;
    this.ensureLength(size);
    const value = this.view.getUint16(this.offset);
    this.offset += size;
    return value;
  }
  readUint32() {
    const size = BYTE_LENGTH.Uint32;
    this.ensureLength(size);
    const value = this.view.getUint32(this.offset);
    this.offset += size;
    return value;
  }
  readUint64() {
    const bigint = this.readBigUint64();
    return Number(bigint);
  }
  readBigUint64() {
    const size = BYTE_LENGTH.BigUint64;
    this.ensureLength(size);
    const value = this.view.getBigUint64(this.offset);
    this.offset += size;
    return value;
  }
  readInt8() {
    const size = BYTE_LENGTH.Int8;
    this.ensureLength(size);
    const value = this.view.getInt8(this.offset);
    this.offset += size;
    return value;
  }
  readInt16() {
    const size = BYTE_LENGTH.Int16;
    this.ensureLength(size);
    const value = this.view.getInt16(this.offset);
    this.offset += size;
    return value;
  }
  readInt32() {
    const size = BYTE_LENGTH.Int32;
    this.ensureLength(size);
    const value = this.view.getInt32(this.offset);
    this.offset += size;
    return value;
  }
  readInt64() {
    const bigint = this.readBigInt64();
    return Number(bigint);
  }
  readBigInt64() {
    const size = BYTE_LENGTH.BigInt64;
    this.ensureLength(size);
    const value = this.view.getBigInt64(this.offset);
    this.offset += size;
    return value;
  }
  readFloat32() {
    const size = BYTE_LENGTH.Float32;
    this.ensureLength(size);
    const value = this.view.getFloat32(this.offset);
    this.offset += size;
    return value;
  }
  readFloat64() {
    const size = BYTE_LENGTH.Float64;
    this.ensureLength(size);
    const value = this.view.getFloat64(this.offset);
    this.offset += size;
    return value;
  }
  readBytes(length) {
    const start = this.offset;
    const end = start + length;
    const value = this.bytes.subarray(start, end);
    this.offset = end;
    return value;
  }
  readString() {
    const length = this.readUint32();
    const bytes = this.readBytes(length);
    return this.decoder.decode(bytes);
  }
  readJson() {
    const string = this.readString();
    return JSON.parse(string);
  }
};
function getDataView(bytes) {
  return new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);
}

// src/code-generation/components/cms/bundled/DatabaseDictionaryIndex.ts
import { ControlType as ControlType2 } from "framer";

// ../../library/src/utils/utils.ts
var isWindow = typeof window !== "undefined";
var supportsRequestIdleCallback = isWindow && typeof window.requestIdleCallback === "function";

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}
function assertNever(condition) {
  throw new Error(\`Unexpected value: \${condition}\`);
}

// src/code-generation/components/cms/bundled/BufferWriter.ts
var INITIAL_BUFFER_SIZE = 1024;
var GROWTH_FACTOR = 1.5;
var maxUnsignedNumber = (bits) => 2 ** bits - 1;
var minSignedNumber = (bits) => -(2 ** (bits - 1));
var maxSignedNumber = (bits) => 2 ** (bits - 1) - 1;
var MIN_VALUE = {
  Uint8: 0,
  Uint16: 0,
  Uint32: 0,
  Uint64: 0,
  BigUint64: 0,
  Int8: minSignedNumber(8),
  Int16: minSignedNumber(16),
  Int32: minSignedNumber(32),
  Int64: Number.MIN_SAFE_INTEGER,
  BigInt64: -(BigInt(2) ** BigInt(63))
};
var MAX_VALUE = {
  Uint8: maxUnsignedNumber(8),
  Uint16: maxUnsignedNumber(16),
  Uint32: maxUnsignedNumber(32),
  Uint64: Number.MAX_SAFE_INTEGER,
  BigUint64: BigInt(2) ** BigInt(64) - BigInt(1),
  Int8: maxSignedNumber(8),
  Int16: maxSignedNumber(16),
  Int32: maxSignedNumber(32),
  Int64: Number.MAX_SAFE_INTEGER,
  BigInt64: BigInt(2) ** BigInt(63) - BigInt(1)
};
function assertRange(value, min, max, dataType) {
  assert(value >= min, value, "outside lower bound for", dataType);
  assert(value <= max, value, "outside upper bound for", dataType);
}
var BufferWriter = class {
  constructor() {
    __publicField(this, "offset", 0);
    __publicField(this, "bytes", new Uint8Array(INITIAL_BUFFER_SIZE));
    __publicField(this, "view", getDataView(this.bytes));
    __publicField(this, "encoder", new TextEncoder());
    __publicField(this, "encodedStrings", /* @__PURE__ */ new Map());
  }
  getOffset() {
    return this.offset;
  }
  slice(start = 0, end = this.offset) {
    return this.bytes.slice(start, end);
  }
  subarray(start = 0, end = this.offset) {
    return this.bytes.subarray(start, end);
  }
  ensureLength(requiredBytes) {
    const oldLength = this.bytes.length;
    if (this.offset + requiredBytes <= oldLength) return;
    const newLength = Math.ceil(oldLength * GROWTH_FACTOR) + requiredBytes;
    const newBytes = new Uint8Array(newLength);
    newBytes.set(this.bytes);
    this.bytes = newBytes;
    this.view = getDataView(newBytes);
  }
  writeUint8(value) {
    assertRange(value, MIN_VALUE.Uint8, MAX_VALUE.Uint8, "Uint8");
    const size = BYTE_LENGTH.Uint8;
    this.ensureLength(size);
    this.view.setUint8(this.offset, value);
    this.offset += size;
  }
  writeUint16(value) {
    assertRange(value, MIN_VALUE.Uint16, MAX_VALUE.Uint16, "Uint16");
    const size = BYTE_LENGTH.Uint16;
    this.ensureLength(size);
    this.view.setUint16(this.offset, value);
    this.offset += size;
  }
  writeUint32(value) {
    assertRange(value, MIN_VALUE.Uint32, MAX_VALUE.Uint32, "Uint32");
    const size = BYTE_LENGTH.Uint32;
    this.ensureLength(size);
    this.view.setUint32(this.offset, value);
    this.offset += size;
  }
  writeUint64(value) {
    assertRange(value, MIN_VALUE.Uint64, MAX_VALUE.Uint64, "Uint64");
    const bigint = BigInt(value);
    this.writeBigUint64(bigint);
  }
  writeBigUint64(value) {
    assertRange(value, MIN_VALUE.BigUint64, MAX_VALUE.BigUint64, "BigUint64");
    const size = BYTE_LENGTH.BigUint64;
    this.ensureLength(size);
    this.view.setBigUint64(this.offset, value);
    this.offset += size;
  }
  writeInt8(value) {
    assertRange(value, MIN_VALUE.Int8, MAX_VALUE.Int8, "Int8");
    const size = BYTE_LENGTH.Int8;
    this.ensureLength(size);
    this.view.setInt8(this.offset, value);
    this.offset += size;
  }
  writeInt16(value) {
    assertRange(value, MIN_VALUE.Int16, MAX_VALUE.Int16, "Int16");
    const size = BYTE_LENGTH.Int16;
    this.ensureLength(size);
    this.view.setInt16(this.offset, value);
    this.offset += size;
  }
  writeInt32(value) {
    assertRange(value, MIN_VALUE.Int32, MAX_VALUE.Int32, "Int32");
    const size = BYTE_LENGTH.Int32;
    this.ensureLength(size);
    this.view.setInt32(this.offset, value);
    this.offset += size;
  }
  writeInt64(value) {
    assertRange(value, MIN_VALUE.Int64, MAX_VALUE.Int64, "Int64");
    const bigint = BigInt(value);
    this.writeBigInt64(bigint);
  }
  writeBigInt64(value) {
    assertRange(value, MIN_VALUE.BigInt64, MAX_VALUE.BigInt64, "BigInt64");
    const size = BYTE_LENGTH.BigInt64;
    this.ensureLength(size);
    this.view.setBigInt64(this.offset, value);
    this.offset += size;
  }
  writeFloat32(value) {
    const size = BYTE_LENGTH.Float32;
    this.ensureLength(size);
    this.view.setFloat32(this.offset, value);
    this.offset += size;
  }
  writeFloat64(value) {
    const size = BYTE_LENGTH.Float64;
    this.ensureLength(size);
    this.view.setFloat64(this.offset, value);
    this.offset += size;
  }
  writeBytes(value) {
    const size = value.length;
    this.ensureLength(size);
    this.bytes.set(value, this.offset);
    this.offset += size;
  }
  encodeString(value) {
    const cached = this.encodedStrings.get(value);
    if (cached) return cached;
    const bytes = this.encoder.encode(value);
    this.encodedStrings.set(value, bytes);
    return bytes;
  }
  writeString(value) {
    const bytes = this.encodeString(value);
    const size = bytes.length;
    this.writeUint32(size);
    this.writeBytes(bytes);
  }
  writeJson(value) {
    const json = JSON.stringify(value);
    this.writeString(json);
  }
};

// src/utils/typeChecks.ts
function isString(value) {
  return typeof value === "string";
}
function isNumber(value) {
  return Number.isFinite(value);
}
function isNull(value) {
  return value === null;
}

// src/code-generation/components/cms/bundled/models/DatabaseItemPointerModel.ts
var DatabaseItemPointerModel = class _DatabaseItemPointerModel {
  constructor(chunkId, offset, length) {
    this.chunkId = chunkId;
    this.offset = offset;
    this.length = length;
  }
  static fromString(value) {
    const [chunkId, offset, length] = value.split("/").map(Number);
    assert(isNumber(chunkId), "Invalid chunkId");
    assert(isNumber(offset), "Invalid offset");
    assert(isNumber(length), "Invalid length");
    return new _DatabaseItemPointerModel(chunkId, offset, length);
  }
  toString() {
    return \`\${this.chunkId}/\${this.offset}/\${this.length}\`;
  }
  static read(reader) {
    const chunkId = reader.readUint16();
    const offset = reader.readUint32();
    const length = reader.readUint32();
    return new _DatabaseItemPointerModel(chunkId, offset, length);
  }
  write(writer) {
    writer.writeUint16(this.chunkId);
    writer.writeUint32(this.offset);
    writer.writeUint32(this.length);
  }
  compare(other) {
    if (this.chunkId < other.chunkId) return -1;
    if (this.chunkId > other.chunkId) return 1;
    if (this.offset < other.offset) return -1;
    if (this.offset > other.offset) return 1;
    assert(this.length === other.length);
    return 0;
  }
};

// src/code-generation/components/cms/bundled/models/DatabaseValueModel.ts
import { ControlType } from "framer";
function getValueType(value) {
  if (isNull(value)) {
    return 0 /* Null */;
  }
  switch (value.type) {
    case ControlType.Array:
      return 1 /* Array */;
    case ControlType.Boolean:
      return 2 /* Boolean */;
    case ControlType.Color:
      return 3 /* Color */;
    case ControlType.Date:
      return 4 /* Date */;
    case ControlType.Enum:
      return 5 /* Enum */;
    case ControlType.File:
      return 6 /* File */;
    case ControlType.ResponsiveImage:
      return 10 /* ResponsiveImage */;
    case ControlType.Link:
      return 7 /* Link */;
    case ControlType.Number:
      return 8 /* Number */;
    case ControlType.Object:
      return 9 /* Object */;
    case ControlType.RichText:
      return 11 /* RichText */;
    case ControlType.String:
      return 12 /* String */;
    case ControlType.VectorSetItem:
      return 13 /* VectorSetItem */;
    default:
      assertNever(value);
  }
}
var DatabaseValueModel;
((DatabaseValueModel2) => {
  function read(reader) {
    const type = reader.readUint8();
    switch (type) {
      case 0 /* Null */:
        return null;
      case 1 /* Array */:
        return readArray(reader);
      case 2 /* Boolean */:
        return readBoolean(reader);
      case 3 /* Color */:
        return readColor(reader);
      case 4 /* Date */:
        return readDate(reader);
      case 5 /* Enum */:
        return readEnum(reader);
      case 6 /* File */:
        return readFile(reader);
      case 7 /* Link */:
        return readLink(reader);
      case 8 /* Number */:
        return readNumber(reader);
      case 9 /* Object */:
        return readObject(reader);
      case 10 /* ResponsiveImage */:
        return readResponsiveImage(reader);
      case 11 /* RichText */:
        return readRichText(reader);
      case 12 /* String */:
        return readString(reader);
      case 13 /* VectorSetItem */:
        return readVectorSetItem(reader);
      default:
        assertNever(type);
    }
  }
  DatabaseValueModel2.read = read;
  function write(writer, value) {
    const type = getValueType(value);
    writer.writeUint8(type);
    if (isNull(value)) return;
    switch (value.type) {
      case ControlType.Array:
        return writeArray(writer, value);
      case ControlType.Boolean:
        return writeBoolean(writer, value);
      case ControlType.Color:
        return writeColor(writer, value);
      case ControlType.Date:
        return writeDate(writer, value);
      case ControlType.Enum:
        return writeEnum(writer, value);
      case ControlType.File:
        return writeFile(writer, value);
      case ControlType.Link:
        return writeLink(writer, value);
      case ControlType.Number:
        return writeNumber(writer, value);
      case ControlType.Object:
        return writeObject(writer, value);
      case ControlType.ResponsiveImage:
        return writeResponsiveImage(writer, value);
      case ControlType.RichText:
        return writeRichText(writer, value);
      case ControlType.VectorSetItem:
        return writeVectorSetItem(writer, value);
      case ControlType.String:
        return writeString(writer, value);
      default:
        assertNever(value);
    }
  }
  DatabaseValueModel2.write = write;
  function compare(left, right, collation) {
    const leftType = getValueType(left);
    const rightType = getValueType(right);
    if (leftType < rightType) return -1;
    if (leftType > rightType) return 1;
    if (isNull(left) || isNull(right)) return 0;
    switch (left.type) {
      case ControlType.Array:
        assert(right.type === ControlType.Array);
        return compareArray(left, right, collation);
      case ControlType.Boolean:
        assert(right.type === ControlType.Boolean);
        return compareBoolean(left, right);
      case ControlType.Color:
        assert(right.type === ControlType.Color);
        return compareColor(left, right);
      case ControlType.Date:
        assert(right.type === ControlType.Date);
        return compareDate(left, right);
      case ControlType.Enum:
        assert(right.type === ControlType.Enum);
        return compareEnum(left, right);
      case ControlType.File:
        assert(right.type === ControlType.File);
        return compareFile(left, right);
      case ControlType.Link:
        assert(right.type === ControlType.Link);
        return compareLink(left, right);
      case ControlType.Number:
        assert(right.type === ControlType.Number);
        return compareNumber(left, right);
      case ControlType.Object:
        assert(right.type === ControlType.Object);
        return compareObject(left, right, collation);
      case ControlType.ResponsiveImage:
        assert(right.type === ControlType.ResponsiveImage);
        return compareResponsiveImage(left, right);
      case ControlType.RichText:
        assert(right.type === ControlType.RichText);
        return compareRichText(left, right);
      case ControlType.VectorSetItem:
        assert(right.type === ControlType.VectorSetItem);
        return compareVectorSetItem(left, right);
      case ControlType.String:
        assert(right.type === ControlType.String);
        return compareString(left, right, collation);
      default:
        assertNever(left);
    }
  }
  DatabaseValueModel2.compare = compare;
})(DatabaseValueModel || (DatabaseValueModel = {}));
function readArray(reader) {
  const length = reader.readUint16();
  const value = [];
  for (let i = 0; i < length; i++) {
    const item = DatabaseValueModel.read(reader);
    value.push(item);
  }
  return {
    type: ControlType.Array,
    value
  };
}
function writeArray(writer, value) {
  writer.writeUint16(value.value.length);
  for (const item of value.value) {
    DatabaseValueModel.write(writer, item);
  }
}
function compareArray(left, right, collation) {
  const leftLength = left.value.length;
  const rightLength = right.value.length;
  if (leftLength < rightLength) return -1;
  if (leftLength > rightLength) return 1;
  for (let i = 0; i < leftLength; i++) {
    const leftItem = left.value[i];
    const rightItem = right.value[i];
    const result = DatabaseValueModel.compare(leftItem, rightItem, collation);
    if (result !== 0) return result;
  }
  return 0;
}
function readBoolean(reader) {
  return {
    type: ControlType.Boolean,
    value: reader.readUint8() !== 0
  };
}
function writeBoolean(writer, value) {
  writer.writeUint8(value.value ? 1 : 0);
}
function compareBoolean(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readColor(reader) {
  return {
    type: ControlType.Color,
    value: reader.readString()
  };
}
function writeColor(writer, value) {
  writer.writeString(value.value);
}
function compareColor(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readDate(reader) {
  const timestamp = reader.readInt64();
  const date = new Date(timestamp);
  return {
    type: ControlType.Date,
    value: date.toISOString()
  };
}
function writeDate(writer, value) {
  const date = new Date(value.value);
  const timestamp = date.getTime();
  writer.writeInt64(timestamp);
}
function compareDate(left, right) {
  const leftDate = new Date(left.value);
  const rightDate = new Date(right.value);
  if (leftDate < rightDate) return -1;
  if (leftDate > rightDate) return 1;
  return 0;
}
function readEnum(reader) {
  return {
    type: ControlType.Enum,
    value: reader.readString()
  };
}
function writeEnum(writer, value) {
  writer.writeString(value.value);
}
function compareEnum(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readFile(reader) {
  return {
    type: ControlType.File,
    value: reader.readString()
  };
}
function writeFile(writer, value) {
  writer.writeString(value.value);
}
function compareFile(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readLink(reader) {
  return {
    type: ControlType.Link,
    value: reader.readJson()
  };
}
function writeLink(writer, value) {
  writer.writeJson(value.value);
}
function compareLink(left, right) {
  const leftEncoded = JSON.stringify(left.value);
  const rightEncoded = JSON.stringify(right.value);
  if (leftEncoded < rightEncoded) return -1;
  if (leftEncoded > rightEncoded) return 1;
  return 0;
}
function readNumber(reader) {
  return {
    type: ControlType.Number,
    value: reader.readFloat64()
  };
}
function writeNumber(writer, value) {
  writer.writeFloat64(value.value);
}
function compareNumber(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readObject(reader) {
  const length = reader.readUint16();
  const result = {};
  for (let i = 0; i < length; i++) {
    const key = reader.readString();
    result[key] = DatabaseValueModel.read(reader);
  }
  return {
    type: ControlType.Object,
    value: result
  };
}
function writeObject(writer, value) {
  const entries = Object.entries(value.value);
  writer.writeUint16(entries.length);
  for (const [key, item] of entries) {
    writer.writeString(key);
    DatabaseValueModel.write(writer, item);
  }
}
function compareObject(left, right, collation) {
  const leftKeys = Object.keys(left.value).sort();
  const rightKeys = Object.keys(right.value).sort();
  if (leftKeys.length < rightKeys.length) return -1;
  if (leftKeys.length > rightKeys.length) return 1;
  for (let i = 0; i < leftKeys.length; i++) {
    const leftKey = leftKeys[i];
    const rightKey = rightKeys[i];
    if (leftKey < rightKey) return -1;
    if (leftKey > rightKey) return 1;
    const leftValue = left.value[leftKey] ?? null;
    const rightValue = right.value[rightKey] ?? null;
    const result = DatabaseValueModel.compare(leftValue, rightValue, collation);
    if (result !== 0) return result;
  }
  return 0;
}
function readResponsiveImage(reader) {
  return {
    type: ControlType.ResponsiveImage,
    value: reader.readJson()
  };
}
function writeResponsiveImage(writer, value) {
  writer.writeJson(value.value);
}
function compareResponsiveImage(left, right) {
  const leftEncoded = JSON.stringify(left.value);
  const rightEncoded = JSON.stringify(right.value);
  if (leftEncoded < rightEncoded) return -1;
  if (leftEncoded > rightEncoded) return 1;
  return 0;
}
function readRichText(reader) {
  const type = reader.readInt8();
  if (type === 0) {
    return {
      type: ControlType.RichText,
      value: reader.readUint32()
    };
  }
  if (type === 1) {
    return {
      type: ControlType.RichText,
      value: reader.readString()
    };
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function writeRichText(writer, value) {
  if (isNumber(value.value)) {
    writer.writeInt8(0);
    writer.writeUint32(value.value);
    return;
  }
  if (isString(value.value)) {
    writer.writeInt8(1);
    writer.writeString(value.value);
    return;
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function compareRichText(left, right) {
  const leftValue = left.value;
  const rightValue = right.value;
  if (isNumber(leftValue) && isNumber(rightValue)) {
    if (leftValue < rightValue) return -1;
    if (leftValue > rightValue) return 1;
    return 0;
  }
  if (isString(leftValue) && isString(rightValue)) {
    if (leftValue < rightValue) return -1;
    if (leftValue > rightValue) return 1;
    return 0;
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function readString(reader) {
  return {
    type: ControlType.String,
    value: reader.readString()
  };
}
function writeString(writer, value) {
  writer.writeString(value.value);
}
function compareString(left, right, collation) {
  let leftValue = left.value;
  let rightValue = right.value;
  if (collation.type === 0 /* CaseInsensitive */) {
    leftValue = left.value.toLowerCase();
    rightValue = right.value.toLowerCase();
  }
  if (leftValue < rightValue) return -1;
  if (leftValue > rightValue) return 1;
  return 0;
}
function readVectorSetItem(reader) {
  return {
    type: ControlType.VectorSetItem,
    value: reader.readUint32()
  };
}
function writeVectorSetItem(writer, value) {
  writer.writeUint32(value.value);
}
function compareVectorSetItem(left, right) {
  const leftValue = left.value;
  const rightValue = right.value;
  if (leftValue < rightValue) return -1;
  if (leftValue > rightValue) return 1;
  return 0;
}

// src/code-generation/components/cms/bundled/models/DatabaseDictionaryIndexModel.ts
var DatabaseDictionaryIndexModel = class _DatabaseDictionaryIndexModel {
  constructor(fieldNames, options) {
    this.fieldNames = fieldNames;
    this.options = options;
    __publicField(this, "entries", []);
  }
  sortEntries() {
    this.entries.sort((left, right) => {
      for (let i = 0; i < this.fieldNames.length; i++) {
        const leftValue = left.values[i];
        const rightValue = right.values[i];
        const result = DatabaseValueModel.compare(leftValue, rightValue, this.options.collation);
        if (result !== 0) return result;
      }
      return left.pointer.compare(right.pointer);
    });
  }
  static deserialize(bytes) {
    const reader = new BufferReader(bytes);
    const collation = reader.readJson();
    const fieldCount = reader.readUint8();
    const fieldNames = [];
    for (let i = 0; i < fieldCount; i++) {
      const fieldName = reader.readString();
      fieldNames.push(fieldName);
    }
    const index = new _DatabaseDictionaryIndexModel(fieldNames, {
      collation
    });
    const entryCount = reader.readUint32();
    for (let i = 0; i < entryCount; i++) {
      const values = [];
      for (let j = 0; j < fieldCount; j++) {
        const fieldValue = DatabaseValueModel.read(reader);
        values.push(fieldValue);
      }
      const pointer = DatabaseItemPointerModel.read(reader);
      index.entries.push({ values, pointer });
    }
    return index;
  }
  serialize() {
    const writer = new BufferWriter();
    writer.writeJson(this.options.collation);
    writer.writeUint8(this.fieldNames.length);
    for (const fieldName of this.fieldNames) {
      writer.writeString(fieldName);
    }
    this.sortEntries();
    writer.writeUint32(this.entries.length);
    for (const entry of this.entries) {
      const { values, pointer } = entry;
      for (const value of values) {
        DatabaseValueModel.write(writer, value);
      }
      pointer.write(writer);
    }
    return writer.subarray();
  }
  addItem(item, pointer) {
    const values = this.fieldNames.map((fieldName) => {
      return item.getField(fieldName) ?? null;
    });
    this.entries.push({ values, pointer });
  }
};

// src/code-generation/components/cms/bundled/fetchWithRetries.ts
var maxRetries = 3;
var baseDelay = 250;
var retriableHTTPCodes = [
  408,
  // Request Timeout
  429,
  // Too Many Requests
  500,
  // Internal Server Error
  502,
  // Bad Gateway
  503,
  // Service Unavailable
  504
  // Gateway Timeout
];
var fetchWithRetries = async (input, init) => {
  let retryCount = 0;
  while (true) {
    try {
      const res = await fetch(input, init);
      if (!retriableHTTPCodes.includes(res.status) || ++retryCount > maxRetries) {
        return res;
      }
    } catch (error) {
      if (init?.signal?.aborted || ++retryCount > maxRetries) {
        throw error;
      }
    }
    await retryDelay(retryCount);
  }
};
async function retryDelay(retryCount) {
  const backoffExponent = retryCount - 1;
  const jitter = Math.random() + 1;
  const timeout = Math.floor(baseDelay * jitter * 2 ** backoffExponent);
  await new Promise((resolve) => {
    setTimeout(resolve, timeout);
  });
}

// src/code-generation/components/cms/bundled/rangeRequest.ts
async function rangeRequest(url, ranges) {
  const collapsedRanges = collapseRanges(ranges);
  const rangeStrings = [];
  let expectedLength = 0;
  for (const range of collapsedRanges) {
    rangeStrings.push(\`\${range.from}-\${range.to - 1}\`);
    expectedLength += range.to - range.from;
  }
  const rangeUrl = new URL(url);
  const rangeQuery = rangeStrings.join(",");
  rangeUrl.searchParams.set("range", rangeQuery);
  const response = await fetchWithRetries(rangeUrl);
  if (response.status !== 200) {
    throw new Error(\`Request failed: \${response.status} \${response.statusText}\`);
  }
  const buffer = await response.arrayBuffer();
  const bytes = new Uint8Array(buffer);
  if (bytes.length !== expectedLength) {
    throw new Error("Request failed: Unexpected response length");
  }
  const file = new PartialFile();
  let start = 0;
  for (const range of collapsedRanges) {
    const length = range.to - range.from;
    const end = start + length;
    const part = bytes.subarray(start, end);
    file.write(range.from, part);
    start = end;
  }
  return ranges.map((range) => {
    return file.read(range.from, range.to - range.from);
  });
}
var PartialFile = class {
  constructor() {
    __publicField(this, "chunks", []);
  }
  read(position, length) {
    for (const chunk of this.chunks) {
      if (position < chunk.start) {
        throw new Error("Missing data");
      }
      if (position > chunk.end) {
        continue;
      }
      if (position + length > chunk.end) {
        throw new Error("Missing data");
      }
      const from = position - chunk.start;
      const to = from + length;
      return chunk.data.slice(from, to);
    }
    throw new Error("Missing data");
  }
  write(position, data) {
    let start = position;
    let end = start + data.length;
    let fromIndex = 0;
    let toIndex = this.chunks.length;
    for (; fromIndex < toIndex; fromIndex++) {
      const chunk2 = this.chunks[fromIndex];
      assert(chunk2, "Missing chunk");
      if (start > chunk2.end) {
        continue;
      }
      if (start > chunk2.start) {
        const offset = start - chunk2.start;
        const prefix = chunk2.data.subarray(0, offset);
        data = join(prefix, data);
        start = chunk2.start;
      }
      break;
    }
    for (; toIndex > fromIndex; toIndex--) {
      const chunk2 = this.chunks[toIndex - 1];
      assert(chunk2, "Missing chunk");
      if (end < chunk2.start) {
        continue;
      }
      if (end < chunk2.end) {
        const offset = end - chunk2.start;
        const suffix = chunk2.data.subarray(offset);
        data = join(data, suffix);
        end = chunk2.end;
      }
      break;
    }
    const chunk = {
      start,
      end,
      data
    };
    const deleteCount = toIndex - fromIndex;
    this.chunks.splice(fromIndex, deleteCount, chunk);
  }
};
function join(left, right) {
  const length = left.length + right.length;
  const result = new Uint8Array(length);
  result.set(left, 0);
  result.set(right, left.length);
  return result;
}
function collapseRanges(ranges) {
  assert(ranges.length > 0, "Must have at least one range");
  const sorted = [...ranges].sort((a, b) => a.from - b.from);
  const collapsed = [];
  for (const range of sorted) {
    const index = collapsed.length - 1;
    const previous = collapsed[index];
    if (previous && range.from <= previous.to) {
      collapsed[index] = {
        from: previous.from,
        to: Math.max(previous.to, range.to)
      };
    } else {
      collapsed.push(range);
    }
  }
  return collapsed;
}

// src/code-generation/components/cms/bundled/DatabaseDictionaryIndex.ts
var DatabaseDictionaryIndex = class {
  constructor(options) {
    this.options = options;
    __publicField(this, "schema");
    __publicField(this, "fields");
    __publicField(this, "supportedLookupTypes", [
      "All" /* All */,
      "Equals" /* Equals */,
      "NotEquals" /* NotEquals */,
      "LessThan" /* LessThan */,
      "GreaterThan" /* GreaterThan */,
      "Contains" /* Contains */,
      "StartsWith" /* StartsWith */,
      "EndsWith" /* EndsWith */
    ]);
    __publicField(this, "modelPromise");
    __publicField(this, "model");
    __publicField(this, "collation");
    const schema = {};
    const fields = [];
    for (const fieldName of this.options.fieldNames) {
      const definition = this.options.collectionSchema[fieldName];
      assert(definition, "Missing definition for field", fieldName);
      schema[fieldName] = definition;
      fields.push({ type: "Identifier", name: fieldName });
    }
    this.schema = schema;
    this.fields = fields;
    this.collation = this.options.collation;
  }
  async loadModel() {
    const [bytes] = await rangeRequest(this.options.url, [this.options.range]);
    assert(bytes, "Failed to load model");
    return DatabaseDictionaryIndexModel.deserialize(bytes);
  }
  async getModel() {
    this.modelPromise ??= this.loadModel();
    this.model ??= await this.modelPromise;
    return this.model;
  }
  async lookupItems(queries) {
    assert(queries.length === this.fields.length, "Invalid query length");
    const model = await this.getModel();
    const chunks = queries.reduce(
      (memo, query, position) => memo.flatMap((entries) => {
        switch (query.type) {
          case "All" /* All */:
            return [entries];
          case "Equals" /* Equals */:
            return this.queryEquals(entries, query, position);
          case "NotEquals" /* NotEquals */:
            return this.queryNotEquals(entries, query, position);
          case "LessThan" /* LessThan */:
            return this.queryLessThan(entries, query, position);
          case "GreaterThan" /* GreaterThan */:
            return this.queryGreaterThan(entries, query, position);
          case "Contains" /* Contains */:
            return this.queryContains(entries, query, position);
          case "StartsWith" /* StartsWith */:
            return this.queryStartsWith(entries, query, position);
          case "EndsWith" /* EndsWith */:
            return this.queryEndsWith(entries, query, position);
          default:
            assertNever(query);
        }
      }),
      [model.entries]
    );
    const result = [];
    for (const entries of chunks) {
      for (const entry of entries) {
        const data = {};
        for (let i = 0; i < this.options.fieldNames.length; i++) {
          const fieldName = this.options.fieldNames[i];
          const fieldValue = entry.values[i];
          data[fieldName] = fieldValue;
        }
        result.push({ pointer: entry.pointer.toString(), data });
      }
    }
    return result;
  }
  queryEquals(entries, query, position) {
    const leftMost = this.getLeftMost(entries, position, query.value);
    const rightMost = this.getRightMost(entries, position, query.value);
    const slice = entries.slice(leftMost, rightMost + 1);
    return slice.length > 0 ? [slice] : [];
  }
  queryNotEquals(entries, query, position) {
    const leftMost = this.getLeftMost(entries, position, query.value);
    const rightMost = this.getRightMost(entries, position, query.value);
    const result = [];
    const before = entries.slice(0, leftMost);
    if (before.length > 0) result.push(before);
    const after = entries.slice(rightMost + 1);
    if (after.length > 0) result.push(after);
    return result;
  }
  queryLessThan(entries, query, position) {
    const nullBound = this.getRightMost(entries, position, null);
    entries = entries.slice(nullBound + 1);
    if (query.inclusive) {
      const rightMost = this.getRightMost(entries, position, query.value);
      const slice2 = entries.slice(0, rightMost + 1);
      return slice2.length > 0 ? [slice2] : [];
    }
    const leftMost = this.getLeftMost(entries, position, query.value);
    const slice = entries.slice(0, leftMost);
    return slice.length > 0 ? [slice] : [];
  }
  queryGreaterThan(entries, query, position) {
    const nullBound = this.getRightMost(entries, position, null);
    entries = entries.slice(nullBound + 1);
    if (query.inclusive) {
      const leftMost = this.getLeftMost(entries, position, query.value);
      const slice2 = entries.slice(leftMost);
      return slice2.length > 0 ? [slice2] : [];
    }
    const rightMost = this.getRightMost(entries, position, query.value);
    const slice = entries.slice(rightMost + 1);
    return slice.length > 0 ? [slice] : [];
  }
  queryContains(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.includes(target);
    });
  }
  queryStartsWith(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.startsWith(target);
    });
  }
  queryEndsWith(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.endsWith(target);
    });
  }
  /**
   * Returns the index of the left most entry that is equal to the target.
   *
   * \`\`\`text
   *   Left most
   *       \u2193
   * \u250C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2510
   * \u2502 1 \u2502 2 \u2502 2 \u2502 2 \u2502 2 \u2502 3 \u2502
   * \u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518
   * \`\`\`
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param target The target value to search for.
   * @returns The index of the left most entry that is equal to the target.
   */
  getLeftMost(entries, position, target) {
    let left = 0;
    let right = entries.length;
    while (left < right) {
      const middle = left + right >> 1;
      const entry = entries[middle];
      const value = entry.values[position];
      if (DatabaseValueModel.compare(value, target, this.collation) < 0) {
        left = middle + 1;
      } else {
        right = middle;
      }
    }
    return left;
  }
  /**
   * Returns the index of the right most entry that is equal to the target.
   *
   * \`\`\`text
   *              Right most
   *                   \u2193
   * \u250C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2510
   * \u2502 1 \u2502 2 \u2502 2 \u2502 2 \u2502 2 \u2502 3 \u2502
   * \u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518
   * \`\`\`
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param target The target value to search for.
   * @returns The index of the right most entry that is equal to the target.
   */
  getRightMost(entries, position, target) {
    let left = 0;
    let right = entries.length;
    while (left < right) {
      const middle = left + right >> 1;
      const entry = entries[middle];
      const value = entry.values[position];
      if (DatabaseValueModel.compare(value, target, this.collation) > 0) {
        right = middle;
      } else {
        left = middle + 1;
      }
    }
    return right - 1;
  }
  /**
   * Finds all items that are matching the predicate and groups adjacent items together.
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param predicate The predicate to match the values against.
   * @returns An array of chunks that match the predicate.
   */
  findItems(entries, position, predicate) {
    const result = [];
    let start = 0;
    for (let i = 0; i < entries.length; i++) {
      const entry = entries[i];
      const value = entry.values[position];
      const isMatching = predicate(value);
      if (isMatching) continue;
      if (start < i) {
        const slice = entries.slice(start, i);
        result.push(slice);
      }
      start = i + 1;
    }
    if (start < entries.length) {
      const slice = entries.slice(start);
      result.push(slice);
    }
    return result;
  }
};

// src/code-generation/components/cms/bundled/models/DatabaseItemModel.ts
var DatabaseItemModel = class _DatabaseItemModel {
  constructor() {
    __publicField(this, "fields", /* @__PURE__ */ new Map());
  }
  static read(reader) {
    const item = new _DatabaseItemModel();
    const fieldCount = reader.readUint16();
    for (let i = 0; i < fieldCount; i++) {
      const key = reader.readString();
      const value = DatabaseValueModel.read(reader);
      item.setField(key, value);
    }
    return item;
  }
  write(writer) {
    writer.writeUint16(this.fields.size);
    for (const [key, value] of this.fields) {
      writer.writeString(key);
      DatabaseValueModel.write(writer, value);
    }
  }
  getData() {
    const data = {};
    for (const [key, value] of this.fields) {
      data[key] = value;
    }
    return data;
  }
  setField(key, value) {
    this.fields.set(key, value);
  }
  getField(key) {
    return this.fields.get(key);
  }
};

// src/code-generation/components/cms/bundled/DatabaseCollection.ts?bundle
var DatabaseChunk = class {
  constructor(id, url) {
    this.id = id;
    this.url = url;
    __publicField(this, "itemsPromise");
    __publicField(this, "itemLoader", new import_dataloader.default(async (pointers) => {
      const ranges = pointers.map((pointer) => {
        const pointerModel = DatabaseItemPointerModel.fromString(pointer);
        return { from: pointerModel.offset, to: pointerModel.offset + pointerModel.length };
      });
      const rangeBytes = await rangeRequest(this.url, ranges);
      return rangeBytes.map((bytes, index) => {
        const reader = new BufferReader(bytes);
        const itemModel = DatabaseItemModel.read(reader);
        const pointer = pointers[index];
        assert(pointer, "Missing pointer");
        return {
          pointer,
          data: itemModel.getData()
        };
      });
    }));
  }
  scanItems() {
    this.itemsPromise ??= fetchWithRetries(this.url).then(async (response) => {
      if (!response.ok) {
        throw new Error(\`Request failed: \${response.status} \${response.statusText}\`);
      }
      const buffer = await response.arrayBuffer();
      const bytes = new Uint8Array(buffer);
      const reader = new BufferReader(bytes);
      const items = [];
      const itemCount = reader.readUint32();
      for (let i = 0; i < itemCount; i++) {
        const offset = reader.getOffset();
        const itemModel = DatabaseItemModel.read(reader);
        const length = reader.getOffset() - offset;
        const pointerModel = new DatabaseItemPointerModel(this.id, offset, length);
        const pointer = pointerModel.toString();
        const item = {
          pointer,
          data: itemModel.getData()
        };
        this.itemLoader.prime(pointer, item);
        items.push(item);
      }
      return items;
    });
    return this.itemsPromise;
  }
  resolveItem(pointer) {
    return this.itemLoader.load(pointer);
  }
};
var DatabaseCollection = class {
  constructor(options) {
    this.options = options;
    __publicField(this, "schema");
    __publicField(this, "indexes");
    __publicField(this, "resolveRichText");
    __publicField(this, "resolveVectorSetItem");
    __publicField(this, "chunks");
    this.chunks = this.options.chunks.map((url, id) => {
      return new DatabaseChunk(id, url);
    });
    this.schema = options.schema;
    this.indexes = options.indexes;
    this.resolveRichText = options.resolveRichText;
    this.resolveVectorSetItem = options.resolveVectorSetItem;
  }
  async scanItems() {
    const chunkedItems = await Promise.all(
      this.chunks.map(async (chunk) => {
        return chunk.scanItems();
      })
    );
    return chunkedItems.flat();
  }
  async resolveItems(pointers) {
    return Promise.all(
      pointers.map((pointer) => {
        const pointerModel = DatabaseItemPointerModel.fromString(pointer);
        const chunk = this.chunks[pointerModel.chunkId];
        assert(chunk, "Missing chunk");
        return chunk.resolveItem(pointer);
      })
    );
  }
  compareItems(left, right) {
    const leftModel = DatabaseItemPointerModel.fromString(left.pointer);
    const rightModel = DatabaseItemPointerModel.fromString(right.pointer);
    return leftModel.compare(rightModel);
  }
  compareValues(left, right, collation) {
    return DatabaseValueModel.compare(left, right, collation);
  }
};
export {
  DatabaseCollection,
  DatabaseDictionaryIndex
};
`;var bC=`var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/code-generation/components/cms/bundled/DraftDatabaseCollection.ts?bundle
import { ControlType } from "framer";

// src/utils/typeChecks.ts
function isString(value) {
  return typeof value === "string";
}
function isNumber(value) {
  return Number.isFinite(value);
}

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}

// src/code-generation/components/cms/bundled/DraftDatabaseCollection.ts?bundle
var DraftDatabaseCollection = class {
  constructor(draftCollection, originalCollection, previousItemId, nextItemId) {
    this.draftCollection = draftCollection;
    this.originalCollection = originalCollection;
    this.previousItemId = previousItemId;
    this.nextItemId = nextItemId;
    __publicField(this, "schema");
    // We cannot use the original indexes because the draft items
    // are not in the original collection.
    // Having no indexes means that we perform a full collection scan for every query.
    __publicField(this, "indexes", []);
    __publicField(this, "itemsPromise");
    this.schema = originalCollection.schema;
    this.itemsPromise = this.getItems();
  }
  async getItems() {
    const [[...draftItems], [...originalItems]] = await Promise.all([
      this.draftCollection.scanItems(),
      this.originalCollection.scanItems()
    ]);
    const lastDraftItem = draftItems.pop();
    const firstOriginalItem = originalItems.shift();
    if (lastDraftItem) {
      draftItems.push({
        ...lastDraftItem,
        data: {
          ...lastDraftItem.data,
          [this.nextItemId]: firstOriginalItem?.data.id ?? null
        }
      });
    }
    if (firstOriginalItem) {
      originalItems.unshift({
        ...firstOriginalItem,
        data: {
          ...firstOriginalItem.data,
          [this.previousItemId]: lastDraftItem?.data.id ?? null
        }
      });
    }
    return draftItems.map(draftItem).concat(...originalItems);
  }
  /**
   * Get all items, updating pointers for draft items.
   */
  async scanItems() {
    return this.itemsPromise;
  }
  /**
   * Depending on the pointer, resolve draft rich text from the draft
   * collection, and original rich text from the original collection.
   */
  async resolveRichText(pointer) {
    if (isDraftRichTextPointer(pointer)) {
      const originalPointer = undraftRichTextPointer(pointer);
      return this.draftCollection.resolveRichText(originalPointer);
    }
    return this.originalCollection.resolveRichText(pointer);
  }
  async resolveVectorSetItem(pointer) {
    if (isDraftVectorSetItemPointer(pointer)) {
      const originalPointer = undraftVectorSetItemPointer(pointer);
      return this.draftCollection.resolveVectorSetItem?.(originalPointer);
    }
    return this.originalCollection.resolveVectorSetItem?.(pointer);
  }
  async resolveItems(pointers) {
    const items = await this.itemsPromise;
    return pointers.map((pointer) => {
      const item = items.find((current) => current.pointer === pointer);
      assert(item, "Item must exist");
      return item;
    });
  }
  /**
   * Compare two items, the draft items should come first.
   */
  compareItems(left, right) {
    const leftIsDraft = isDraftPointer(left.pointer);
    const rightIsDraft = isDraftPointer(right.pointer);
    if (leftIsDraft && rightIsDraft) {
      const originalLeft = undraftItem(left);
      const originalRight = undraftItem(right);
      return this.draftCollection.compareItems(originalLeft, originalRight);
    }
    if (leftIsDraft) return -1;
    if (rightIsDraft) return 1;
    return this.originalCollection.compareItems(left, right);
  }
};
var draftPrefix = "draft:";
function isDraftPointer(pointer) {
  return pointer.startsWith(draftPrefix);
}
function draftPointer(pointer) {
  assert(!isDraftPointer(pointer), "Should be a non-draft pointer");
  return draftPrefix + pointer;
}
function undraftPointer(pointer) {
  assert(isDraftPointer(pointer), "Should be a draft pointer");
  return pointer.slice(draftPrefix.length);
}
function isDraftRichTextPointer(pointer) {
  if (isNumber(pointer)) {
    return pointer < 0;
  }
  if (isString(pointer)) {
    return pointer.startsWith(draftPrefix);
  }
  throw new Error("Invalid rich text pointer");
}
function draftRichTextPointer(pointer) {
  assert(!isDraftRichTextPointer(pointer), "Should be a non-draft rich text pointer");
  if (isNumber(pointer)) {
    return -pointer - 1;
  }
  if (isString(pointer)) {
    return draftPrefix + pointer;
  }
  throw new Error("Invalid rich text pointer");
}
function undraftRichTextPointer(pointer) {
  assert(isDraftRichTextPointer(pointer), "Should be a draft rich text pointer");
  if (isNumber(pointer)) {
    return -pointer - 1;
  }
  if (isString(pointer)) {
    return pointer.slice(draftPrefix.length);
  }
  throw new Error("Invalid rich text pointer");
}
function isDraftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  return pointer < 0;
}
function draftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  assert(!isDraftVectorSetItemPointer(pointer), "Should be a non-draft vector set item pointer");
  return -pointer - 1;
}
function undraftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  assert(isDraftVectorSetItemPointer(pointer), "Should be a draft vector set item pointer");
  return -pointer - 1;
}
function draftItem(item) {
  const data = {};
  for (const [key, value] of Object.entries(item.data)) {
    if (value?.type === ControlType.RichText) {
      data[key] = {
        type: ControlType.RichText,
        value: draftRichTextPointer(value.value)
      };
    } else if (value?.type === ControlType.VectorSetItem) {
      data[key] = {
        type: ControlType.VectorSetItem,
        value: draftVectorSetItemPointer(value.value)
      };
    } else {
      data[key] = value;
    }
  }
  return {
    pointer: draftPointer(item.pointer),
    data
  };
}
function undraftItem(item) {
  const data = {};
  for (const [key, value] of Object.entries(item.data)) {
    if (value?.type === ControlType.RichText) {
      data[key] = {
        type: ControlType.RichText,
        value: undraftRichTextPointer(value.value)
      };
    } else if (value?.type === ControlType.VectorSetItem) {
      data[key] = {
        type: ControlType.VectorSetItem,
        value: undraftVectorSetItemPointer(value.value)
      };
    } else {
      data[key] = value;
    }
  }
  return {
    pointer: undraftPointer(item.pointer),
    data
  };
}
export {
  DraftDatabaseCollection
};
`;var _n=class e{constructor(t,r,o){this.chunkId=t;this.offset=r;this.length=o}static fromString(t){let[r,o,n]=t.split("/").map(Number);return Oe(H(r),"Invalid chunkId"),Oe(H(o),"Invalid offset"),Oe(H(n),"Invalid length"),new e(r,o,n)}toString(){return`${this.chunkId}/${this.offset}/${this.length}`}static read(t){let r=t.readUint16(),o=t.readUint32(),n=t.readUint32();return new e(r,o,n)}write(t){t.writeUint16(this.chunkId),t.writeUint32(this.offset),t.writeUint32(this.length)}compare(t){return this.chunkId<t.chunkId?-1:this.chunkId>t.chunkId?1:this.offset<t.offset?-1:this.offset>t.offset?1:(Oe(this.length===t.length),0)}};function dd(e){if(rt(e))return 0;switch(e.type){case"array":return 1;case"boolean":return 2;case"color":return 3;case"date":return 4;case"enum":return 5;case"file":return 6;case"responsiveimage":return 10;case"link":return 7;case"number":return 8;case"object":return 9;case"richtext":return 11;case"string":return 12;case"vectorsetitem":return 13;default:Vi(e)}}var Ht;(o=>{function e(n){let i=n.readUint8();switch(i){case 0:return null;case 1:return aw(n);case 2:return cw(n);case 3:return mw(n);case 4:return hw(n);case 5:return Sw(n);case 6:return vw(n);case 7:return Nw(n);case 8:return xw(n);case 9:return Dw(n);case 10:return Fw(n);case 11:return Ew(n);case 12:return zw(n);case 13:return $w(n);default:Vi(i)}}o.read=e;function t(n,i){let a=dd(i);if(n.writeUint8(a),!rt(i))switch(i.type){case"array":return sw(n,i);case"boolean":return dw(n,i);case"color":return pw(n,i);case"date":return gw(n,i);case"enum":return Cw(n,i);case"file":return Iw(n,i);case"link":return ww(n,i);case"number":return Mw(n,i);case"object":return kw(n,i);case"responsiveimage":return Aw(n,i);case"richtext":return Ow(n,i);case"vectorsetitem":return Hw(n,i);case"string":return Uw(n,i);default:Vi(i)}}o.write=t;function r(n,i,a){let s=dd(n),l=dd(i);if(s<l)return-1;if(s>l)return 1;if(rt(n)||rt(i))return 0;switch(n.type){case"array":return Oe(i.type==="array"),lw(n,i,a);case"boolean":return Oe(i.type==="boolean"),uw(n,i);case"color":return Oe(i.type==="color"),fw(n,i);case"date":return Oe(i.type==="date"),yw(n,i);case"enum":return Oe(i.type==="enum"),bw(n,i);case"file":return Oe(i.type==="file"),Tw(n,i);case"link":return Oe(i.type==="link"),Rw(n,i);case"number":return Oe(i.type==="number"),Vw(n,i);case"object":return Oe(i.type==="object"),Pw(n,i,a);case"responsiveimage":return Oe(i.type==="responsiveimage"),Lw(n,i);case"richtext":return Oe(i.type==="richtext"),Bw(n,i);case"vectorsetitem":return Oe(i.type==="vectorsetitem"),Gw(n,i);case"string":return Oe(i.type==="string"),Ww(n,i,a);default:Vi(n)}}o.compare=r})(Ht||={});function aw(e){let t=e.readUint16(),r=[];for(let o=0;o<t;o++){let n=Ht.read(e);r.push(n)}return{type:"array",value:r}}function sw(e,t){e.writeUint16(t.value.length);for(let r of t.value)Ht.write(e,r)}function lw(e,t,r){let o=e.value.length,n=t.value.length;if(o<n)return-1;if(o>n)return 1;for(let i=0;i<o;i++){let a=e.value[i],s=t.value[i],l=Ht.compare(a,s,r);if(l!==0)return l}return 0}function cw(e){return{type:"boolean",value:e.readUint8()!==0}}function dw(e,t){e.writeUint8(t.value?1:0)}function uw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function mw(e){return{type:"color",value:e.readString()}}function pw(e,t){e.writeString(t.value)}function fw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function hw(e){let t=e.readInt64(),r=new Date(t);return{type:"date",value:r.toISOString()}}function gw(e,t){let o=new Date(t.value).getTime();e.writeInt64(o)}function yw(e,t){let r=new Date(e.value),o=new Date(t.value);return r<o?-1:r>o?1:0}function Sw(e){return{type:"enum",value:e.readString()}}function Cw(e,t){e.writeString(t.value)}function bw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function vw(e){return{type:"file",value:e.readString()}}function Iw(e,t){e.writeString(t.value)}function Tw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function Nw(e){return{type:"link",value:e.readJson()}}function ww(e,t){e.writeJson(t.value)}function Rw(e,t){let r=JSON.stringify(e.value),o=JSON.stringify(t.value);return r<o?-1:r>o?1:0}function xw(e){return{type:"number",value:e.readFloat64()}}function Mw(e,t){e.writeFloat64(t.value)}function Vw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function Dw(e){let t=e.readUint16(),r={};for(let o=0;o<t;o++){let n=e.readString();r[n]=Ht.read(e)}return{type:"object",value:r}}function kw(e,t){let r=Object.entries(t.value);e.writeUint16(r.length);for(let[o,n]of r)e.writeString(o),Ht.write(e,n)}function Pw(e,t,r){let o=Object.keys(e.value).sort(),n=Object.keys(t.value).sort();if(o.length<n.length)return-1;if(o.length>n.length)return 1;for(let i=0;i<o.length;i++){let a=o[i],s=n[i];if(a<s)return-1;if(a>s)return 1;let l=e.value[a]??null,c=t.value[s]??null,m=Ht.compare(l,c,r);if(m!==0)return m}return 0}function Fw(e){return{type:"responsiveimage",value:e.readJson()}}function Aw(e,t){e.writeJson(t.value)}function Lw(e,t){let r=JSON.stringify(e.value),o=JSON.stringify(t.value);return r<o?-1:r>o?1:0}function Ew(e){let t=e.readInt8();if(t===0)return{type:"richtext",value:e.readUint32()};if(t===1)return{type:"richtext",value:e.readString()};throw new Error("Invalid rich text pointer")}function Ow(e,t){if(H(t.value)){e.writeInt8(0),e.writeUint32(t.value);return}if(E(t.value)){e.writeInt8(1),e.writeString(t.value);return}throw new Error("Invalid rich text pointer")}function Bw(e,t){let r=e.value,o=t.value;if(H(r)&&H(o)||E(r)&&E(o))return r<o?-1:r>o?1:0;throw new Error("Invalid rich text pointer")}function zw(e){return{type:"string",value:e.readString()}}function Uw(e,t){e.writeString(t.value)}function Ww(e,t,r){let o=e.value,n=t.value;return r.type===0&&(o=e.value.toLowerCase(),n=t.value.toLowerCase()),o<n?-1:o>n?1:0}function $w(e){return{type:"vectorsetitem",value:e.readUint32()}}function Hw(e,t){e.writeUint32(t.value)}function Gw(e,t){let r=e.value,o=t.value;return r<o?-1:r>o?1:0}var Fr=class e{constructor(t,r){this.fieldNames=t;this.options=r;I(this,"entries",[])}sortEntries(){this.entries.sort((t,r)=>{for(let o=0;o<this.fieldNames.length;o++){let n=t.values[o],i=r.values[o],a=Ht.compare(n,i,this.options.collation);if(a!==0)return a}return t.pointer.compare(r.pointer)})}static deserialize(t){let r=new js(t),o=r.readJson(),n=r.readUint8(),i=[];for(let l=0;l<n;l++){let c=r.readString();i.push(c)}let a=new e(i,{collation:o}),s=r.readUint32();for(let l=0;l<s;l++){let c=[];for(let d=0;d<n;d++){let u=Ht.read(r);c.push(u)}let m=_n.read(r);a.entries.push({values:c,pointer:m})}return a}serialize(){let t=new Xo;t.writeJson(this.options.collation),t.writeUint8(this.fieldNames.length);for(let r of this.fieldNames)t.writeString(r);this.sortEntries(),t.writeUint32(this.entries.length);for(let r of this.entries){let{values:o,pointer:n}=r;for(let i of o)Ht.write(t,i);n.write(t)}return t.subarray()}addItem(t,r){let o=this.fieldNames.map(n=>t.getField(n)??null);this.entries.push({values:o,pointer:r})}};var _s=class e{constructor(){I(this,"fields",new Map)}static read(t){let r=new e,o=t.readUint16();for(let n=0;n<o;n++){let i=t.readString(),a=Ht.read(t);r.setField(i,a)}return r}write(t){t.writeUint16(this.fields.size);for(let[r,o]of this.fields)t.writeString(r),Ht.write(t,o)}getData(){let t={};for(let[r,o]of this.fields)t[r]=o;return t}setField(t,r){this.fields.set(t,r)}getField(t){return this.fields.get(t)}};function ud(e){return p`${e}.replace("/modules/", "/cms/")`}var _w=fe("serializeDatabase"),md=4*1024*1024,Jw=5e3;async function vC(e,t,r,o,n,i,a,s,l,c,m,d){let u=new Hs(e,t,i,o,l,c,a,s),f=e.getPropertyControls(t.tree),h=Object.entries(f),y=Qp(t.tree,{includeDrafts:!0}),S={[Jr]:{type:Jo("string",i),isNullable:!1},[wc]:{type:Jo("date",i),isNullable:!0},[Rc]:{type:Jo("date",i),isNullable:!0},[gi]:{type:Jo("string",i),isNullable:!0},[yi]:{type:Jo("string",i),isNullable:!0}};function C(Y){return Jo(Y,i)}for(let[Y,de]of h){let ae=Oy(de,C);ae&&(S[Y]=ae)}let T=c.dedupe("schema",new O(S,0)),N=Ay(e.variables),x=e.variables.find(Nm),V=o.create(CC),A,F,j=d?!0:void 0,W=e.getSortedChildren().filter(Y=>Y.isDraft===j);if(d){let Y=Fe("collection",e.id);if(A=p`${i.addImport(`../${Y}`,{exportSpecifier:"default",importBinding:"originalCollection"})}.collectionByLocaleId`,W.length===0){let ae={displayName:e.name??"Unknown",collectionByLocaleId:A};return p`${ae}`}let de=o.create(bC);F=i.addImport(de.submoduleImport,{exportSpecifier:"DraftDatabaseCollection"})}let K=i.addImport(V.submoduleImport,{exportSpecifier:"DatabaseCollection"}),ce={};for(let Y of y){let ee=function(){let te=new Xo;return te.writeUint32(0),te},Ye=function(te){let se=we.subarray(0,te);jn(se).setUint32(0,ue),L.push(se)};var ye=ee,ne=Ye;let de=[new Fr([Jr],{collation:{type:1}}),new Fr([gi],{collation:{type:1}}),new Fr([yi],{collation:{type:1}})];x&&de.push(new Fr([Jr,x.id],{collation:{type:1}}),new Fr([x.id,Jr],{collation:{type:1}}));for(let[te]of h)de.push(new Fr([te],{collation:{type:0}}));let ae=new Gs,Ie=W.filter(te=>{let se=gy(t.tree,te);return se?se.includes(Y.id):!0}),je=[];for(let te=0;te<Ie.length;te++){let se=Ie[te];g(se,"Node must exist");let ze=new _s;ze.setField(Jr,{type:"string",value:se.id});let rr=se.createdAt;rr&&ze.setField(wc,{type:"date",value:new Date(rr).toISOString()});let br=se.updatedAt;br&&ze.setField(Rc,{type:"date",value:new Date(br).toISOString()});let no=Ie[te-1];no&&ze.setField(gi,{type:"string",value:no.id});let _t=Ie[te+1];_t&&ze.setField(yi,{type:"string",value:_t.id});let Jt={resolveColor(Qe){return m.addColor(Qe)},resolveFile(Qe){return a.resolve(Qe)?.src},resolveImage(Qe,dt){return a.resolveResponsiveImage(Qe,void 0,dt)},resolveLink(Qe){let dt=s.create(Qe);if(!w(dt)&&!Nt(dt))return dt},resolveRichTextPointer(Qe){return u.add(Qe)},resolveVectorSetItemPointer(Qe){return ae.add(Qe)}};for(let[Qe,dt]of h){let Br=Ly(Qe,dt,N,f,se);if(w(Br))continue;let ua=Ey({control:dt,controlProp:Br,resolvers:Jt,locale:Y});w(ua)||ze.setField(Qe,ua)}je.push(ze)}let L=[],ue=0,we=ee();for(let te of je){let se=we.getOffset();te.write(we),we.getOffset()>md&&(Ye(se),we=ee(),se=we.getOffset(),ue=0,te.write(we)),ue++;let ze=we.getOffset()-se,rr=new _n(L.length,se,ze);for(let br of de)br.addItem(te,rr)}we.getOffset()>0&&Ye();let Vt=i.addImport(V.submoduleImport,{exportSpecifier:"DatabaseDictionaryIndex"}),Te=L.map((te,se)=>ud(n.create(`chunk-${Y.id}-${se}`,ad,te)));L.reduce((te,se)=>te+se.length,0)<Jw&&(de.length=0);let Dt=[],mr=1/0;for(let te of de){let se=te.serialize();if(se.length>=md){_w.warn("Skipping index:",se.length);continue}mr+se.length>md&&(Dt.push([]),mr=0);let ze=Dt.at(-1);g(ze,"Chunk must exist"),ze.push({model:te,bytes:se}),mr+=se.length}let oo=[];for(let te=0;te<Dt.length;te++){let se=Dt[te];g(se,"Chunk must exist");let ze=new Xo,rr=[];for(let{bytes:Jt}of se){let Qe=ze.getOffset();ze.writeBytes(Jt);let dt=ze.getOffset();rr.push({from:Qe,to:dt})}let br=ze.subarray(),no=ud(n.create(`indexes-${Y.id}-${te}`,ad,br)),_t=se.map(({model:Jt},Qe)=>{if(Jt instanceof Fr){let dt=rr[Qe];g(dt,"Can't find range for index");let Br={url:no,range:dt,fieldNames:c.dedupe("fieldNames",Jt.fieldNames),collation:c.dedupe("collation",Jt.options.collation),collectionSchema:T};return p`new ${Vt}(${Br})`}throw new Error("Unsupported index type")});oo.push(..._t)}let lt=ae.serialize(r,c),ct={schema:T,chunks:Te,indexes:oo,resolveRichText:u.resolveRichTextBinding,resolveVectorSetItem:lt};if(A&&F){let te=p`new ${K}(${ct})`,se=p`${A}[${Y.id}]`;ce[Y.id]=p`new ${F}(${te}, ${se}, ${gi}, ${yi})`}else ce[Y.id]=p`new ${K}(${ct})`}u.serialize();let D={displayName:e.name??"Unknown",collectionByLocaleId:ce};return p`${D}`}var TC=xt(async(e,t,r)=>Promise.all([IC(e.id,t,!1),IC(e.id,t,!0)]));async function IC(e,t,r){let{modulesStore:o,treeStore:n,assetMap:i}=t,{tree:a}=n,s=r?"draftCollection":"collection",l=new To(i),c=new $s(e),m=new ry(s,o,e),d=a.getNodeWithTrait(e,ot);g(d,"Must have a source node to serialize");let u=d.moduleSourceRevision,f=Yg(d);await Fs(f,o);let{module:h}=Xg(o,d);$t("collection_update",{moduleId:h?.id,recordCount:d.getItemCount(),source:"unknown"});let y=Kg(d)?.id,S=new jr,C=new Co(s,o,S),T=new ss(S),N=new Vn(d,C,S,void 0,n,o),x=new kn,V=await vC(d,n,o,m,c,C,l,N,S,T,x,r),A=vo("",{framerRecordIdKey:Jr,framerSlug:y,framerEnumToDisplayNameUtils:"2",framerCollectionUtils:"1",framerCollectionId:d.id,framerColorSyntax:x.hasColorsOfType("wideGamut"),framerAutoSizeImages:!0,framerData:""}),F=S.create("data"),j=Qw(d,F,t,{imports:C},s),W=Xw(C,T,F,Jr,y),K=p.joinLines(...C.statements,...T.list(),A,p`const ${F} = ${V}`,p`export default ${F}`,j,...qw(d.variables,a.root.locales),W);return{type:s,revision:u,source:K,artifacts:{assets:new Set(l.keys),binaryAssets:c.assets,submodules:m.serialize(),metrics:{nodes:d.getItemCount()}}}}function qw(e,t){let r=[],o=new O;for(let n of e){if(n.type!=="enum")continue;let i=new v(oy(n.id));r.push(p`export const ${i} = ${hC(n,t,i)};`),o[n.id]=i}return r.push(p`export const ${new v(ny)} = ${o};`),r}function Xw(e,t,r,o,n){return p.joinLines(p`export const utils = {`,p`async getSlugByRecordId(id, locale) {`,n?Kw(e,t,r,o,n):void 0,p`},`,p`async getRecordIdBySlug(slug, locale) {`,n?Yw(e,t,r,o,n):void 0,p`},`,p`}`)}function NC(e,t){let r=e.addImport("framer",{exportSpecifier:"QueryEngine"}),o=t.dedupe("queryEngine",p`new ${r}()`),n=e.addImport("framer",{exportSpecifier:"QueryCache"});return t.dedupe("queryCache",p`new ${n}(${o})`)}function Kw(e,t,r,o,n){let i=NC(e,t),a={from:{type:"Collection",data:r},select:[{type:"Identifier",name:n}],where:{type:"BinaryOperation",operator:"==",left:{type:"Identifier",name:o},right:{type:"LiteralValue",value:p`id`}},limit:{type:"LiteralValue",value:1}};return p.joinLines(p`const [item] = await ${i}.get(${a}, locale).readAsync()`,p`return item?.[${n}]`)}function Yw(e,t,r,o,n){let i=NC(e,t),a={from:{type:"Collection",data:r},select:[{type:"Identifier",name:o}],where:{type:"BinaryOperation",operator:"==",left:{type:"Identifier",name:n},right:{type:"LiteralValue",value:p`slug`}},limit:{type:"LiteralValue",value:1}};return p.joinLines(p`const [item] = await ${i}.get(${a}, locale).readAsync()`,p`return item?.[${o}]`)}function Qw(e,t,r,o,n){let i=Fy(e,r,o,n);if(w(i))return;let a=o.imports.addImport("framer",{exportSpecifier:"addPropertyControls"});return v.fn(a,t,i)}var wo=class{constructor(t){this.declarationCollector=t;I(this,"fontObjects",new Set);I(this,"fontReferences",new Map);I(this,"referencedComponentIdentifiers",new Set);I(this,"fontObjectsBySelector",new Map)}createDedupedVariationAxesBinding(t){return t.variationAxes?this.declarationCollector.dedupe("variationAxes",[...t.variationAxes]):void 0}addFontObjectBySelector(t,r){let o=this.fontObjectsBySelector.get(t);if(o){if(!r)return;let i=o[0];if(!i)return;if(Ma(i.source,r)&&!i.openType)for(let a of o)a.openType=!0;return}let n=Lo.getFontBySelector(t);if(!(!n||!n.file))if(n.subsets){let i=[];this.fontObjectsBySelector.set(t,i);for(let a of n.subsets){let s={url:a.file,family:n.family.name,style:n.style,weight:n.weight!==void 0?String(n.weight):void 0,source:n.family.source,unicodeRange:a.unicodeRange,variationAxes:this.createDedupedVariationAxesBinding(n),openType:Ma(n.family.source,r)};this.fontObjects.add(s),i.push(s)}}else{let i={url:n.file,family:n.family.name,style:n.style,weight:n.weight!==void 0?String(n.weight):void 0,source:n.family.source,variationAxes:this.createDedupedVariationAxesBinding(n),openType:Ma(n.family.source,r)};this.fontObjects.add(i),this.fontObjectsBySelector.set(t,[i])}}addFontReference({componentIdentifier:t,fontReference:r}){this.fontReferences.set(Q(r),r),this.referencedComponentIdentifiers.add(t)}};function Jn(e,t,r,{pixelSize:o,repeaterInfo:n,context:i}){return rs(t,r,{resolveAsset:(a,s,l,c)=>{let m,d=un(s)?s.__defaultAssetReference:void 0;return a!==d&&(m=(c?i.assets.resolveResponsiveImage(a,o):i.assets.resolve(a))?.src),!Da(l)||!i.localizedValues?m:i.localizedValues.add(m,l.valueLocalized,u=>{let f=l.valueLocalized?.[u]?.value;return Sa(f)?void 0:f===d?p`undefined`:(c?i.assets.resolveResponsiveImage(a,o):i.assets.resolve(a))?.src})},resolveResponsiveImage:(a,s,l)=>{let c,m,d,u;if(ba(s)&&Ca(s.__vekterDefault)?(m=s.__vekterDefault.assetReference,d=s.__vekterDefault.positionX,u=s.__vekterDefault.positionY):un(s)&&(m=s.__defaultAssetReference),(a!==m||l.positionX!==d||l.positionY!==u)&&(c=v.fromValue(i.assets.resolveResponsiveImage(a,o,l))),i.localizedValues&&(c=i.localizedValues.add(c,l.valueLocalized,h=>{let y=l.valueLocalized?.[h];if(!Va(y))return;if(y.value===m&&y.imageFocalPoint?.positionX===d&&y.imageFocalPoint?.positionY===u)return p`undefined`;let S=i.assets.resolveResponsiveImage(y.value,o,y.imageFocalPoint);return v.fromValue(S)})),!c)return;if(!i.valueTransforms)return c;let f=l.alt??ts;return i.localizedValues&&(f=i.localizedValues.add(f,l.altLocalized,h=>l.altLocalized?.[h]?.value)),i.valueTransforms.wrapInAddImageAlt(c,v.fromValue(f))},resolveDynamicValue:(a,s)=>{let l;if(me(a))g(i.variables,"Variables are not supported"),l=i.variables.create(a);else if(Ft(a)){if(!i.valueTransforms)return;g(e.cache,"Node cache must be passed in when computed values can be created"),l=i.valueTransforms.createComputedValue(a,e,s)}else{return}if(!i.valueTransforms)return l;switch(s.type){case"image":return i.valueTransforms.wrapInToImageSrc(l);case"responsiveimage":return i.valueTransforms.wrapInToResponsiveImage(l);case"gap":case"padding":case"borderradius":return i.valueTransforms.wrapInNumberToPixelString(l);default:return l}},resolveLink:(a,s,l)=>{let c=Bo(s.value);if($r(c)&&i.localizedValues){let m=s.valueLocalized;return i.localizedValues.add(c.url,m,d=>m?.[d]?.value)}if(Ft(c)){if(!i.valueTransforms)return;g(e.cache,"Node cache must be passed in when computed values can be created");let m=i.valueTransforms.createComputedValue(c,e,l);return i.links.createResolvedBinding(e,m)}return i.links.resolve(e,c,n)},resolvePageScope:a=>i.links.resolvePageScope(Bo(a)),resolveLocalizedValue:(a,s)=>i.localizedValues?i.localizedValues.add(a,s,l=>s?.[l]?.value):a,compileRichText:(a,s)=>{let l=qr(a,{collectors:i,nodeId:e.originalid??e.id});return i.localizedValues?i.localizedValues.add(l,s,(c,m)=>{if(!s)return;let d=s[c];if(!d)return;let u=d.value;if(E(u))return qr(u,{collectors:{...i,...m},nodeId:e.originalid??e.id})}):l},resolveFont:a=>{if(!La(a))return{};let s=hn(e);return i.fonts.addFontObjectBySelector(a.fontSelector,s),Ea(a)},resolveScrollSectionRef:(a,s)=>{if(!w(s)){if(me(s))return i.variables?.create(s);if(E(s.target)){let l=i.elementIds?.scrollTargetInfo(s);if(l?.ref)return l.ref}}},resolveCustomCursor:(a,s)=>{if(!w(s))return me(s)?i.variables?.create(s):i.customCursors?.addControl(a,e,s)},resolveVectorSetItem:(a,s)=>{if(!w(a))return i.vectorSets?.resolveControl(a,s,e)},resolveColor:a=>E(a)?i.cssVariableDefinitions?.resolveColor(a)??a:a})}function qs({componentName:e,fontObjects:t,fontReferences:r,imports:o,declarations:n,sharedFontArrays:i=[]}){return p.joinLines(...n.list(),v.fn(o.addImport("framer",{exportSpecifier:"addFonts"}),e,Di({fontObjects:t,fontReferences:r,sharedFontArrays:i}),{supportsExplicitInterCodegen:!0}))}function Di({fontObjects:e,fontReferences:t,sharedFontArrays:r=[]}){let o=[],n={explicitInter:!0,fonts:[]};for(let i of e){try{new URL(i.url)}catch{throw new Error(`Expected URL for font "${i.family}" to be a valid, absolute URL, but got: ${i.url}`)}n.fonts.push(i)}o.push(n);for(let i of t.values())o.push(p`...${i}`);for(let i of r)o.push(p`...${i}`);return o}var RC=xt(async(e,{assetMap:t,treeStore:r,modulesStore:o})=>{let n=new jr,i=new To(t),a=new Co("componentPresets",o,n),s=new Vn(e,a,n,void 0,r,o),l=new ss(n),c=new as(e),m=new ks(e,r,c,l,n,a,i),d=new Ds(n,c,m,i,s),u=e.moduleSourceRevision,f={},h={},y=e.getComponentPresets();await Fs(y.map(T=>T.componentIdentifier),o);let S=new jr,C=new ls(S);for(let T of y){let N=P.reactComponentForIdentifier(T.componentIdentifier);g(N,"Can't find react component for preset");let x=T.getFontsForCodeGeneration(P);await Lo.loadFonts(x);let V=new wo(C),A=Em(Vh(N,"onlyPresets"),T.getRawControlProps()),F=Jn(T,N.properties,A,{pixelSize:void 0,repeaterInfo:void 0,context:{assets:i,imports:a,links:s,fonts:V,fetches:d}});f[T.id]=new O(F),(V.fontObjects.size>0||V.fontReferences.size>0)&&(h[T.id]=Di({fontObjects:V.fontObjects,fontReferences:V.fontReferences}))}return[{revision:u,type:"componentPresets",source:p.joinLines(...a.statements,p`export const props = ${f}`,...C.list(),p`export const fonts = ${h}`),artifacts:{assets:i.keys,metrics:{nodes:Object.keys(f).length}}}]});var Zw=fe("CodeGenerationStore");function xC(e,t,r){return r.add(e),t[e]?.forEach(o=>{r.has(o)||xC(o,t,r)}),r}function eR(e,t){let r={};for(let{fromNode:o,toNode:n}of t){let i=r[o]??new Set;i.add(n),r[o]=i}return xC(e,r,new Set([e]))}var MC=xt(async(e,{treeStore:t,modulesStore:r})=>{let o=Q(`Prototype/${e.name||"Generated Prototype"}`),n=t.tree.get(e.homeNodeId);g(n,"Can't serialize",o,": home node must exist.");let i=t.tree.getRect(n),a=new Co("prototype",r);a.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),a.addImport("framer",{exportSpecifier:"PageRoot"}),a.addImport("framer",{exportSpecifier:"useInitialRouteComponent"});let s={};for(let u of eR(n.id,t.treeIndex.getPrototypeScreenLinks(t.tree,e.id))){let h=`../${Fe("screen",u)}`;try{await Bn(P,[ut("screen",u,"default").value],r);let y=a.addImport(h,{exportSpecifier:"default",importBinding:"Screen",lazy:u!==e.homeNodeId});s[u]={page:y,path:u}}catch{Zw.error("Missing module for prototype screen",{screenId:u})}}let l=Q(e.homeNodeId),c=Q(s),m=p`${a.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.useId`,d=new v(re.sections(re.linesFrom(a.statements),`const routes = ${c}`,re.lines("function Prototype({ layoutId }: { layoutId?: string }): JSX.Element {",`  const InitialRouteComponent = useInitialRouteComponent(routes, "${e.homeNodeId}")`,`  const defaultLayoutId = ${v.fn(m)};`,"  if (!InitialRouteComponent) return null","  return (","    <LayoutGroup id={layoutId ?? defaultLayoutId} inherit={false}>",`      <PageRoot RootComponent={InitialRouteComponent} isWebsite={false} routeId={${l}} routes={routes} />`,"    </LayoutGroup>","  )","}"),re.lines(vo("This is a generated Framer component.",{framerIntrinsicHeight:i?.height,framerIntrinsicWidth:i?.width,framerSupportedLayoutWidth:"fixed",framerSupportedLayoutHeight:"fixed",framerPrototype:""}),"const Component: React.ComponentType<{}> = React.memo(Prototype)","export default Component;"),`Component.displayName = ${o};`));return[{type:"prototype",source:d,revision:void 0}]});var KO={url:"url"};function VC(e){return im(e)&&e.actionIdentifier==="framer/useOpenURL"}function YO(e,t){let r={...e.controls,...t};return{...e,controls:r}}var tR=fe("EventCollector"),fd=Symbol("previous"),AC=p`pathVariables`,DC=p`navigate`,kC=p`setVariant`,Xs=p`overlay`,pd=p`loadMore`,PC={onMouseEnter:{isHovered:!0},onMouseLeave:{isHovered:!1},onTapStart:{isPressed:!0},onTap:{isPressed:!1},onTapCancel:{isPressed:!1}},Qs={visible:"visible",show:"show",hide:"hide",toggle:"toggle"};function Ks(e,t){return new v(`${e}.${t}`)}var Ys=class{constructor(t,r,o,n,i,a={type:"canvasComponent"}){this.sourceNode=t;this.variables=r;this.treeStore=o;this.bindings=n;this.imports=i;this.options=a;I(this,"handlers",new Map);I(this,"variantOnAppearId",new Map);I(this,"keyBindHooks",new Set);I(this,"navigationTargets",new Set);I(this,"needsPathVariables",!1);I(this,"routeHandlers",new Map);I(this,"overlayState",new Map);I(this,"overlayTriggerOverlayBindings",new Map);I(this,"relativeOverlayPrimaryTriggers",new Set)}addHandler({trigger:t,node:r,actionInfo:o}){o?.forEach(c=>{!Dc(c)||!c.controls.id?.value||this.variables.create(zu(c.controls.id.value,void 0))});let n=t===ap&&Gr(r),i=t===ip&&Gr(r),a=Pm(this.treeStore.tree,r.id)??this.sourceNode,s=!o||o.length===0;if(n&&s){this.variantOnAppearId.has(a.id)||this.variantOnAppearId.set(a.id,p`undefined`);return}if(s)return;let l=i?this.createKeydownEvents(r,o,this.imports):this.createCombinedEvents(r,o,t);if(n){l&&!this.variantOnAppearId.has(a.id)&&this.variantOnAppearId.set(a.id,l);return}if(!(i||!l))return l}eventHandlersForNode(t){if(!os(t)||fo(t))return;let r=t.getActions(P),o={};for(let n in r)o[n]=this.addHandler({node:t,trigger:n,actionInfo:r[n]});return this.options.type!=="canvasComponent"||!Lt(t),o}getOverlayIdForNode(t){return di(t)?this.treeStore.tree.get(t.cache.overlayAncestorId)?.originalid:t.cache.overlayAncestorId}transformAction(t,r,o){return n=>{if(!Cc(t)||w(r.meta?.inputValue))return n;let i=p`inputValue`;switch(o.bindings.add(p`const ${i} = args[0]?.target?.value?.trim()`),r.meta.inputValue){case"empty":return p`if (!${i}) { ${n} }`;case"set":return p`if (${i}?.length > 0 ) { ${n} }`;default:z(r.meta.inputValue,"All inputValue values should be handled")}}}getRepeaterIdForNode(t){let r=tf(t);return r?di(t)?r.originalid:r.id:null}createCombinedEvents(t,r,o){let n=FC(),i=this.getOverlayIdForNode(t);o in PC&&this.options.type==="canvasComponent"&&Lt(t)&&n.gestureHandlers.add(v.fn(R.setGestureState,PC[o]));for(let l of r){if(this.extractActionsToGroups(t,l,n,o,this.transformAction(o,l,n)),n.navigationActions.size>0)break;bc(l)&&!vn(t)&&(i||(i=l.controls.overlay.value))}if(LC.every(l=>n[l].size===0))return p`undefined`;let a=this.createEventFromGroups(o,n),s=this.getRepeaterIdForNode(t);if(n.overlayActions.size>0&&i||n.repeaterActions.size>0&&s){let l=i?this.overlayState.get(i):void 0,c=this.treeStore.tree.get(s),d=Wr(c)&&yr(c)?this.bindings.createWithNode("loadMore",c):void 0;if(l||d)return v.fn(a,{[Xs.toString()]:l,[pd.toString()]:d})}return a}createEventFromGroups(t,r){let o=rR(r),n=`${t}${ve(Q(o))}`,i=new v(n),a=p`const ${i} = ${o}`;return this.handlers.set(n,a),i}createKeydownEvents(t,r,o){g(this.options.type==="screen","Smart Components do not support keydown events");for(let n of r){let i=n.meta?.key;if(w(i))continue;let a=FC();if(this.extractActionsToGroups(t,n,a,"onKeyDown",this.transformAction("onKeyDown",n,a)),Object.keys(a).every(l=>a[l].size===0))continue;let s=this.createEventFromGroups("onKeyDown",a);if(g(o,"An Import collector must be provided to add gamepad or hotkey bindings."),am(i))this.keyBindHooks.add(v.fn(o.addImport("framer",{exportSpecifier:"useGamepad"}),i.key,s,{mapping:i.mapping}));else{let l=i.key,c=oR(i),m=c.length?c.concat(l).join("+"):l;this.keyBindHooks.add(v.fn(o.addImport("framer",{exportSpecifier:"useHotkey"}),m,s))}}}extractActionsToGroups(t,r,o,n,i){if(Ug(r)){if(this.options.type!=="canvasComponent"||!Cc(n)&&o.setVariantActions.size>0)return;let a=iR(this.imports,r,n);a&&o.setVariantActions.add(i(a))}else if(Dc(r)){if(this.options.type!=="canvasComponent")return;let a=aR(r);a&&o.eventActions.add(i(a))}else if(mf(r)){if(this.options.type!=="screen"||o.navigationActions.size>0)return;let a=this.createNavigateAction(r.controls.type.value,r.controls.target.value,r.meta?.delay,r.controls);a&&o.navigationActions.add(i(a))}else if(r.actionIdentifier==="framer/useLog"){if(this.options.type!=="screen")return;let a=lR(r);a&&o.otherActions.add(i(a))}else if(r.actionIdentifier==="framer/useSetLocale"){let a=r.controls.localeId?.value;if(!E(a))return;o.otherActions.add(i(v.fn(R.setLocale,a)))}else if(VC(r)){let a=Bo(r.controls.url.value);if(w(a)||k(a))return;if(ka(a)){let s=this.createOpenPageAction(a.webPageId,a.hash,r.meta?.delay);s&&o.navigationActions.add(i(s))}else{let s=sR(r,a);s&&o.otherActions.add(i(s))}}else if(!vn(t)&&bc(r)){if(r.actionIdentifier==="framer/useShowOverlay"&&this.options.type==="canvasComponent")return;let a=r.controls.overlay.value,s=this.createOverlayTriggers(a,t.id);s&&o.overlayActions.add(i(s))}else if(dp(r)){if(!vn(t))return;let a=this.getOverlayIdForNode(t);if(g(a,"overlayAncestorId must not be null when nodeIsInOverlay is true"),!this.overlayState.has(a))return;o.overlayActions.add(i(this.createDismissOverlayAction(r.meta?.delay)))}else if(yf(r)){let a=this.getRepeaterIdForNode(t),s=this.treeStore.tree.get(a);if(!Wr(s))return;o.repeaterActions.add(v.fn(pd))}}createDismissOverlayAction(t){return Xr(v.fn(Ks(Xs,"hide")),t)}createOpenPageAction(t,r,o){if(!this.getNavigationTarget(t))return;let i=`${ve(t)}${r?ve(r):""}`,a=new v(`openRoute${i}`),s=[t,p`true`];r&&s.push(r),this.routeHandlers.set(i,p`const ${a} = ${v.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteHandler"}),...s)}`);let l=v.fn(a);return p`return ${Xr(l,o)}`}createNavigateAction(t,r,o,n){if(t==="previous")return this.navigationTargets.add(fd),p`return ${Xr(v.fn(DC,"previous"),o)}`;if(!r||!this.isValidNavigationTarget(r))return;let i={};for(let a in n){if(a==="target")continue;let s=n[a];i[a]=s.value}return this.navigationTargets.add(r),p`return ${Xr(v.fn(DC,r,i),o)}`}getNavigationTarget(t){if(!t)return null;let r=this.treeStore.tree.getNode(t);return!r||!(this.treeStore.tree.isGroundNode(r)||U(r))?null:r}isValidNavigationTarget(t){return!!this.getNavigationTarget(t)}createOverlayTriggers(t,r){let o=this.treeStore.tree.get(t);if(!o)return;let n=this.treeStore.tree.get(r);if(!n)return;let i=this.treeStore.tree.get(n.originalid??n.id);if(!i)return;if(!n?.children?.find(c=>(c.originalid??c.id)===t&&Tt(c))){tR.reportError("EventCollector: Tried to create a event handler to show an overlay which is not a descendant of the trigger.",{triggerId:r,overlayId:t});return}let s=this.overlayState.get(t)??this.bindings.create("overlay");this.overlayState.set(t,s);let l=this.overlayTriggerOverlayBindings.get(i.id)??new Map;return l.set(o.originalid??o.id,s),this.overlayTriggerOverlayBindings.set(i.id,l),Et(o)&&this.relativeOverlayPrimaryTriggers.add(i.id),v.fn(Ks(Xs,Et(o)?"show":"toggle"))}};function FC(){return{bindings:new v.Set,gestureHandlers:new v.Set,eventActions:new v.Set,setVariantActions:new v.Set,navigationActions:new v.Set,otherActions:new v.Set,overlayActions:new v.Set,repeaterActions:new v.Set}}var LC=["bindings","gestureHandlers","eventActions","setVariantActions","otherActions","overlayActions","repeaterActions","navigationActions"];function rR(e){let t=[];for(let o of LC)for(let n of e[o])t.push(n);let r=p.joinLines(p`activeVariantCallback(async (...args) => {`,...t,p`})`);return e.overlayActions.size>0||e.repeaterActions.size>0?p`({${Xs}, ${pd}}) => ${r}`:r}function oR(e){let t=[];for(let r in e)if(e[r])switch(r){case"altKey":t.push("alt");break;case"ctrlKey":t.push("ctrl");break;case"metaKey":t.push("meta");break;case"shiftKey":t.push("shift");break;default:break}return t}function nR(e,t,r,o){if(t==="cycle")return v.fn(kC,e.addImport("framer",{exportSpecifier:"CycleVariantState"}),o);if(r)return v.fn(kC,r,o)}function iR(e,t,r){let o=t.controls.type?.value,n=t.controls.variantId?.value,i=t.controls.pauseOffscreen?.value;if(!zg(o))return;let a=nR(e,o,n,r==="onAppear"?i:void 0);if(a)return Xr(a,t.meta?.delay)}function aR(e){let t=e.controls.id?.value;if(!E(t))return;let r=new v(t);return p.joinLines(p`if (${r}) {${p.joinLines(e.meta?.delay&&p`await delay(() => {}, ${e.meta?.delay*1e3});`,p`const res = await ${r}(...args);`,p`if (res === false) return false;`)}}`)}function sR(e,t){if(!$r(t))return;let{href:r,target:o=p`undefined`,rel:n}=Ku(t.url);if(!r)return;let i=[r,o??p`undefined`,n??"noopener"];return Xr(v.fn(p`window.open`,...i),e.meta?.delay)}function lR(e){let t=e.controls?.type?.value,r=e.controls?.message?.value;if(E(t))switch(t){case"event":return new v(re.lines('if (args[0] && "persist" in args[0]) args[0].persist()',Xr(p`console.log(...args)`,e.meta?.delay)));case"message":return E(r)?Xr(p`console.log(${r})`,e.meta?.delay):void 0;case"count":return E(r)?Xr(p`console.count(${r})`,e.meta?.delay):void 0}}function Xr(e,t){return!w(t)&&t>0?p`await delay(() => ${e}, ${t*1e3})`:e}function Zs(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":return!0;default:return!1}}function Cr(e){return G(e)&&!Zs(e)&&!e.isVectorInstance}function EC(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":case"framer/Prototype":return!0;default:return!1}}function OC(e){switch(e.codeComponentIdentifier){case"framer/Page":return"Page";case"framer/Scroll":return"Scroll";case"framer/Prototype":return"DeviceCodeComponent"}}var dR=e=>[`.${e}[data-border="true"]::after, .${e} [data-border="true"]::after { content: ""; border-width: var(--border-top-width, 0) var(--border-right-width, 0) var(--border-bottom-width, 0) var(--border-left-width, 0); border-color: var(--border-color, none); border-style: var(--border-style, none); width: 100%; height: 100%; position: absolute; box-sizing: border-box; left: 0; top: 0; border-radius: inherit; pointer-events: none; }`],uR=e=>[`.${e}[data-selection="true"] * ::selection, .${e} [data-selection="true"] * ::selection { color: var(--selection-color, none); background-color: var(--selection-background-color, none); }`],mR=e=>[`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar { width: 0px; height: 0px; }`,`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar-thumb, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar-thumb { background: transparent; }`,`.${e}[data-hide-scrollbars="true"], .${e} [data-hide-scrollbars="true"] { scrollbar-width: none; }`],Pi="data-layout-template",pR={0:dR,1:mR,2:uR},qn,el=class{constructor(t,r,o,n){this.entryNode=t;this.sourceNode=r;this.serializationId=o;this.cssVariableDefinitions=n;I(this,"sharedStyleIds",new Set);I(this,"rules",{});$(this,qn,new Set);I(this,"selectorsByNodeId",new Map)}get(t=this.sourceNode.id){return t===this.sourceNode.id&&this.getWideGamutColorRule(),{rules:this.rules[t]??new Map}}createScopingSelector(t,r){if(t){let o=`.${this.serializationId}.${zm}v-${ve(t)}`;return r?`${o}.${r}`:o}return`.${this.serializationId}`}createSelector(t,r,o,n,i=t===this.sourceNode.id){let a=this.createScopingSelector(o,n);return t===this.entryNode.id?`${a}.${r}, ${a} .${r}`:i?`${a}.${r}`:`${a} .${r}`}addRule(t,r,o={}){let{scope:n,gesture:i,container:a,ruleType:s=0,hasScopingSelector:l}=o,c=r.originalid??r.id,m=Um(s,c);a&&(m+="-container");let d=this.createSelector(c,m,n,i,l);this.selectorsByNodeId.set(c,d);let u=o.variant?.id??this.sourceNode.id;if(this.createRule(d,Rn(t),u),hR(t)){let f=yR(r,this.serializationId);for(let h in f)this.createRule(h,Rn(f[h]),u)}return m}addConditionalRule(t){b(this,qn).add(t)}hasConditionalRule(t){return b(this,qn).has(t)}conditionalRules(t){let r=[];return b(this,qn).forEach(o=>{let n=pR[o],i=n(t);r.push(...i)}),r}addSharedStyle(t){this.sharedStyleIds.add(t)}createRule(t,r,o=this.sourceNode.id){let n=this.rules[o];if(n){n.set(t,r);return}this.rules[o]=new Map([[t,r]])}getWideGamutColorRule(){let t=this.cssVariableDefinitions.getWideGamutColorRules(`.${this.serializationId}`,this.selectorsByNodeId);t.length!==0&&this.createRule("@supports (color: color(display-p3 1 1 1))",t.join(" "))}};qn=new WeakMap;var fR="viewTransitionName";function hR(e){return fR in e&&gR(e)}var BC="-exclude";function gR(e){return bu(e.viewTransitionName)&&e.viewTransitionName.endsWith(BC)}function hd(e,t,r){let o=ve(e.originalid??e.id);return r?`${t}-${o}${BC}`:o}function yR(e,t){let r=hd(e,t,!0);return{[`::view-transition-group(${r})`]:{animation:"none !important"},[`::view-transition-new(${r})`]:{animation:"none !important"},[`::view-transition-old(${r})`]:{animation:"none !important"}}}function zC(e,t,r){return!!(De(e)||De(t)||e.id===r.rootId)}var tl=class{constructor(t,r){this.repeaterNode=t;this.parent=r;I(this,"subqueries",new Map);I(this,"variableDependencies",new Map);I(this,"childRepeaterIds",new Set)}addSubquery(t,r,o){let n=this.getSubqueries(t);n.set(r,o),this.subqueries.set(t,n),this.childRepeaterIds.add(r)}getSubqueries(t){return this.subqueries.get(t)??new Map}addVariableDependencies(t,r){let o=this.getVariableDependencies(t);o.push(...r),this.variableDependencies.set(t,o)}getVariableDependencies(t){return this.variableDependencies.get(t)??[]}};function gd(e,t){return!vi(e)||w(e.visible)?!0:k(e.visible)?t.createDeduplicatedDynamicValueBinding(e.visible,e,"visible"):e.isVisible()}function yd(e,t,r,o){if(r.inComponentSlot||o||_e(e)||wt(e)||Et(e)||ar(e)&&at.isOn("layoutScroll")||Gr(e)&&sp.some(i=>(e[i]?.length??0)>0)||it(e)&&!nt(e))return!0;switch(t.scopeType){case"CanvasPage":return!0;case"SmartComponent":return!0;case"LayoutTemplate":case"WebPage":case"DesignPage":if(Lt(e)||is(e))return!0;if(_a(e)){let i=e.rotation;if(k(i)||H(i)&&i!==0)return!0}return fs(e);case"VectorSet":return!1;default:Pt(t.scopeType)}}function vt(e,t){if(Number.isNaN(e)&&Number.isNaN(t)||e===t)return!0;if(rt(e)||rt(t)||E(e)||E(t)||w(e)||w(t)||H(e)||H(t)||fr(e)||fr(t)||ac(e)||ac(t))return!1;if(Nt(e)||Nt(t))return Nt(e)&&Nt(t)?Q(e)===Q(t):!1;if(or(e)||or(t)){if(or(e)&&or(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!vt(e[r],t[r]))return!1;return!0}return!1}if(tt(e)||tt(t)){if(tt(e)&&tt(t)){for(let a in e)if(!vt(e[a],t[a]))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;let r,o,n,i;return Si(e)&&(r=O.spreadsAtStart(e),o=O.spreadsAtEnd(e)),Si(t)&&(n=O.spreadsAtStart(t),i=O.spreadsAtEnd(t)),!vt(r,n)||!vt(o,i)?!1:Si(e)&&Si(t)?O.isSorted(e)===O.isSorted(t):!0}return!1}throw new Error(`Tried to compare unsupported primitive types. ${typeof e} / ${typeof t}`)}var UC={js:p`undefined`,css:"unset"};function SR(e,t){switch(t){case"js":return UC[t];case"css":return e==="display"?"block":UC[t];default:z(t,`target is not a defined enum: ${t}`)}}function Kr(e,t,r){if(!e)return;if(!t)return e;let o={},n=!1;for(let i in e){let a=e[i],s=t[i];vt(a,s)||(w(a)?i in t&&(o[i]=r?SR(i,r):void 0,n=!0):(o[i]=a,n=!0))}if(n)return o}var rl=(e,t)=>{if(!Ym(e)||!e.codeOverrideEnabled||!e.codeOverrideIdentifier)return;let r=P.componentForIdentifier(e.codeOverrideIdentifier);if(!(r&&rc(r)))return;let o=Z(e.codeOverrideIdentifier);if(!Ce(o))return;let{importSpecifier:n,exportSpecifier:i}=_r(o,t.moduleType,t.modulesStore);if(!(!n||!i))return{importSpecifier:n,exportSpecifier:i}};function ol(e,t){let r=[];if(at.isOn("overridesWithPropertyControls")&&Fh(e)&&e.codeOverrides)for(let o of e.codeOverrides){let n=P.componentForIdentifier(o.identifier);if(!(n&&rc(n)))continue;let i=Z(o.identifier);if(!Ce(i))continue;let a=t.imports.addModuleImport(i);if(!a)continue;let s=Ah(o),l=Object.keys(s).length>0&&Vr(s);r.push(l?[a,s]:a)}return r}function CR(e){return!Nt(e)&&(E(e)||H(e)||rt(e)||w(e))}function Sd(e,t){return t.scopeType!=="SmartComponent"?CR(e):Vr(e)}var WC=Ge((e,t,r)=>{if(!G(e)||!e.isVectorInstance||!J(r))return;let o=P.reactComponentForIdentifier(e.codeComponentIdentifier);if(!o)return;let n=Jn(e,o.properties,e.getControlProps(o.properties),{context:r,pixelSize:void 0,repeaterInfo:void 0});for(let i in n){let a=n[i],s=`--${ve(i)}`;Sd(a,r)&&(t[s]=a??void 0)}});function $C(e,t,r,o,n){let i={...t};Sm.has(e.codeComponentIdentifier)&&(i.__fromCodeComponentNode=!0);let a=o.reactComponentForIdentifier(e.codeComponentIdentifier);if(a?.properties){let f=Th(e.intrinsicWidth,e.intrinsicHeight),h=Jn(e,a.properties,e.getControlProps(a.properties),{pixelSize:f,context:r,repeaterInfo:n?r.repeaterInfo.get(n):void 0});if(e.isVectorInstance)for(let y in h){let S=h[y],C=r.scopeType!=="SmartComponent"?!0:void 0;i[y]=Sd(S,r)?C:S}else Object.assign(i,h)}let s=Mh(o,e.codeComponentIdentifier,i),l=e.getActions(o);for(let f in l)s[f]=r.events?.addHandler({node:e,trigger:f,actionInfo:l[f]});if(e.isVectorInstance)return Bc(s);let c=Rh(e,o);Cm(e)&&Object.assign(s,e.getStylingProps(c,!1));let m=e.id===r.rootId&&r.scopeType!=="SmartComponent",d=c?Object.keys(c):[],u=tt(c)&&d.length>0&&d.some(f=>!w(c[f]));return tt(c)&&(u||m)&&m&&(c.width=p`style?.width`,c.height=p`style?.heigh`,u=!0),u&&(s.style?Object.assign(s.style,c):s.style=c),Bc(s)}var bR=/\/assets\/(?:(\d+)\/)?([^?]+)\?/u;function vR(e,t){if(typeof DOMParser>"u"||e.indexOf("image")<0)return;let r=Qu(e),o=r.querySelector("svg");if(!o)return;let n=new Map;if(r.querySelectorAll("image").forEach(i=>{let a=i.getAttribute("xlink:href");if(!a)return;let s=bR.exec(a);if(!s)return;let l=Number.parseInt(s[1],10),c=s[2],m="::ASSET::"+n.size+"::",u=t?.resolveResponsiveImage(c,l)?.src??vu(c,l);n.set(m,u),i.setAttribute("xlink:href",m)}),n.size!==0)return o.outerHTML.replace(/::ASSET::\d+::/gu,i=>n.get(i)??`missing:${i}`)}function nl(e,t){let r=e.svg;E(r)&&(e.svg=vR(r,t)??r)}var HC=B((e,t,r)=>{if(!Ph(e)||!On(r?.scopeType))return;if(af(e)||wt(e)&&k(e.fillImage)){t["aria-label"]=void 0;return}if(J(r)&&k(e.ariaLabel)){t["aria-label"]=r.createDeduplicatedDynamicValueBinding(e.ariaLabel,e,"ariaLabel");return}let o=e.resolveValue("ariaLabel",r?.variableOverrides);if(E(o)&&o!==""){t["aria-label"]=o;return}t["aria-label"]=void 0});var GC=B((e,t,r)=>{let o=it(e),n=!!(e.parentid&&r?.renderAsListNodes?.has(e.parentid));if(!ir(e)){if(!nt(e)&&o&&(t.as="a"),n){t.as="li";return}return}if(!wt(e))return;let i=e;if(o){t.as="a";return}if(n){t.as="li";return}let a=i.htmlTag??ns;a!=="div"&&(t.as=a)});var jC=B((e,t,r)=>{if(!Zh(e)||!J(r))return;let o=e.originalid??e.id,n=r.events.overlayState.get(o);n&&(k(e.backdropDismissible)?t.onTap=p`() => ${r.createDeduplicatedDynamicValueBinding(e.backdropDismissible,e,"backdropDismissible")} && ${v.fn(p`${n}.hide`)}`:t.onTap=e.resolveValue("backdropDismissible")?p`() => ${v.fn(p`${n}.hide`)}`:void 0,t.initial={opacity:0},t.key=o,e.backdropTransitionLocked?(t.transition=po(e.backdropEnterTransition??Cs),t.animate={opacity:1},t.exit={opacity:0}):(t.animate={opacity:1,transition:po(e.backdropEnterTransition??Cs)},t.exit={opacity:0,transition:po(e.backdropExitTransition??Cs)}))});var _C=B((e,t,r)=>{if(!Ja(e)&&In(e)){if(Tn(e)&&!e.fillEnabled){t.background=void 0;return}t.background=wh(e,!0,r),t.background&&st(e)&&(e.heightType===5?t.fitImageDimension="height":e.widthType===5?t.fitImageDimension="width":t.fitImageDimension=void 0)}});var qC=B((e,t,r)=>{!Rp(e)||!e.borderEnabled||Fp(e)||(t["data-border"]=!0,J(r)&&r.css.addConditionalRule(0))});var XC="data-reset",KC=B((e,t,r)=>{if(J(r)&&!(r.scopeType==="CanvasPage"||r.scopeType==="DesignPage")&&bo(e)){if(!Tf(e.htmlTag)){t[XC]=void 0;return}e.htmlTag==="button"&&(t[XC]="button")}});function YC(e,t){if(kt(e))return Z(e).type;if(vr(e)){let o=t.getExternalModuleNodes().find(n=>n.codeComponentIdentifier===e);return o?o.type:void 0}}var QC=B((e,t,r)=>{if(!G(e)||!J(r)||!Cr(e))return;t.scopeId=r.scopeId,t.nodeId=e.originalid??e.id,t.isAuthoredByUser=YC(e.codeComponentIdentifier,r.treeStore.tree)==="codeFile"?!0:void 0;let o=vr(e.codeComponentIdentifier);o&&(t.isModuleExternal=o);let n=r.nodeRendersWithMotion.get(e);n&&(t.rendersWithMotion=n);let i=Z(e.codeComponentIdentifier);t["data-code-component-plugin-id"]=Ny(r.treeStore.tree,r.modulesStore,i)});var ZC=B((e,t,r)=>{Lh(e)&&On(r?.scopeType)&&(t["data-nosnippet"]=Eh(e)?e.dataNosnippet:void 0)});var eb=B((e,t,r)=>{if(!If(e))return;let o=J(r)&&k(e.draggable)?r.createDeduplicatedDynamicValueBinding(e.draggable,e,"draggable"):e.resolveValue("draggable");t.draggable=!w(o)&&!k(e.draggable)?o.toString():o});var tb=B((e,t,r)=>{if(!J(r)||fo(e)||!os(e)&&!lp(e))return;let o=r.treeStore.tree.get(r.scopeId);St(o)&&hf(o)&&Object.assign(t,r?.events?.eventHandlersForNode(e))});var rb=B((e,t,r)=>{if(!nt(e))return;let o=e.getFontsForLoading();if(J(r)){let n=hn(e);for(let i of o)r.fonts?.addFontObjectBySelector(i,n)}t.fonts=o.length>0?o:void 0});var ob=B((e,t,r)=>{Tg(e)&&(t.step=J(r)&&k(e.formInputStep)?r.createDeduplicatedDynamicValueBinding(e.formInputStep,e,"step"):e.resolveValue("formInputStep"))});var nb=B((e,t,r)=>{if(Oh(e)){if(J(r)){t["data-hide-scrollbars"]=k(e.hideScrollbars)?r.createDeduplicatedDynamicValueBinding(e.hideScrollbars,e,"hideScrollbars"):e.hideScrollbars||void 0,w(e.hideScrollbars)||r.css.addConditionalRule(1);return}t["data-hide-scrollbars"]=e.resolveValue("hideScrollbars",r?.variableOverrides)?!0:void 0}});var ib=B((e,t,r)=>{!Gr(e)||r?.scopeType==="WebPage"||(t["data-highlight"]=cp(e,P)||void 0)});var ab=B((e,t,r)=>{if(!yt(e)||!Je(e)||!J(r)||r.scopeType!=="LayoutTemplate")return;let o=e.tree()?.getParent(e.id);if(!Ee(o))return;let{center:n}=Jf(e);ku(t,Xf(e)?n:void 0)});var sb=B((e,t,r)=>{if(!it(e)||nt(e))return;if(r?.variables&&me(e.linkOpenInNewTab)){t.openInNewTab=r.variables.create(e.linkOpenInNewTab);return}let o=e.resolveValue("linkOpenInNewTab",r?.variableOverrides);fr(o)&&(t.openInNewTab=o)}),lb=B((e,t,r)=>{if(!it(e)||nt(e))return;if(r?.variables&&me(e.linkSmoothScroll)){t.smoothScroll=r.variables.create(e.linkSmoothScroll);return}let o=e.resolveValue("linkSmoothScroll",r?.variableOverrides);fr(o)&&(t.smoothScroll=o)}),cb=B((e,t,r)=>{if(!it(e)||nt(e))return;if(r?.variables&&me(e.linkClickTrackingId)){t.clickTrackingId=r.variables.create(e.linkClickTrackingId);return}let o=e.resolveValue("linkClickTrackingId",r?.variableOverrides);E(o)&&(t.clickTrackingId=o)}),db=B((e,t,r)=>{if(!it(e)||nt(e))return;let o=e.resolveValue("linkRelValues",r?.variableOverrides);if(r?.variables&&me(e.linkRelValues)){t.relValues=r.variables.create(e.linkRelValues);return}lm(o)&&(t.relValues=o)}),ub=B((e,t,r)=>{if(!it(e)||nt(e))return;if(r?.variables&&me(e.linkPreserveParams)){t.preserveParams=r.variables.create(e.linkPreserveParams);return}let o=e.resolveValue("linkPreserveParams",r?.variableOverrides);fr(o)&&(t.preserveParams=o)}),mb=B((e,t,r)=>{if(!Io(e)||nt(e))return;if(!it(e)){t.href=void 0;return}let o=e.getLink();Ft(o)?t.href=r?.valueTransforms?.createComputedValue(o,e,void 0):$r(o)&&e.linkLocalized&&r?.localizedValues?t.href=r.localizedValues.add(o.url,e.linkLocalized,n=>e.linkLocalized?.[n]?.value):t.href=r?.links?.create(o)}),pb=B((e,t)=>{if($u(e)){let r=new Set,o=e.getInlineLinks(!1);E(e.link)&&o.push(e.link),o.forEach(n=>{if(!n||!_u(n))return;let i=Ju(n)?.target;i&&r.add(i)}),t.__link=e.link,r.size&&(t.preload=Array.from(r))}}),fb=B((e,t)=>{t.nodeId=e.originalid??e.id}),hb=B((e,t,r)=>{t.scopeId=r?.scopeId});var gb=B((e,t,r)=>{if(!bf(e)||!J(r)||!hs(r.scopeType)||Tt(e))return;if(!vf(e)){t.drag=void 0;return}let o,n;!e.dragEffectFreeform&&r.scopeType!=="SmartComponent"?o=r.elementIds.scrollTargetInfo({target:e.dragEffectConstraintElement,collectionItem:e.dragEffectConstraintItem})?.ref:e.dragEffectSnapBack&&(n=!0);let i=e.dragEffectTransition?po(e.dragEffectTransition):void 0,a=i?r.declarations.file.dedupe("inertia",i):void 0,s=o||n,l=p`e`,c={drag:!0,dragConstraints:o,dragMomentum:!!e.dragEffectMomentum,dragTransition:s?a:void 0,dragSnapToOrigin:n,onMouseDown:r.declarations.file.dedupe("preventDefault",p`(${l}) => ${l}.preventDefault()`)};Object.assign(t,c)});var IR="--extracted-",TR=["--framer-text-color","--framer-text-stroke-width","--framer-text-stroke-color","--framer-font-variation-axes"];function Fi(e,t){let r=An(e);return yb(r,(o,n)=>{for(let i of TR){let a=o.style.getPropertyValue(i);if(!a)continue;let s=NR(n,i),l=wR(s,a);t&&(t[s]=a),o.style.setProperty(i,l)}}),r.innerHTML}function NR(e,t){return IR+ve(e+t)}function wR(e,t){return`var(${e}, ${t})`}function yb(e,t,r=""){for(let o=0;o<e.children.length;o++){let n=e.children[o];if(n instanceof HTMLElement){let i=r+n.tagName+o;t(n,i),yb(n,t,i)}}}var Sb=B((e,t,r)=>{if(!Ua(e)||!J(r))return;let o=r.scopeType==="SmartComponent",n=o?Fi(e.html):e.html,{assets:i,imports:a,variables:s,links:l,cssVariableDefinitions:c}=r||{};if(g(i&&a&&l,"assets, imports, links must exist at this point"),me(e.htmlContent))g(s,"context.variables should exist if we are dealing with variables references"),t.children=s.create(e.htmlContent);else{let m=qr(n,{collectors:{assets:i,imports:a,links:l,variables:s,cssVariableDefinitions:c},useFramerMotion:o,nodeId:e.originalid??e.id,scopeId:r.scopeId}),d=hy(n);t.children=r.localizedValues.add(m,e.htmlLocalized,(u,f)=>{let h=zy(d,e.htmlLocalized?.[u],n);if(!h)return;let y;return h.type==="rich-text"?(y=By(e.html,h.value),o&&(y=Fi(y))):y=Qh(n,h.value),qr(y,{collectors:{assets:i,...f},useFramerMotion:o,nodeId:e.originalid??e.id,scopeId:r.scopeId})})}_e(e)&&ya(e.anchorLinkOffsetY)&&(t.anchorLinkOffsetY=e.anchorLinkOffsetY),r.metrics?.measureLength("textBytes",t.__htmlStructure),r.metrics?.measureLength("textBytes",t.htmlFromDesign),r.metrics?.measureLength("textBytes",t.children)});var Cb=B((e,t,r)=>{if(!(!Ta(e)||!e.colorable)){if(Tn(e)&&!e.fillEnabled){t.fill=null;return}if(In(e)&&!(e.fillType==="linear-gradient"&&e.fillLinearGradient||e.fillType==="radial-gradient"&&e.fillRadialGradient||e.fillType==="conic-gradient"&&e.fillConicGradient)){if(e.fillType==="image"&&e.fillImage){t.fill=Nh(e,r,r?.variableOverrides);return}if(e.fillColor){if(k(e.fillColor)&&J(r)){t.fill=r.createDeduplicatedDynamicValueBinding(e.fillColor,e,"fillColor");return}t.fill=e.resolveValue("fillColor",r?.variableOverrides)}}}});var bb=B((e,t,r)=>{if(!ep(e)||!tm(e))return;let o=Io(e)&&E(e.link)?e.link:void 0,n=Gu(e)?e.htmlTextTag:void 0,{alignment:i,rawHTML:a}=e.getStyledText().getProps(e,o,n,()=>{});t.alignment=i,t.rawHTML=a?p`${a}`:void 0,r?.metrics?.measureLength("textBytes",t.rawHTML)});var vb=B((e,t,r)=>{if(Hp(e)){if(!e.textContent){t.text=void 0;return}J(r)&&(k(e.textContent)?t.text=r.createDeduplicatedDynamicValueBinding(e.textContent,e,"textContent"):z(e.textContent,"text content must be a variable or a computed value"),r?.metrics?.measureLength("textBytes",t.text))}});var Ib=B((e,t,r)=>{!Ss(e)||!e.resolveValue("textSelection")||(t["data-selection"]=!0,J(r)&&r.css.addConditionalRule(2))});var Tb=B((e,t)=>{ig(e)&&(t.verticalAlignment=e.textVerticalAlignment)});var Nb=B((e,t)=>{mg(e)&&(t.description=E(e.description)&&e.description!==""?e.description:void 0,t.title=E(e.title)&&e.title!==""?e.title:void 0)});function RR(e){if(Lt(e))return e.variantTransition;if(Pf(e))return e.transition}var wb=B((e,t,r)=>{if(r.scopeType!=="SmartComponent")return;let o=RR(e);if(k(o)){t.value=r.createDeduplicatedDynamicValueBinding(o,e,"transition");return}if(!o){t.value=void 0;return}let n=po(o);t.value=r.declarations.file.dedupe("transition",n)});var xR="-container",bd=p`formState`,MR=B((e,t,r)=>{Ta(e)&&(t.withExternalLayout=!0,t.intrinsicHeight=e.intrinsicHeight||void 0,t.intrinsicWidth=e.intrinsicWidth||void 0,t.svg=p`${e.svg}`,nl(t,r?.assets),r?.metrics?.measureLength("svgBytes",t.svg))}),VR=B((e,t,r)=>{if(!pn(e))return;g(t instanceof O,"");let o=_c.shared().getSVGStringForNode(e),n=e.contentHash;O.assign(t,{layout:r?.scopeType==="SmartComponent"?"position":void 0,intrinsicWidth:void 0,intrinsicHeight:void 0,...Oc(e),withExternalLayout:!0,svgContentId:n,svg:o});let i=t.style?.opacity;(i||Number.isFinite(Number(i)))&&(t.opacity=i),nl(t,r?.assets),r?.metrics?.measureLength("svgBytes",t.svg)}),DR=B((e,t,r)=>{if(!ym(e))return;let o=_c.shared().getSVGStringForNode(e);Object.assign(t,{intrinsicWidth:void 0,intrinsicHeight:void 0,...Oc(e),svg:o,withExternalLayout:!0,requiresOverflowVisible:Uy(e)});let n=t.style?.opacity;(n||Number.isFinite(Number(n)))&&(t.opacity=n),nl(t,r?.assets),r?.metrics?.measureLength("svgBytes",t.svg)});function kR(e){return e.codeComponentIdentifier==="framer/Prototype"}function Cd(e,t,r,o,n){if(!G(e))return;let{lastRepeaterId:i,layoutId:a}=n;if(O.assign(t,$C(e,void 0,r,P,i)),kR(e))t.scaleTo="dynamic";else if(Zs(e))t.__fromCanvasComponent=!0;else if(!e.isVectorInstance)t.width="100%",t.height="100%",t.id=e.originalid??e.id,e.name!==null&&!t.name&&(t.name=e.name);else{let c=_a(e)&&(k(e.rotation)||H(e.rotation)&&e.rotation!==0);t[Bf]=r.scopeType==="SmartComponent"?!0:is(e)||c||fs(e)}th(e,t,r);let s=r.events.overlayTriggerOverlayBindings.get(e.originalid??e.id);if(Lf(e)&&s?.size){let c=new v(Array.from(s.values())?.map(m=>p`${m}.visible`)?.join(" || "));t.variant=p`(${c}) ? ${e.whileOpenEffectVariant} : ${t.variant??p`undefined`}`}Rf(r.treeStore.tree,e)&&(t.type="submit",wf(e)&&(t.variant=v.fn(r.declarations.file.dedupe("formVariants",p`(form, variants, currentVariant) => { ${p.joinLines(p`switch(form.state) {${p.joinLines(p`case "success": return variants.success ?? currentVariant`,p`case "pending": return variants.pending ?? currentVariant`,p`case "error": return variants.error ?? currentVariant`,p`case "incomplete": return variants.incomplete ?? currentVariant`)}}`)} }`),bd,{success:e.formButtonSuccessVariantEnabled?e.formButtonSuccessVariant:void 0,error:e.formButtonErrorVariantEnabled?e.formButtonErrorVariant:void 0,pending:e.formButtonPendingVariantEnabled?e.formButtonPendingVariant:void 0,incomplete:e.formButtonIncompleteVariantEnabled?e.formButtonIncompleteVariant:void 0},t.variant??p`undefined`)));let l=r.treeStore.tree.get(n.lastRepeaterId);if(Wr(l)&&yr(l)&&(Ho(e,l)||Sf(e))&&(t.variant=l&&Cf(e)?v.fn(r.declarations.file.dedupe("loaderVariants",p`(repeaterState, variants, currentVariant) => { ${p.joinLines(p`if (repeaterState.currentPage >= repeaterState.totalPages) return variants.disabled ?? currentVariant`,p`if (repeaterState.isLoading) return variants.loading ?? currentVariant`,p`return currentVariant`)} }`),r.bindings.createWithNode("paginationInfo",l),{disabled:e.dataLoaderDisabledVariantEnabled?e.dataLoaderDisabledVariant:void 0,loading:e.dataLoaderLoadingVariantEnabled?e.dataLoaderLoadingVariant:void 0},t.variant??p`undefined`):void 0),fn(e)||o.identifiers&&o.identifiers.size>1){let c=Z(e.codeComponentIdentifier);g(Ce(c),`Expected a module export identifier, got ${c}`);let{importSpecifier:m,exportSpecifier:d,importBinding:u}=_r(c,r.moduleType,r.modulesStore);g(m,"A module must have an import specifier."),t.Component=me(e.dynamicVectorSetIdentifier)?r.vectorSets.resolveVariableInstance(e):r.imports.addImport(m,{exportSpecifier:d,importBinding:u})}t.layoutId=a??e.originalid??e.id}var PR=(e,t,r,o)=>{let n=new O;return Cd(e,n,t,r,o),n},FR=Wo(HC,GC,jC,_C,qC,QC,KC,ZC,eb,tb,rb,yg,zh,bg,wg,ob,Fg,Rg,xg,Uh,rh,nb,ib,ab,pb,oh,gb,Zf,_f,nh,ih,Qf,Sb,VR,bb,ag,Cb,MR,fg,vb,sg,lg,Ib,Tb,Nb,DR);function AR(e){if(w(e)||e instanceof O&&O.hasSpreads(e))return e;for(let t of Object.values(e))if(!w(t))return e}function il(e){return e.declarations.component.dedupe("scopingClassNames",v.fn(e.imports.addImport("framer",{exportSpecifier:"cx"}),R.serializationHash,p`...${R.sharedStyleClassNames}`))}var LR=(e,t,r,o,{style:n,className:i})=>{let a=new O;FR(e,a,t);let s=(e.originalid??e.id)===t.rootId;if(a.style||n||s){let f={};if(tt(a.style)&&Object.assign(f,a.style),n&&Object.assign(f,n),a.style=AR(f),s){let h=new O(a.style);O.addSpreadAtEnd(h,p`style`),a.style=h}}let l=[];a.className&&l.push(a.className),i&&l.push(i),s&&(l.unshift(il(t)),l.push(R.className),a.ref=R.refBinding,O.addSpreadAtStart(a,R.restProps),t.scopeType==="SmartComponent"&&(l.push(R.classNames),O.addSpreadAtStart(a,R.gestureHandlers))),df(e)&&e.customizationsSectionId&&(a["data-section-id"]=e.id),(De(e)||De(t.treeStore.tree.getParent(e.id)))&&l.unshift(il(t)),l.length===1?a.className=l[0]:l.length>1&&(a.className=v.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),...l)),t.scopeType==="LayoutTemplate"&&Ee(e)&&(a[Pi]=!0);let{withKey:c,layoutId:m}=r,d=m??e.originalid??e.id;c&&(a.key=d),t.scopeType==="SmartComponent"?(a.layoutId=Cr(e)?d+xR:d,a.layoutDependency=p`layoutDependency`):t.scopeType==="CanvasPage"&&(a.layoutIdKey=d,e.duplicatedFrom&&e.duplicatedFrom.length>0&&(a.duplicatedFrom=e.duplicatedFrom)),G(e)&&(Cr(e)?r.inComponentSlot&&(a.inComponentSlot=r.inComponentSlot):(Zs(e)&&(a.__fromCanvasComponent=!0),Cd(e,a,t,o,r)),ar(e)&&(a.layoutScroll=!0)),nt(e)&&(a.withExternalLayout=!0,a.__fromCanvasComponent=!0),Qa(e)&&t?.scopeType==="WebPage"&&!Lt(e)&&(a.id=e.scrollTargetEnabled?t.elementIds.id(e):void 0),a["data-framer-cursor"]=t.customCursors.add(e),Et(e)?Object.assign(a,{role:"dialog"}):a[lc]=t.elementIds.portalId(e),Gf(e)&&(a.id=a.id??t.elementIds.id(e),a.lightboxClassName=il(t));let u=t.treeStore.tree.get(r.lastRepeaterId);return u&&G(e)&&Ho(e,u)&&Object.assign(a,{__paginationInfo:t.bindings.createWithNode("paginationInfo",u),__loadMore:t.bindings.createWithNode("loadMore",u)}),a},ER=Wo(mb,sb,lb,cb,db,ub,fb,hb);function OR(e,t){let r=new O({motionChild:!0});return ER(e,r,t),r}function BR(e,t){let r=new O;return wb(e,r,t),r}var zR=new O({placement:void 0,alignment:void 0,offsetX:void 0,offsetY:void 0,className:void 0,anchorRef:void 0,floatingRef:void 0,onDismiss:void 0,portalSelector:void 0,safeArea:void 0,collisionDetection:void 0});function UR(e,t){if(!mp(e))return;if(!Et(e))return zR;let r=t.events.overlayState.get(e.originalid??e.id);if(!r)return;let o=t.treeStore.tree.getParent(e.originalid??e.id);if(o)return new O({placement:e.floatingPlacement,alignment:e.floatingAlignment,offsetX:e.floatingOffsetX,offsetY:e.floatingOffsetY,anchorRef:t.rootId===o.id?p`${R.refBinding}`:t.elementIds.ref(o),onDismiss:p`${Ks(r,"hide")}`,safeArea:e.floatingSafeArea??!0,zIndex:xm(e)?e.zIndex:void 0,collisionDetection:e.floatingCollisionDetection??!1,collisionDetectionPadding:e.floatingCollisionDetection?e.floatingCollisionPadding??up:void 0,[lc]:t.elementIds.portalId(e),className:v.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),il(t),t.scopeType==="SmartComponent"?R.classNames:void 0)})}function Rb(e,t){let r=t.fetches.getFetchesForNode(e);return new O({requests:r??[],disabled:t.scopeType==="SmartComponent"?R.isLoading:void 0})}function WR(e,t){if(!G(e))return;let r=new O;if(P.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerComponentViewportWidth==="true"){let i=t.simulatedDOM.getComponentViewportContext(e);Object.assign(r,i)}return r}function vd(e,t,r,o,{className:n,style:i}={}){let a=LR(e,t,o,r,{style:i,className:n}),s=BR(e,t),l=UR(e,t);if(fo(e)&&Cr(e)){let c=PR(e,t,r,o),m=Rb(e,t);return{container:a,transition:s,floating:l,fetcher:m,element:c,componentViewport:WR(e,t)}}return{element:a,transition:s,floating:l,link:OR(e,t),fetcher:Rb(e,t)}}var $R=["onTap","onTapStart","onClick","onMouseDown","onMouseUp"],HR=(e,t)=>{if(!Gr(t)||!gf(e,t))return!1;let r=t.getActions(P);return $R.some(o=>{if(o in r){let n=r[o];return n?n.length>0:!1}return!1})},xb=Ge((e,t,r)=>{if(!Dm(e)||Nr(e))return;if(k(e.cursor)&&J(r)){t.cursor=r.cssVariableDefinitions.create(e,"cursor");return}if(e.cursor&&Mm(e.cursor)){t.cursor=e.resolveValue("cursor",r?.variableOverrides),_e(e)&&e.hasLinks()&&(t.cursor=void 0,t[Vm]=e.cursor);return}if(!J(r))return;let o=Lt(e)&&r.topLevelVariantsWithGestures[e.id];t.cursor=o||HR(r.treeStore.tree,e)?"pointer":void 0});var Mb=Ge((e,t)=>{it(e)&&(t.textDecoration="none")});var Vb=Ge((e,t,r)=>{yt(e)&&bo(e)&&r?.renderAsListNodes?.has(e.id)&&(t.listStyle="none",t.margin=0)});var Db=Ge((e,t,r)=>{if(!(!mm(e)||!Fa(e))&&um(e)){if(k(e.overscrollBehavior)&&J(r)){t.overscrollBehavior=r.cssVariableDefinitions.create(e,"overscrollBehavior");return}t.overscrollBehavior=e.resolveValue("overscrollBehavior",r?.variableOverrides)}});var kb=Ge((e,t)=>{Qa(e)&&(t.scrollMarginTop=H(e.scrollMarginTop)&&e.scrollTargetEnabled&&e.scrollMarginTop>0?e.scrollMarginTop:void 0)});var Pb=Ge((e,t,r)=>{if(!Bh(e))return;if(k(e.tapHighlightColor)&&J(r)){t.WebkitTapHighlightColor=r.cssVariableDefinitions.create(e,"tapHighlightColor");return}let o=e.resolveValue("tapHighlightColor",r?.variableOverrides);if(Aa(o)){t.WebkitTapHighlightColor=bm(o);return}t.WebkitTapHighlightColor=o?Mu.toRgbString(o):void 0});var Fb=Ge((e,t,r)=>{if(!Ss(e))return;let o=e.resolveValue("textSelection");t["--selection-color"]=o?.color,t["--selection-background-color"]=o?.backgroundColor});var Ab=Ge((e,t,r)=>{if(pm(e)){if(k(e.userSelect)&&J(r)){t.userSelect=t.WebkitUserSelect=r.cssVariableDefinitions.create(e,"userSelect");return}t.userSelect=t.WebkitUserSelect=fm(e)?e.resolveValue("userSelect",r?.variableOverrides):void 0}});var Lb=Ge((e,t,r)=>{if(!Ff(e)||!J(r)||r.scopeType!=="LayoutTemplate")return;let o=r.treeStore?.tree.getParent(e.id);Ee(o)&&(t.viewTransitionName=e.viewTransitionNone===!0?hd(e,r.serializationId,!0):void 0)});var Ob=Ge((e,t,r)=>{let o=GR(e,r);t.willChange=o}),Eb=`var(${Du}, transform)`;function GR(e,t){if(hs(t?.scopeType)&&(jf(e)&&(Af(e)||Ef(e))||t?.scopeType!=="SmartComponent"&&kf(e)&&Df(e.styleAppearEffectTrigger)==="onMount"))return Eb;if(!Nn(e)||!Fa(e)||!dm(e.overflow))return;let r=Vp(e)&&e.radius,o=om(e)&&e.radiusPerCorner&&(e.radiusBottomLeft||e.radiusBottomRight||e.radiusTopLeft||e.radiusTopRight);if(r||o)return`var(${Vu}, transform)`}var jR=Wo(og,Hf,Cg,xb,Wh,vg,$h,sh,Hh,Gh,Vg,qf,Mb,Vb,hh,Db,Bp,ch,kb,Fb,uh,Pb,Mg,mh,bh,Sh,Ab,Lb,Ob,Ih),Id=Wo(rg,Lp,ph,Sg,Ep,fh,ah,Op,Ig,Dg,Pg,kg,$p,Wf,lh,zp,Up,gh,yh,Wp,WC),Td=Wo(Ch,dh);function _R(e,t){return rt(e)||ao(e)||G(e)?"relative":De(e)?"fixed":Na(e)||Et(t)?"relative":"absolute"}function Nd(e,t,r,o){let n={position:_R(t,e),zIndex:De(t)?vh(t,r):void 0,...o},i={};jR(e,n,r);let a=r.scopeType==="WebPage"||r.scopeType==="LayoutTemplate"||r.nodeRendersWithMotion?.get(e)===!1;return Id(e,a?n:i,r),Ua(e)&&r.scopeType==="SmartComponent"&&Fi(e.html,i),Td(e,i,r),{css:n,style:xe(i)?void 0:i}}var Xn={opacity:1,rotate:0,borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,backgroundColor:"rgba(0, 0, 0, 0)",boxShadow:"none",filter:"none",WebkitFilter:"none",backdropFilter:"none",WebkitBackdropFilter:"none",mask:"none",WebkitMask:"none",textShadow:"none",scale:1,rotateX:0,rotateY:0,skewX:0,skewY:0,z:0,padding:0};function JR(){let e={},t={},r={},o={},n={},i={};return[[new jh({fillEnabled:!0,fillType:"color",fillColor:"rgba(0, 0, 0, 0)",borderWidth:0,borderEnabled:!0,borderColor:"rgba(0, 0, 0, 0)",borderStyle:"solid"}),e],[new gg,t],[new cg,r],[new xh({codeComponentIdentifier:"framer/Page"}),o],[new pg,n],[new hg,i]].forEach(([s,l])=>{Id(s,l,{}),Td(s,l,{})}),{FrameNode:Object.assign(e,Xn),TextNode:Object.assign(t,Xn),RichTextNode:Object.assign(r,Xn),CodeComponentNode:Object.assign(o,Xn),SVGNode:Object.assign(n,Xn),ShapeContainerNode:Object.assign(i,Xn)}}var Bb=JR();function zb(e,t,r){if(!(!r||w(e.__class)||Nt(t.style))&&!(!w(t.style)&&!tt(t.style)))for(let o in r){if(w(t.style?.[o])&&w(r[o])||t.style&&o in t.style&&!w(t.style[o])&&!w(r[o]))continue;let n=Bb?.[e.__class];if(!n||!(o in n)){w(r[o])&&(r[o]=p`undefined`);continue}let i=n[o];if(w(t.style?.[o])){let a=t.style??{};a[o]=i,t.style=a}w(r[o])&&(r[o]=i)}}function Yo(e,t,r){let o=e.originalid===t?e.id:op(e.id,t);return r.get(o)}function qR(e){let t=e.children?.find(n=>co(n));if(!t)return;let r=e.itemsOrder?e.itemsOrder.indexOf(t.originalid??t.id):e.children?.indexOf(t);if(!H(r)||r<0||!e.itemsOrder&&e.children&&r===e.children.length-1)return;let o=new Map;return e.itemsOrder?e.itemsOrder.forEach((n,i)=>{if(n===t.originalid)return;let a=i<r?-1e3:1e3;o.set(n,i+a)}):e.children?.forEach((n,i)=>{if(n===t)return;let a=i<r?-1e3:1e3;o.set(n.originalid??n.id,i+a)}),o}function Ub(e,t){if(t==="LayoutTemplate"&&Ee(e))return qR(e);let r=e.itemsOrder;if(!r||r.length<1)return;let o=new Map;return r.forEach((n,i)=>{o.set(n,i)}),o}var XR=e=>(t,r)=>!r||!e?t:{...t,...r[e]};function Gb(e,t,r,o){let{combinedVariableControlMap:n}=e.combineVariableControlMap(r.treeStore.tree,o.inheritedControlMap,P,P.activeBundleHash);t&&(jc(t,e),YR(t,e));let i=yr(e),a=o.subqueries;Le(e)&&mt(e)?a=new tl(e,i?void 0:o.subqueries):_o(e)&&(a=void 0);let s=r.scopeType==="WebPage",l=r.scopeType==="SmartComponent",c=o.inCodeOverride||!w(rl(e,r))||ol(e,r).length>0,m=r.treeStore.tree.get(o.lastRepeaterId),d=r.kitSectionsStructure.addSection(e),u={isAnyVariantAnImage:wt(e),isAnyVariantALink:it(e)&&!nt(e),isAnyVariantAnEffect:Lc(e,r.scopeType),isAnyVariantAVariantAppearEffect:Fc(e),isAnyVariantARef:s&&$o(e)||Et(e)||G(e)&&Le(m)&&Ho(e,m),isAnyVariantATransitionOverride:l&&(Pc(e)||fc(e)),isAnyVariantOptimizedAppearEffect:Ac(e,r),itemsOrderOverrides:{},hiddenInVariants:new Set(o.hiddenInVariants),inCodeOverride:c,inheritedControlMap:n,isAnyVariantFloating:Et(e),isAnyVariantPaginated:i,identifiers:G(e)?new Set([$b(e)]):void 0,subqueries:a,kitSectionId:d};r.trackingIds.add(e),r.kitSectionsStructure.addCustomizations(e,o.kitSectionId),Mr(e)&&r.formIds.add(e.id),r.scopeType==="LayoutTemplate"&&Wa(e)&&Ee(e)&&(u.itemsOrderOverrides[e.id]=Ub(e,r.scopeType));let f=gd(e,r),h=new Map,y=yd(e,r,o,c),S=[],C=xc(e);for(let ee of r.variants){let L=Yo(ee,e.id,r.treeStore.tree);if(!L)continue;L.combineVariableControlMap(r.treeStore.tree,o.inheritedControlMap,P,P.activeBundleHash);let ue=r.treeStore.tree.getParent(L.id);if(u.hiddenInVariants.has(ee.id))continue;ue&&jc(ue,L);let we=Wb(ee),Ye=gd(L,r);if(!vt(Ye,h.get(ee.replicaInfo?.inheritsFrom??"")??f)){let tr=Nr(ee);h.set(we,{value:Ye,isGesture:tr})}else(r.scopeType==="WebPage"||r.scopeType==="LayoutTemplate")&&f!==!0&&h.set(we,{value:f});if(Ye===!1){u.hiddenInVariants.add(ee.id);continue}it(L)&&!nt(L)&&(u.isAnyVariantALink=!0),wt(L)&&(u.isAnyVariantAnImage=!0),Lc(L,r.scopeType)&&(u.isAnyVariantAnEffect=!0),Fc(L)&&(u.isAnyVariantAVariantAppearEffect=!0),Ac(L,r)&&(u.isAnyVariantOptimizedAppearEffect=!0),yr(L)&&(u.isAnyVariantPaginated=!0),G(L)&&u.identifiers?.add($b(L)),r.trackingIds.add(L);let Te=xc(L);if(Te){C||=Te;let{stops:tr,info:Dt}=Te;C.stops=Math.max(C?.stops,tr??0),C.info||=Dt}r.scopeType==="WebPage"?$o(L)&&(u.isAnyVariantARef=!0):r.scopeType==="SmartComponent"&&(eh(L)&&(u.isAnyVariantAnEffect=!0),(Pc(L)||fc(L))&&(u.isAnyVariantATransitionOverride=!0)),Sp(L)&&(u.itemsOrderOverrides[ee.id]=Ub(L,r.scopeType)),y=y||yd(L,r,o,c),S.push({nodeInVariant:L,variant:ee})}w(C)||r.nodesWithAnyGradientFill.set(e.id,C);let{condition:T,classNames:N,classNameExpressions:x}=r.renderFunctions.create(f,h);if(T===!1)return;r.nodeRendersWithMotion.set(e,y);let V=e.parentid?r.renderAsListNodes.get(e.parentid):!1;bo(e)&&Nf(e.htmlTag)&&!V&&r.renderAsListNodes.set(e.id,!0);let F=o?.itemsOrderOverrides?.[r.rootId],{css:j,style:W}=Nd(e,t,r,F?{order:Hb(e,F)}:void 0),K=Cr(e),ce=zC(e,t,r),D=r.css.addRule(j,e,{container:K,hasScopingSelector:ce}),ye=vd(e,r,u,o,{className:D,style:W});r.hitTargets.recordClassName(e,r.rootId,D);let ne={link:void 0,container:void 0,element:void 0,floating:void 0,transition:void 0,fetcher:void 0,componentViewport:void 0},Y={variants:void 0,css:void 0};if(_e(e))for(let ee of e.getStylePresetsForCodeGeneration(r.treeStore.tree))r.css.addSharedStyle(ee.id);let de=K?ye.container:ye.element;g(!w(de),"Target will always be defined if the node needs a container");for(let{nodeInVariant:ee,variant:L}of S){let ue=Wb(L);if(r.hitTargets.recordClassName(ee,L.id,D),_e(ee))for(let ct of ee.getStylePresetsForCodeGeneration(r.treeStore.tree))r.css.addSharedStyle(ct.id);let we=r.treeStore.tree.getParent(ee.id),{itemsOrderOverrides:Ye}=o,Vt=Ye?.[L.id],Te=Nd(ee,we,r,Vt?{order:Hb(e,Vt)}:void 0),tr=XR(L.replicaInfo?.inheritsFrom),Dt=Kr(Te.css,tr(j,Y.css),"css");if(Dt){let ct=Nr(L);Y.css||(Y.css={}),Y.css[L.id]=Dt,r.css.addRule(Dt,ee,{variant:L,hasScopingSelector:ce,container:K,gesture:ct?L.gesture:void 0,scope:ct?L.replicaInfo?.inheritsFrom:r.scopeType==="SmartComponent"?L.id:void 0})}r.scopeType==="SmartComponent"&&zb(ee,de,Te.style);let mr=vd(ee,r,u,o,{className:D,style:de.style}),oo=Kr(Te.style,tr(W,Y.variants));if(oo)if(r.scopeType==="SmartComponent")Y.variants||(Y.variants={}),Y.variants[ue]=oo;else{let ct=K?"container":"element";ne[ct]=QR(Te.style,ne[ct],ue)}let lt;for(lt in mr){let ct=Kr(mr[lt],tr(ye[lt],ne[lt]),"js");if(!ct)continue;ne[lt]||(ne[lt]={[ue]:{}});let te=ne[lt][ue];ne[lt][ue]=tt(te)?Object.assign(te,ct):ct}}let ae=new Set(N);u.isAnyVariantALink&&ae.add(r.linkClassName);let Ie=new v.Set(x),je=u.isAnyVariantARef||r.events.relativeOverlayPrimaryTriggers.has(e.id);return O.assign(de,{variants:Y.variants,className:KR(de.className,ae,Ie,r.imports),ref:de.ref??(je?r.elementIds.ref(e):de.ref),[ju]:u.isAnyVariantOptimizedAppearEffect?r.appearIds.create(e.id):void 0}),r.renderConditions.set(e.id,T),{...u,propsForLink:{props:ye.link,overrides:ne.link},propsForElement:{props:ye.element,overrides:ne.element},propsForContainer:{props:ye.container,overrides:ne.container},propsForTransition:{props:ye.transition,overrides:ne.transition},propsForFetcher:{props:ye.fetcher,overrides:ne.fetcher},renderCondition:T,propsForFloating:{props:ye.floating,overrides:ne.floating},propsForComponentViewport:{props:ye.componentViewport,overrides:ne.componentViewport}}}function KR(e,t,r,o){if(t.size===0&&r.size===0)return e;if(r.size===0){let n=Array.from(t).join(" ");return e?he`${e} ${n}`:n}else{let n=o.addImport("framer",{exportSpecifier:"cx"});return e?v.fn(n,e,...t,...r):v.fn(n,...t,...r)}}function YR(e,t){t.cache.ancestorRepeaterIds=Bs(e,e.cache.ancestorRepeaterIds??[])}function Wb(e){return Nr(e)?`${e.replicaInfo.inheritsFrom}-${e.gesture}`:e.id}function QR(e,t,r){let o=t??{};return o[r]=o[r]??{},o[r].style=o[r].style??{},Object.assign(o[r].style,e),o}function jb(e,t,r){let o={background:"transparent",height:0,width:0,position:"relative",flexGrow:1,margin:0,marginBottom:En(t,r)};for(let n of r.variants){let i=Yo(n,e.id,r.treeStore.tree);if(!i)continue;let a=Kr({...o,marginBottom:En(n,r)},o);!a||xe(a)||r.css.addRule(a,i,{variant:n})}return r.css.addRule(o,e)}function $b(e){return fn(e)?Pp:e.codeComponentIdentifier}function Hb(e,t){return t.get(e.id)??t.size}var al=class{constructor(){I(this,"cssWidthCache",new Map);I(this,"heightCache",new Map);I(this,"yPositionCache",new Map);I(this,"verticalStackLayoutInfoCache",new Map);I(this,"gridLayoutInfoCache",new Map);I(this,"computationCache",new Map);I(this,"testing",{getCSSWidthCache:()=>this.cssWidthCache,getHeightCache:()=>this.heightCache})}getCSSWidth(t){return this.cssWidthCache.get(t)}setCSSWidth(t,r){this.cssWidthCache.set(t,r)}getHeight(t){return this.heightCache.get(t)}setHeight(t,r){this.heightCache.set(t,r)}getYPosition(t){return this.yPositionCache.get(t)}setYPosition(t,r){this.yPositionCache.set(t,r)}getVerticalStackLayoutInfo(t){return this.verticalStackLayoutInfoCache.get(t)}setVerticalStackLayoutInfo(t,r){this.verticalStackLayoutInfoCache.set(t,r)}getGridLayoutInfo(t){return this.gridLayoutInfoCache.get(t)}setGridLayoutInfo(t,r){this.gridLayoutInfoCache.set(t,r)}memo(t,r){if(this.computationCache.has(t))return this.computationCache.get(t);let o=r();return this.computationCache.set(t,o),o}};var wd=class{constructor(){I(this,"heightNodes",new Set)}startComputingHeightFor(t){this.heightNodes.add(t)}isComputingHeightFor(t){return this.heightNodes.has(t)}finishComputingHeightFor(t){this.heightNodes.delete(t)}};function ZR(e,t){return(r,o,n=void 0)=>{if(Ft(r))return t.createComputedValue(r,o,n);if(me(r))return e.create(r);Pt(r,"all dynamic values should be handled above")}}function _b(e,t,r){return{tree:e,cache:new al,workInProgress:new wd,getVariableBinding:ZR(t,r)}}var q=class extends Error{};function X(e,t){let r=Math.round(e*1e4)/1e4;return{type:"css-const",expr:t?`${r}${t}`:`${r}`,value:e,unit:t}}var sl={"+":"-","-":"+","*":"/","/":"*"};function ge(e,t,r){if(t.type==="css-const"&&r.type==="css-const"){if(t.unit===r.unit){if(e==="+")return X(t.value+r.value,t.unit);if(e==="-")return X(t.value-r.value,t.unit);if(e==="min")return X(Math.min(t.value,r.value),t.unit);if(e==="max")return X(Math.max(t.value,r.value),t.unit)}else if(Kn(e)&&(t.value===0||r.value===0))return r.value!==0?r:t;if(e==="*"&&(!t.unit||!r.unit))return X(t.value*r.value,t.unit||r.unit);if(e==="/"&&!r.unit)return X(t.value/r.value,t.unit)}if(Kn(e)){if(r.type==="css-const"&&r.value===0)return t;if(t.type==="css-const"&&t.value===0)return r}else if(ll(e)){if(r.type==="css-const"&&r.value===1)return t;if(t.type==="css-const"&&t.value===1)return r}else if(e==="min"||e==="max"){if(t.type==="css-op"&&t.op===e&&Jb(t,r))return t;if(r.type==="css-op"&&r.op===e&&Jb(r,t))return r;if(vt(t.expr,r.expr))return t}t.type==="css-op"&&t.right.type==="css-const"&&(Kn(e)&&Kn(t.op)?(r=ge(e==="+"?t.op:sl[t.op],r,t.right),t=t.left):ll(e)&&ll(t.op)&&(r=ge(e==="*"?t.op:sl[t.op],r,t.right),t=t.left));let o;if(Kn(e))r.type==="css-const"&&r.value<0&&(e=sl[e],r=X(-r.value,r.unit)),e==="+"?o=he`${Qo(t)} + ${r.expr}`:e==="-"?r.type==="css-op"&&!cl(r.op)?o=he`${Qo(t)} - (${r.expr})`:o=he`${Qo(t)} - ${Qo(r)}`:Pt(e);else if(ll(e)){if(r.type==="css-const"&&r.value<1){let n=X(1/r.value,r.unit);n.expr.length<r.expr.length&&(e=sl[e],r=n)}e==="/"&&r.type==="css-op"&&!cl(r.op)?o=he`${Qo(t)} / (${r.expr})`:o=he`${Qo(t)} ${e} ${Qo(r)}`}else cl(e)?o=he`${e}(${t.expr}, ${r.expr})`:Pt(e,`unhandled op ${e}`);return{type:"css-op",expr:o,op:e,left:t,right:r}}function dl(e){switch(e.type){case"number-const":return X(e.value,"px");case"number-template":return Ro(e.expr);default:Pt(e)}}function Ro(e){return{type:"css-template",expr:e}}function Kn(e){return e==="+"||e==="-"}function ll(e){return e==="*"||e==="/"}function cl(e){return e==="min"||e==="max"}function Jb(e,t){return vt(e.left.expr,t.expr)||vt(e.right.expr,t.expr)}function Qo(e){return e.type==="css-op"&&Kn(e.op)?he`(${e.expr})`:e.expr}function ul(e){return e.type==="css-template"||e.type==="css-const"||e.type==="css-op"&&cl(e.op)?e.expr:he`calc(${e.expr})`}function ex(e,t,r,o,n,i){let a=t??Kf;if(!i)return!0;let s=e.filters.filter(l=>{if(!l.itemKey)return!1;let c=i.properties[l.itemKey];return!(!c||c.type!=="boolean"&&l.transforms.length===0)});return s.length===0?!0:s[a==="all"?"every":"some"](l=>{let c=l.itemKey;g(c!==null,"itemKey should not be null");let m=i.properties[c];g(m,"control should exist");let d=r(c),u=o.getVariableControlByKey(c);return l.transforms.reduce((f,h)=>Bm(f,h,o,n,u,void 0,void 0),d)})}function qb(e,t,r,o,n,i){return e?r.filter(a=>ex(e,t,s=>a[s],o,n,i)):r}function tx(e,t){return t?Array.from(e).reverse():e}function rx(e,t){if(t===void 0||t===0)return e;let r=Array.from(e);return r.splice(0,t),r}function ox(e,t){return e.length<=t?e:e.slice(0,t)}function Xb(e,t,r,o,n=15){if(n&1&&(t=qb(e.collectionFilters,e.collectionFiltersOperator,t,e.cache,r,o)),n&2&&(t=tx(t,e.collectionReverse)),n&4&&(t=rx(t,e.collectionStartOffset)),n&8){let i=e.collectionLimit??1/0,a=e.collectionPaginationPageSize??1/0,s=Math.min(i,a);t=ox(t,s)}return t}var Kt=1e3,Kb=Symbol("Affects Layout: Indeterminate");function ml(e){return e===Kb}function Yr(e,t,r,o){return Tt(e)||ja(e,t)&&Uo(e)||Ga(r,e)&&ar(e)||vi(e)&&e.visible===!1?!1:vi(e)&&k(e.visible)?o?e.isVisible():Kb:!0}function Xe(e){if(!fi(e))return 0;if(k(e.padding))throw new q;return e.paddingPerSide?e.paddingTop??0:e.padding??0}function zt(e){if(!fi(e))return 0;if(k(e.padding))throw new q;return e.paddingPerSide?e.paddingBottom??0:e.padding??0}function Gt(e){return k(e)?0:e??0}var nx=[];function xo(e){let t=(Wa(e)?e.getChildrenInVisualOrder():e.children)??nx;if(Le(e)){let r=e.collectionRepeatedItemId?t.findIndex(i=>i.id===e.collectionRepeatedItemId):0,o=t[r];if(!o)return t;let n=ix(e);return t.slice(0,r).concat(Array(n).fill(o)).concat(t.slice(r+1))}return t}function ix(e){if((e.collectionFilters?.filters?.length??0)>0)return 1;let t=P.dataForIdentifier(e.dataIdentifier),r=Zp(void 0,t),o=Object.keys(r).length,n=Array(o).fill({});return Xb(e,n,void 0,t,14).length}function Ai(e){let t=e.resolveValue("fillImage"),r=nm(t)?t.src:t;if(!r)return;let o=sf(r);if(!(!o||!Number.isFinite(o.width)||!Number.isFinite(o.height)||o.width<=0||o.height<=0))return o.width/o.height}function pl(e,t){let r=e.widthType===0,o=ho(e)&&e.usesDOMRectCached()&&e.cache.getRawDOMRect(e.id)!==null;if(!(!r&&!o))return t.tree.getRect(e).width}var Qb=";";function xd(e,t){return`${e}${Qb}${t}`}function ax(e){let[t,r]=e.split(Qb);return g(r!==void 0,"parseCellCoordinate(), satisfying TypeScript: columnIndex must exist: "+e),[Number(t),Number(r)]}function Yb(e,t,r,o){let n=0;for(let i=0;i<r;i++){let a=xd(t,i);if(e.has(a)){n=0;continue}if(n++,n!==o)continue;let l=i-(o-1);return g(l>=0,"getColumnIndexForItem(), column index should be at least 0"),l}return-1}function sx(e,t,r,o,n,i,a){let s=o+(i-1);g(a>s,"fillCellsForItem(), column count has to be larger than maxColumnIndex");let l=r+(n-1);for(let c=o;c<=s;c++)for(let m=r;m<=l;m++){let d=xd(m,c);t.set(d,e)}}function lx(e,t){return!Eo(e)||k(e.gridItemColumnSpan)?1:e.gridItemColumnSpan==="all"?t:Math.min(e.gridItemColumnSpan??1,t)}function fl(e,t){return!Eo(e)||t.gridRowHeightType==="fit"||k(e.gridItemRowSpan)?1:e.gridItemRowSpan??1}var Rd=class{constructor(t,r,o,n){this.gridLayout=t;this.rowCount=r;this.columnCount=o;this.filledRowCount=n;I(this,"coordinateCache")}getGridItem(t,r){let o=xd(t,r);return this.gridLayout.get(o)??null}findCoordinates(t){if(!this.coordinateCache){this.coordinateCache=new Map;for(let[r,o]of this.gridLayout){let[n,i]=ax(r),a=this.coordinateCache.get(o);(!a||n<a.rowIndex||i<a.columnIndex)&&this.coordinateCache.set(o,{rowIndex:n,columnIndex:i})}}return this.coordinateCache.get(t)??null}isEmpty(){return this.gridLayout.size===0}};function Zb(e,t){let r=e.gridColumnCount;if(!H(r))return null;let o=new Map,n=0,i=-1;for(let l of xo(e)){if(!Yr(l,e,t,!0))continue;let c=lx(l,r),m=fl(l,e),d=Yb(o,n,r,c);for(;d===-1;)n++,d=Yb(o,n,r,c);sx(l.id,o,n,d,m,c,r);let u=n+(m-1);i=Math.max(i,u)}let a=i+1,s=Math.max(e.gridRowCount??0,a);return new Rd(o,s,r,a)}function Zo(e,t){let r=t.cache.getGridLayoutInfo(e.id);if(r)return r;let o=Zb(e,t.tree);if(o===null)throw new q;return t.cache.setGridLayoutInfo(e.id,o),o}function Q_(e,t){return Zb(e,t)?.filledRowCount}var cx={type:"number-const",value:0},dx={type:"number-const",value:1/0},ux={type:"number-const",value:Kt};function _(e){return e===0?cx:e===1/0?dx:e===Kt?ux:{type:"number-const",value:hx(e)}}function M(e,...t){return hl(e,0,t.length,t)}function hl(e,t,r,o){Ao(0<=t&&t<=r&&r<=o.length,"start and end must be within the bounds of operands");let n=r-t;if(n===0)return null;if(n===1){let c=o[t];return ha(c)?_(c):c}let{hasTemplateOperands:i,operationResult:a}=mx(t,r,o,e);if(!i)return _(a);let s=px(t,r,o),l=e==="min"||e==="max"?v.fn(p`Math.${new v(e)}`,...s):new v(`(${re(s,` ${e} `)})`);return Li(l,a,!0)}function mx(e,t,r,o){let n=!1,i;for(let a=e;a<t;a++){let s=r[a],l;ha(s)?l=s:s.type==="number-const"?l=s.value:s.type==="number-template"?(n=!0,l=Ut(s)):Pt(s),w(i)?i=l:i=fx(o,i,l)}return Ao(i!==void 0,"resultEstimate must be computed after walking over all operands"),{hasTemplateOperands:n,operationResult:i}}function px(e,t,r){let o=[];for(let n=e;n<t;n++){let i=r[n];ha(i)?o.push(p`${i}`):i.type==="number-const"?o.push(p`${i.value}`):o.push(i.expr)}return o}function Li(e,t,r=!1){return{type:"number-template",expr:r?e:p`(${e})`,impreciseEstimate:t}}function fx(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r;case"min":return Math.min(t,r);case"max":return Math.max(t,r);default:Pt(e)}}function hx(e){return Math.round(e*1e4)/1e4}function Ut(e){return e.type==="number-const"?e.value:e.impreciseEstimate}var Md=class{constructor(t,r,o,n,i){this.columns=t;this.nodeToAccurateCoordinateMap=r;this.nodeToRoughCoordinateMap=o;this.gap=n;this.contentHeight=i;I(this,"frToPxCache",new Map)}walkColumn(t,r){if(this.columns[t])for(let o of this.columns[t])r(o.nodeId)}getStackItem(t,r){return this.columns[t]?.[r]?.nodeId??null}findCoordinates(t){return this.findAccurateCoordinates(t)??this.findRoughCoordinatesOfConditionallyVisibleNode(t)}findAccurateCoordinates(t){return this.nodeToAccurateCoordinateMap.get(t)??null}findRoughCoordinatesOfConditionallyVisibleNode(t){return this.nodeToRoughCoordinateMap.get(t)??null}getFrToPxForColumn(t){let r=this.columns[t];if(!r)return null;if(!this.frToPxCache.has(t)){let o=[],n=[];for(let m of r)m.type==="regular"?o.push(m):m.type==="fr"?n.push(m):Pt(m);let i=o.reduce((m,d)=>M("+",m,d.getHeight()),_(0)),a=this.gap*(r.length-1),s=M("-",this.contentHeight,M("+",i,a)),l=n.reduce((m,d)=>m+d.frUnits,0),c=M("/",s,Math.max(l,1));for(n=n.sort((m,d)=>Ut(d.getMinHeightPerFr())-Ut(m.getMinHeightPerFr()));n[0]&&Ut(n[0].getMinHeightPerFr())>Ut(c);)s=M("-",s,n[0].getMinHeight()),l-=n[0].frUnits,c=M("/",s,Math.max(l,1)),n.shift();for(n=n.sort((m,d)=>Ut(m.getMaxHeightPerFr())-Ut(d.getMaxHeightPerFr()));n[0]&&Ut(n[0].getMaxHeightPerFr())<Ut(c);)s=M("-",s,n[0].getMaxHeight()),l-=n[0].frUnits,c=M("/",s,Math.max(l,1)),n.shift();this.frToPxCache.set(t,M("max",_(0),c))}return this.frToPxCache.get(t)??null}};function gl(e,t,r,o,n){let i=t.cache.getVerticalStackLayoutInfo(e.id);if(i)return i;let a=gx(e,t,r,o,n);return t.cache.setVerticalStackLayoutInfo(e.id,a),a}function gx(e,t,r,o,n){let i=Vd(e),a=Ct(i),s=M("-",r(e),Xe(e)+zt(e)),l=Ut(s),c=new Map,m=new Map,d=[],u=0;for(let f of xo(e)){if(!(Je(f)&&st(f)))continue;let h=Yr(f,e,t.tree,!1);if(h===!1)continue;if(ml(h)){m.set(f.id,{columnIndex:Math.max(d.length-1,0),columnItemIndex:Math.max(d[d.length-1]?.length??0,0)});continue}let y=yx(f,t,r,o,n);if(e.stackWrapEnabled){let C=Ut(y.type==="fr"?y.getMinHeight():y.getHeight());Math.ceil(u+a+C)>Math.ceil(l)||d.length===0?(d.push([y]),u=C):(d[d.length-1].push(y),u+=a+C)}else d[0]=d[0]??[],d[0].push(y);c.set(f.id,{columnIndex:d.length-1,columnItemIndex:d[d.length-1].length-1})}return new Md(d,c,m,a,s)}function yx(e,t,r,o,n){if(e.heightType===3){let i={nodeId:e.id,type:"fr",frUnits:e.height,getMinHeight:()=>t.cache.memo(`stack-getMinHeight-${e.id}`,()=>o(e)),getMaxHeight:()=>t.cache.memo(`stack-getMaxHeight-${e.id}`,()=>n(e)),getMinHeightPerFr:()=>t.cache.memo(`stack-getMinHeightPerFr-${e.id}`,()=>M("/",i.getMinHeight(),i.frUnits)),getMaxHeightPerFr:()=>t.cache.memo(`stack-getMaxHeightPerFr-${e.id}`,()=>M("/",i.getMaxHeight(),i.frUnits))};return i}else return{nodeId:e.id,getHeight:()=>t.cache.memo(`stack-getHeight-${e.id}`,()=>r(e)),type:"regular"}}function Vd(e){return va(e)?Gt(e.gap):0}function ev(e,t){if(e.textFitViewBoxSize)throw new q;let r=e.widthType!==2,o=0;for(let[n,i]of e.getProsemirrorTextBlocks(!1).entries()){let a,[s,l]=bx(i,t);if(l==="px")a=s;else{let d=l==="%"?s/100:s;a=Sx(i,t)*d}let c=0;n>0&&(c=vx(i,e,t)??0);let m=1;if(r){let d=i.attrs.tag;d==="h1"||d==="h2"||d==="h3"||d==="h4"||d==="h5"||d==="h6"?m=1:d==="p"||d==="div"?m=5:Pt(d)}o+=c+a*m}return o}function Sx(e,t){let r=Cx(e,t);return e.descendants(o=>{if(!Ba(o))return;let i=o.marks.find(go)?.attrs.inlineStyles.fontSize;if(k(i))throw new q;if(w(i))return;let[a,s="px"]=cc(i)?i:[i],l=dc(a,s,"px");l>r&&(r=l)}),r}function Cx(e,t){if(Hr(e)){let r=e.attrs.textStylePreset,o=t.getNodeWithTrait(r,lo);if(o){let[n,i]=mi(o.fontSize)?uo(o.fontSize):[o.fontSize,"px"];return i==="rem"?Ru(n*xa,0):n}}if(!w(e.attrs.inlineStyles.fontSize)){let r=e.attrs.inlineStyles.fontSize;if(k(r))throw new q;let[o,n="px"]=cc(r)?r:[r];return dc(o,n,"px")}return uo(uc.fontSize)[0]}function bx(e,t){if(Hr(e)){let r=e.attrs.textStylePreset,o=t.getNodeWithTrait(r,lo);if(o)return o.lineHeight}return w(e.attrs.blockStyles.lineHeight)?uc.lineHeight:e.attrs.blockStyles.lineHeight}function vx(e,t,r){if(Hr(e)){let o=e.attrs.textStylePreset,n=r.getNodeWithTrait(o,lo);if(n)return n.paragraphSpacing}return t.paragraphSpacing}var Ix=fe("simulateHeight"),Tx=200;function tv(e,t){try{let r=be(e,t);return r.type==="number-const"?r.value:r.expr}catch(r){if(r instanceof q)return;Ix.reportError(r,{nodeId:e.id});return}}function be(e,t){let r=t.cache.getHeight(e.id);if(r!==void 0)return r;if(t.workInProgress.isComputingHeightFor(e.id))throw new Error("Detected a circular walk in simulateHeight(): we\u2019re entering a node which is already being computed. This would result in a call stack overflow. Exiting early.");let o;try{t.workInProgress.startComputingHeightFor(e.id),o=Nx(e,t)}finally{t.workInProgress.finishComputingHeightFor(e.id)}return t.cache.setHeight(e.id,o),o}function Nx(e,t){if(!Dn(e))throw new q;let r=t.tree.getNodeParent(e);if(De(e))return _(Kt);if(g(Je(e)&&st(e),"Can\u2019t calculate the height on a node when it doesn\u2019t have size information"),yn(e)){let n=t.tree.getRect(e).height;return Li(p`${R.componentViewport}?.height || ${n}`,n)}if(Sc(e))return Be.startFromRowHeightMultipliedBySpan(e,t).getWithConstraints();if(!wn(e,r)&&yt(e)&&e.top!==null&&e.bottom!==null)return(ar(e)?Be.startFromFixedValue(_(Kt),e,t):Be.startFromParentOuterHeight(e,t)).op((i,a)=>{let s=a.top,l=a.bottom;return g(s!==null&&l!==null,"Satisfying TypeScript"),M("-",i,_(s+l))}).getWithConstraints();if(e.heightType===0)return Be.startFromFixedValue(_(e.height),e,t).getWithConstraints();if(e.heightType===1){g(r,"A node can\u2019t have a % height without a parent");let n;return ar(e)?n=Be.startFromFixedValue(_(Kt),e,t):Uo(e)?n=Be.startFromParentOuterHeight(e,t):At(r)&&Eo(e)?n=Be.startFromRowHeightMultipliedBySpan(e,t):n=Be.startFromParentInnerHeight(e,t),n.op((i,a)=>M("*",i,_(a.height))).getWithConstraints()}if(e.heightType===4)return Be.startFromFixedValue(_(e.height*Kt),e,t).getWithConstraints();if(e.heightType===3){if(g(!Uo(e)&&!ar(e),"FractionOfFreeSpace height is not supported for fixed or absolute node"),g(r,"A node can\u2019t have a fractional height without a parent"),!Ur(r)&&At(r)){let n=yl(e,t);if(!n)throw new q;return n}if(g(Ur(r),"A node can have a fractional height only if it\u2019s inside a stack"),g(r.stackDirection,"A stack must have a direction defined"),k(r.stackDirection))throw new q;if(r.stackDirection==="horizontal")return Be.startFromParentInnerHeight(e,t).op((n,i)=>M("*",n,_(i.height))).getWithConstraints();if(r.stackDirection==="vertical"){g(Je(r)&&st(r),"A stack must have a size and size-dimension type");let n=gl(r,t,l=>be(l,t),l=>Sl(l,t),l=>Cl(l,t)),i=n.findCoordinates(e.id);g(i,"Node must be found in stack");let a=n.getFrToPxForColumn(i.columnIndex);g(a,"frHeight must be available for column");let s=M("*",a,_(e.height));return Be.startFromFixedValue(s,e,t).getWithConstraints()}z(r.stackDirection)}if(e.heightType===2){let n=yl(e,t);if(!n)throw new q;return n}if(e.heightType===5){if(!wt(e))throw new q;let n=Ai(e),i=pl(e,t),a=w(i)||w(n)?e.height:Math.round(i*(1/n));return Be.startFromFixedValue(_(a),e,t).getWithConstraints()}z(e.heightType)}var Qr,Ei,Yn,Oi,Yt,Dd,kd,rv,Pd,jt=class jt{constructor(t,r,o,n){$(this,Qr);$(this,Ei);$(this,Yn);$(this,Oi);ie(this,Qr,t),ie(this,Ei,r),ie(this,Yn,o),ie(this,Oi,n)}static startFromFixedValue(t,r,o){return new jt(t,()=>{var i,a;let n=o.tree.getNodeParent(r);if(g(n,"Can\u2019t calculate the parent height on a node without a parent"),g(Je(n)&&st(n),"Can\u2019t calculate the parent height on a node when a parent doesn\u2019t have size information"),At(n)){let s=Ze(i=jt,Yt,Dd).call(i,r,n,o);return Ze(a=jt,Yt,kd).call(a,s,r,n)}else return be(n,o)},r,o)}static startFromParentOuterHeight(t,r){let o=r.tree.getNodeParent(t);g(o,"Can\u2019t call startFromParentOuterHeight() on a node without a parent");let n=be(o,r);return new jt(n,()=>n,t,r)}static startFromParentInnerHeight(t,r){let o=r.tree.getNodeParent(t);g(o,"Can\u2019t call startFromParentInnerHeight() on a node without a parent");let n=M("-",be(o,r),Xe(o)+zt(o));return new jt(n,()=>n,t,r)}static startFromRowHeightMultipliedBySpan(t,r){var a,s;let o=r.tree.getNodeParent(t);g(o&&At(o),"Can\u2019t call startFromColumnHeightMultipliedBySpan() if the node isn\u2019t inside a grid");let n=Ze(a=jt,Yt,Dd).call(a,t,o,r),i=Ze(s=jt,Yt,kd).call(s,n,t,o);return new jt(i,()=>i,t,r)}op(t){return ie(this,Qr,t(b(this,Qr),b(this,Yn))),this}getWithConstraints(){var t;return ie(this,Qr,Ze(t=jt,Yt,rv).call(t,b(this,Qr),b(this,Yn),b(this,Oi),b(this,Ei))),b(this,Qr)}};Qr=new WeakMap,Ei=new WeakMap,Yn=new WeakMap,Oi=new WeakMap,Yt=new WeakSet,Dd=function(t,r,o){if(g(r.gridRowHeightType!==void 0,"A grid node must have gridRowHeightType defined"),r.gridRowHeightType==="fixed")return g(r.gridRowHeight!==void 0,"A fixed-height grid node must have gridRowHeight defined"),_(r.gridRowHeight);if(r.gridRowHeightType==="fit"){let n=Zo(r,o);if(n.isEmpty())return _(0);let i=n.findCoordinates(t.id);g(i,"Node must be found in the grid layout");let a=i.rowIndex;return ov(o,n,a)}else if(r.gridRowHeightType==="auto"){let n=be(r,o),i=M("-",n,Xe(r)+zt(r)),a=Zo(r,o).rowCount,s=Gt(r.gap),l=Ct(s),c=(a-1)*l;return M("/",M("-",i,c),a)}else z(r.gridRowHeightType)},kd=function(t,r,o){let n=fl(r,o),i=Gt(o.gap),a=Ct(i);return M("+",M("*",t,n),a*(n-1))},rv=function(t,r,o,n){var a,s;let i=t;return yo(r)&&(r.maxHeight&&(i=Ze(a=jt,Yt,Pd).call(a,"maxHeight",i,r,o,n)),r.minHeight&&(i=Ze(s=jt,Yt,Pd).call(s,"minHeight",i,r,o,n))),i},Pd=function(t,r,o,n,i){let a=t==="minHeight"?"max":"min",[s,l]=hi(o[t]);if(l==="%"){let c=n.tree.getNodeParent(o);if(g(c,"parentNode must exist for a node with percentage min-max heights"),st(c)&&c.heightType===2)return r;let m=i();return M(a,r,M("*",m,s/100))}else{if(l==="px")return M(a,r,s);if(l==="vh")return M(a,r,Kt*s/100);z(l)}},$(jt,Yt);var Be=jt;function yl(e,t){return t.cache.memo(`autoHeight-${e.id}`,()=>wx(e,t))}function wx(e,t){if(_e(e)){let r=ev(e,t.tree);return Be.startFromFixedValue(_(r),e,t).getWithConstraints()}if(G(e)){let r=e.getIntrinsicSize(P).height??Tx;return Be.startFromFixedValue(_(r),e,t).getWithConstraints()}if(Ur(e)){if(g(e.stackDirection,"A stack must have a direction defined"),k(e.stackDirection))throw new q;if(e.stackDirection==="horizontal"){if(e.stackWrapEnabled)throw new q;{let r=Rx(e,t);return Be.startFromFixedValue(r,e,t).op((o,n)=>M("+",o,Xe(n)+zt(n))).getWithConstraints()}}else if(e.stackDirection==="vertical"){let r=xx(e,t),o=Mx(e,t,r);return Be.startFromFixedValue(o,e,t).op((n,i)=>M("+",n,Xe(i)+zt(i))).getWithConstraints()}else z(e.stackDirection)}if(At(e)){if(g(e.gridColumnCount!==void 0,"A grid node must have gridColumnCount"),e.gridColumnCount==="auto-fill")throw new q;if(H(e.gridColumnCount)){g(e.gridRowHeightType!==void 0,"A grid must have gridRowHeightType defined");let r=Zo(e,t);if(e.gridRowHeightType==="fixed"){g(e.gridRowHeight!==void 0,"A node with gridRowHeightType: fixed must have gridRowHeight defined");let o=r.rowCount,n=Gt(e.gap),i=Ct(n),a=(r.rowCount-1)*i,l=e.gridRowHeight*o+a;return Be.startFromFixedValue(_(l),e,t).op((c,m)=>M("+",c,Xe(m)+zt(m))).getWithConstraints()}else if(e.gridRowHeightType==="fit"){let o=_(0);for(let l=0;l<r.rowCount;l++){let c=ov(t,r,l);o=M("+",o,c)}let n=Gt(e.gap),i=Ct(n),a=(r.rowCount-1)*i,s=M("+",o,a);return Be.startFromFixedValue(s,e,t).op((l,c)=>M("+",l,Xe(c)+zt(c))).getWithConstraints()}else if(e.gridRowHeightType==="auto"){let o=_(0);for(let c=0;c<r.rowCount;c++)for(let m=0;m<r.columnCount;m++){let d=r.getGridItem(c,m);if(!d)continue;let u=t.tree.getNode(d);if(g(u,"Can\u2019t find grid item in the tree"),!Je(u)||!st(u))continue;let f;u.heightType===1||Sc(u)?f=yl(u,t)??_(0):f=be(u,t);let h=fl(u,e);if(h>1){let y=Gt(e.gap),C=Ct(y)*(h-1);f=M("/",M("-",f,C),h)}o=M("max",o,f)}let n=M("*",o,r.rowCount),i=Gt(e.gap),a=Ct(i),s=(r.rowCount-1)*a,l=M("+",n,s);return Be.startFromFixedValue(l,e,t).op((c,m)=>M("+",c,Xe(m)+zt(m))).getWithConstraints()}else z(e.gridRowHeightType)}z(e.gridColumnCount)}return null}function Rx(e,t){let r=_(0);for(let o of e.children??[])!Je(o)||!st(o)||Yr(o,e,t.tree,!0)&&(o.heightType===1||o.heightType===3||(r=M("max",r,be(o,t))));return r}function xx(e,t){if(Je(e)&&yo(e)&&e.maxHeight!==void 0&&e.stackWrapEnabled){let r=Cl(e,t),o=M("-",r,Xe(e)+zt(e));return Ut(o)}return 1/0}function Mx(e,t,r){let o=Vd(e),n=Ct(o),i=[];for(let s of xo(e)){if(!Je(s)||!st(s)||!Yr(s,e,t.tree,!0))continue;let l;switch(s.heightType){case 3:l=Sl(s,t);break;case 1:l=_(0);break;case 0:case 2:case 4:case 5:l=be(s,t);break;default:z(s.heightType)}let c=i[i.length-1]??_(0),m=M("+",c,n,l);Math.ceil(Ut(m))>Math.ceil(r)||i.length===0?i.push(l):i[i.length-1]=m}return M("max",...i)??_(0)}function ov(e,t,r){let o=_(0);for(let n=0;n<t.columnCount;n++){let i=t.getGridItem(r,n);if(!i)continue;let a=e.tree.getNode(i);if(g(a,"Can\u2019t find grid item in the tree"),!Je(a)||!st(a))continue;let s=a.heightType===1?yl(a,e)??_(0):be(a,e);o=M("max",o,s)}return o}function Sl(e,t){let r=_(0);return Je(e)?Be.startFromFixedValue(r,e,t).getWithConstraints():r}function Cl(e,t){let r=_(1/0);return Je(e)?Be.startFromFixedValue(r,e,t).getWithConstraints():r}var Vx=fe("simulateCSSWidth");function av(e,t){try{let r=Bi(e,t);return ul(r)}catch(r){if(r instanceof q)return;Vx.reportError(r,{nodeId:e.id});return}}function Bi(e,t){let r=t.cache.getCSSWidth(e.id);if(r)return r;let o=Dx(e,t);return t.cache.setCSSWidth(e.id,o),o}function Dx(e,t){if(!Dn(e))throw new q;let r=t.tree.getNodeParent(e);if(De(e))return X(100,"vw");if(g(Je(e)&&st(e),`Can\u2019t calculate the width on a node ${e.id} when it doesn\u2019t have size information`),t.tree.isGroundNode(e)){if(Ee(e)&&pe(t.tree.getScopeNodeFor(e)))return X(100,"vw");if(yn(e)||Ee(e)){let n=X(100,"vw");return Ro(p`${R.componentViewport}?.width || ${n.expr}`)}else{let n=pl(e,t);if(w(n))throw new q;return X(n,"px")}}if(Zm(e))return Mt.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(!wn(e,r)&&yt(e)&&e.left!==null&&e.right!==null)return Mt.startFromParentOuterWidth(e,t).op((n,i)=>{let a=i.left,s=i.right;return g(a!==null&&s!==null,"Satisfying TypeScript"),ge("-",n,X(a+s,"px"))}).getWithConstraints();if(pp(e)&&yt(e)&&H(e.aspectRatio)&&$f(e)==="width"){let n=be(e,t),i=ge("*",dl(n),X(e.aspectRatio));return Mt.startFromRawValue(i,e,t).getWithConstraints()}if(e.widthType===0)return Mt.startFromRawValue(X(e.width,"px"),e,t).getWithConstraints();if(e.widthType===1){g(r,"A node can\u2019t have a % width without a parent");let n;return ar(e)?n=Mt.startFromRawValue(X(100,"vw"),e,t):Uo(e)?n=Mt.startFromParentOuterWidth(e,t):At(r)?n=Mt.startFromColumnWidthMultipliedBySpan(e,t):n=Mt.startFromParentInnerWidth(e,t),n.op((i,a)=>ge("*",i,X(a.width))).getWithConstraints()}if(e.widthType===3){let n=t.tree.getNodeParent(e);if(g(n,"A node can\u2019t have a fractional width without a parent"),At(n))return Mt.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(g(Ur(n),"A node can have a fractional width only if it\u2019s inside a stack"),g(n.stackDirection,"A stack must have a direction defined"),n.stackDirection==="horizontal")return nv(e,n.stackWrapEnabled??!1,t);if(n.stackDirection==="vertical")return iv(e,t);if(k(n.stackDirection)){let i=nv(e,n.stackWrapEnabled??!1,t),a=iv(e,t);if(vt(i,a))return i;let s=t.getVariableBinding(n.stackDirection,n);if(!s)throw new q;let l=p`${s} === "row"`,c=p`${l} ? ${ul(i)} : ${ul(a)}`;return Ro(c)}z(n.stackDirection)}if(e.widthType===2){if(yo(e)&&e.maxWidth){let[n,i]=hi(e.maxWidth);return X(n,i)}throw new q}if(e.widthType===4){let n=X(e.width*100,"vw");return Mt.startFromRawValue(n,e,t).getWithConstraints()}if(e.widthType===5){if(!wt(e))throw new q;let n=Ai(e),i=be(e,t),a=w(i)||w(n)?X(e.width,"px"):ge("*",dl(i),X(n));return Mt.startFromRawValue(a,e,t).getWithConstraints()}z(e.widthType)}function nv(e,t,r){return t?Mt.startFromParentInnerWidth(e,r).getWithConstraints():Mt.startFromParentInnerWidth(e,r).subtractSiblingWidths().getWithConstraints()}function iv(e,t){return Mt.startFromParentInnerWidth(e,t).op((r,o)=>ge("*",r,X(o.width))).getWithConstraints()}var Se,Qn,cr,Mo,dr,sv,lv,Fd,Ad,Qt=class Qt{constructor(t,r,o,n){$(this,Se);$(this,Qn);$(this,cr);$(this,Mo);ie(this,Se,t),ie(this,Qn,r),ie(this,cr,o),ie(this,Mo,n)}static startFromRawValue(t,r,o){return new Qt(t,()=>{let n=o.tree.getNodeParent(r);return g(n,"Can\u2019t calculate the parent width if the node doesn\u2019t have a parent"),Bi(n,o)},r,o)}static startFromParentOuterWidth(t,r){let o=r.tree.getNodeParent(t);g(o,"Can\u2019t call createFromParentWidth() if the node doesn\u2019t have a parent");let n=Bi(o,r);return new Qt(n,()=>n,t,r)}static startFromParentInnerWidth(t,r){var i;let o=r.tree.getNodeParent(t);g(o,"Can\u2019t call createFromParentWidthMinusPaddings() if the node doesn\u2019t have a parent");let n=Bi(o,r);return n=Ze(i=Qt,dr,Fd).call(i,n,o,r),new Qt(n,()=>n,t,r)}static startFromColumnWidthMultipliedBySpan(t,r){var a,s;let o=r.tree.getNodeParent(t);g(o&&At(o),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node isn\u2019t inside a grid"),g(Eo(t),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node doesn\u2019t have grid item layout");let n=Ze(a=Qt,dr,sv).call(a,o,r),i=Ze(s=Qt,dr,lv).call(s,n,o,t.gridItemColumnSpan??1,r);return new Qt(i,()=>i,t,r)}subtractSiblingWidths(){let t=b(this,Mo).tree.getNodeParent(b(this,cr));g(t&&Ur(t),"Can\u2019t call subtractSiblingWidths() if the node isn\u2019t inside a stack");let r=[],o=[],n=[],i=[],a=[],s=0;for(let d of xo(t)){let u=Yr(d,t,b(this,Mo).tree,!1);if(u!==!1&&!ml(u))switch(g(Je(d)&&st(d),"It\u2019s impossible to have a regular visible node without width/height/widthType/heightType fields"),s++,d.widthType){case 0:{r.push(d);break}case 1:{o.push(d);break}case 3:{n.push(d);break}case 4:{i.push(d);break}case 2:throw new q;case 5:{if(!wt(d)||!d.fillImagePixelWidth||!d.fillImagePixelHeight)throw new q;a.push(d);break}default:z(d.widthType)}}let c=1-o.reduce((d,u)=>d+u.width,0);if(c!==1&&ie(this,Se,ge("*",b(this,Se),X(c))),r.length){let d=r.reduce((u,f)=>ge("+",u,X(f.width,"px")),X(0,"px"));ie(this,Se,ge("-",b(this,Se),d))}if(a.length){let d=a.reduce((u,f)=>{let h=Ai(f);if(!h)throw new q;let y=be(f,b(this,Mo));if(!y)throw new q;return ge("+",u,ge("*",dl(y),X(h,"px")))},X(0,"px"));ie(this,Se,ge("-",b(this,Se),d))}if(i.length){let d=i.reduce((u,f)=>ge("+",u,X(f.width*100,"vw")),X(0,"vw"));ie(this,Se,ge("-",b(this,Se),d))}if(k(t.gap)){let d=b(this,Mo).getVariableBinding(t.gap,t);if(d){let u=Ro(he`${p`${d} * ${s-1}`}px`);ie(this,Se,ge("-",b(this,Se),u))}}else{let u=Ln(t.gap)*(s-1);u!==0&&ie(this,Se,ge("-",b(this,Se),X(u,"px")))}let m=n.reduce((d,u)=>d+u.width,0);return ie(this,Se,ge("/",b(this,Se),X(m))),ie(this,Se,ge("*",b(this,Se),X(b(this,cr).width))),ie(this,Se,ge("max",b(this,Se),X(1,"px"))),this}op(t){return ie(this,Se,t(b(this,Se),b(this,cr))),this}getWithConstraints(){var t,r;return yo(b(this,cr))?(b(this,cr).maxWidth&&ie(this,Se,Ze(t=Qt,dr,Ad).call(t,"maxWidth",b(this,Se),b(this,Qn),b(this,cr))),b(this,cr).minWidth&&ie(this,Se,Ze(r=Qt,dr,Ad).call(r,"minWidth",b(this,Se),b(this,Qn),b(this,cr))),b(this,Se)):b(this,Se)}};Se=new WeakMap,Qn=new WeakMap,cr=new WeakMap,Mo=new WeakMap,dr=new WeakSet,sv=function(t,r){var o;if(g(t.gridColumnWidthType!==void 0,"A grid node must have a gridColumnWidthType defined"),t.gridColumnWidthType==="fixed")return g(t.gridColumnWidth!==void 0,"A grid node with fixed width columns must have a gridColumnWidth defined"),X(t.gridColumnWidth,"px");if(t.gridColumnWidthType==="minmax"){if(t.gridColumnCount==="auto-fill")throw new q;let n=Bi(t,r);if(n=Ze(o=Qt,dr,Fd).call(o,n,t,r),g(t.gridColumnCount!==void 0,"A grid node must have a gridColumnCount defined"),k(t.gap)){let i=r.getVariableBinding(t.gap,t);if(i){let a=Ro(he`${p`${i} * ${t.gridColumnCount-1}`}px`);n=ge("-",n,a)}}else{let a=Ln(t.gap)*(t.gridColumnCount-1);a!==0&&(n=ge("-",n,X(a,"px")))}return t.gridColumnCount>1&&(n=ge("/",n,X(t.gridColumnCount))),t.gridColumnMinWidth&&(n=ge("max",n,X(t.gridColumnMinWidth,"px"))),n}else z(t.gridColumnWidthType)},lv=function(t,r,o,n){if(o===1)return t;let i;if(H(o)){if(r.gridColumnCount==="auto-fill")throw new q;g(r.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),i=Math.min(o,r.gridColumnCount)}else if(o==="all"){if(r.gridColumnCount==="auto-fill")throw new q;g(r.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),i=r.gridColumnCount}else{if(k(o))throw new q;z(o)}if(i>1&&(t=ge("*",t,X(i))),k(r.gap)){let a=n.getVariableBinding(r.gap,r);if(a){let s=Ro(he`${p`${a} * ${i-1}`}px`);t=ge("+",t,s)}}else{let s=Ln(r.gap)*(i-1);s!==0&&(t=ge("+",t,X(s,"px")))}return t},Fd=function(t,r,o){if(!fi(r))return t;let n;if(k(r.padding)){let i=o.getVariableBinding(r.padding,r);i&&(n=Ro(he`${p`${i} * 2`}px`))}else r.paddingPerSide?n=X((r.paddingLeft??0)+(r.paddingRight??0),"px"):n=X((r.padding??0)*2,"px");return n?ge("-",t,n):t},Ad=function(t,r,o,n){let i=t==="minWidth"?"max":"min",[a,s]=hi(n[t]);if(s==="%"){let l=o();return ge(i,r,ge("*",l,X(a/100)))}else return ge(i,r,X(a,s))},$(Qt,dr);var Mt=Qt;var kx=fe("simulateYPosition");function dv(e,t){try{let r=Vo(e,t);return r.type==="number-const"?r.value:r.expr}catch(r){if(r instanceof q)return;kx.reportError(r,{nodeId:e.id});return}}function Vo(e,t){let r=t.cache.getYPosition(e.id);if(r)return r;let o=Px(e,t);return t.cache.setYPosition(e.id,o),o}function Px(e,t){if(!Dn(e))throw new q;let r=t.tree.getNodeParent(e);if(!(yt(e)&&Ha(e))){if(De(e))return _(0);g(!1,"Can\u2019t calculate the y position on a node when it doesn\u2019t have position information")}if(t.tree.isGroundNode(e)){if(Ee(e)&&pe(t.tree.getScopeNodeFor(e)))return _(0);if(yn(e)||Ee(e))return Li(p`${R.componentViewport}?.y || 0`,0);throw new q}let o=Ex(e,r,t);if(o==="fixed"){if(e.top!==null)return _(e.top);if(e.bottom!==null){let n=be(e,t);return M("-",Kt-e.bottom,n)}else{let n=be(e,t);return M("-",M("*",Kt,e.centerAnchorY),M("/",n,2))}}if(o==="absolute"){g(r&&yt(r)&&Ha(r),"absolute position: parentNode for the node must exist, be pinnable, and have position type");let n=Vo(r,t);if(e.top!==null)return M("+",n,_(e.top));if(e.bottom!==null){let i=be(r,t),a=be(e,t);return M("-",M("+",n,i),M("+",e.bottom,a))}else{let i=be(r,t),a=be(e,t);return M("+",n,M("-",M("*",i,e.centerAnchorY),M("/",a,2)))}}if(o==="sticky"||o===void 0){if(g(r&&yt(r)&&Ha(r),"relative position: parentNode for the node must exist, be pinnable, and have position type"),Ur(r)){if(g(r.stackDirection,"parentNode for the node must have stackDirection"),r.stackDirection==="horizontal"){if(r.stackWrapEnabled)throw new q;if(k(r.stackAlignment))throw new q;let n=be(r,t),i=M("-",n,Xe(r)+zt(r));if(g(r.stackAlignment,"parentNode for node must have stackAlignment"),r.stackAlignment==="start")return M("+",Vo(r,t),_(Xe(r)));if(r.stackAlignment==="center"){let a=be(e,t),s=M("-",i,a);return M("+",Vo(r,t),M("+",Xe(r),M("/",s,2)))}else if(r.stackAlignment==="end"){let a=be(e,t),s=M("-",i,a);return M("+",Vo(r,t),Xe(r),s)}else z(r.stackAlignment)}if(r.stackDirection==="vertical"){let n=gl(r,t,c=>be(c,t),c=>Sl(c,t),c=>Cl(c,t)),i=n.findCoordinates(e.id);g(i,"Node must be found in stack layout info");let a=Fx(i.columnIndex,n,t),s=Ax(i.columnItemIndex,a,r,t),l=[Vo(r,t),Xe(r),s];return Ox(r,e,t)&&l.unshift(Kt),M("+",...l)}if(k(r.stackDirection))throw new q;z(r.stackDirection)}if(At(r)){if(g(r.gridColumnCount!==void 0,"parentNode for node must have gridColumnCount"),r.gridColumnCount==="auto-fill")throw new q;if(H(r.gridColumnCount)){let n=Zo(r,t);if(n.isEmpty())return M("+",Vo(r,t),Xe(r));let i=n.findCoordinates(e.id);g(i,"Node must be found in the grid layout info");let a=Lx(i.rowIndex,n,r,t);return M("+",Vo(r,t),Xe(r),a)}z(r.gridColumnCount)}g(!1,"Relative and sticky nodes can only exist in stacks or grids")}z(o)}function Fx(e,t,r){let o=[];return t.walkColumn(e,n=>{let i=r.tree.get(n);g(i&&Je(i)&&st(i),"column item must exist, have size, and have size dimension type");let a;if(i.heightType===3){let s=t.getFrToPxForColumn(e);g(s,"frToPx must be available for the column"),a=M("*",s,i.height)}else a=be(i,r);o.push(a)}),o}function cv(e,t,r){return r.cache.memo(`sumAllStackChildrenHeights-${e.id}`,()=>M("+",...t)??_(0))}function Ax(e,t,r,o){let n=r.stackDistribution;if(g(n,"parentNode for node must have stackDistribution"),k(n))throw new q;let i=be(r,o),a=M("-",i,Xe(r)+zt(r));if(n==="start"||n==="center"||n==="end"){let s=Gt(r.gap),l=Ct(s),c;if(n==="start")c=_(0);else{let u=cv(r,t,o),f=l*(t.length-1),h=M("-",a,M("+",u,f));c=n==="center"?M("/",h,2):h}let m=hl("+",0,e,t)??_(0),d=l*e;return M("+",c,m,d)}if(n==="space-between"||n==="space-around"||n==="space-evenly"){g(!va(r),"gap is not expected with stackDistribution:",r.stackDistribution);let s=cv(r,t,o),l=M("-",a,s),c=t.length,m;switch(n){case"space-between":m=M("/",l,Math.max(1,c-1));break;case"space-around":m=M("/",l,c);break;case"space-evenly":m=M("/",l,c+1);break;default:z(n)}let d;switch(n){case"space-between":d=_(0);break;case"space-around":d=M("/",m,2);break;case"space-evenly":d=m;break;default:z(n)}let u=hl("+",0,e,t)??_(0),f=M("*",m,e);return M("+",d,u,f)}z(n)}function Lx(e,t,r,o){if(g(r.gridRowHeightType!==void 0,"parentNode for node must have gridRowHeightType defined"),r.gridRowHeightType==="fixed"){g(r.gridRowHeight!==void 0,"A grid parent node with gridRowHeightType === 'fixed' (for node) must have gridRowHeight defined");let n=e*r.gridRowHeight,i=Gt(r.gap),a=Ct(i),s=e*a;return _(n+s)}if(r.gridRowHeightType==="fit"){let n=[];for(let c=0;c<e;c++)for(let m=0;m<t.columnCount;m++){let d=o.tree.get(t.getGridItem(c,m));if(!d)continue;g(Je(d)&&st(d),"grid child must have size and size-dimension type");let u=be(d,o);n[c]=M("max",n[c]??_(0),u)}let i=M("+",...n)??_(0),a=Gt(r.gap),s=Ct(a),l=e*s;return M("+",i,l)}if(r.gridRowHeightType==="auto"){let n=be(r,o),i=M("-",n,Xe(r)+zt(r)),a=Zo(r,o),s=a.rowCount,l=Gt(r.gap),c=Ct(l),m=(a.rowCount-1)*c,d=M("/",M("-",i,m),s),u=M("*",e,d),f=e*c;return M("+",u,f)}z(r.gridRowHeightType)}function Ex(e,t,r){if(Ga(r.tree,e)&&e.position==="fixed")return"fixed";if(ja(e,t)&&e.position==="absolute")return"absolute";if(Ip(e,t)&&e.position==="sticky")return"sticky";if(t&&De(t))return"fixed";if(!(t&&ao(t)))return"absolute"}function Ox(e,t,r){if(Ee(e)&&pe(r.tree.getScopeNodeFor(e))){let o=e.children?.findIndex(co);if(w(o))return!1;let n=r.tree.getIndex(t);return o<n}return!1}var bl=class{constructor(t,r,o){this.treeStore=t;this.variables=r;this.valueTransforms=o;I(this,"simulationContext");this.simulationContext=_b(this.treeStore.tree,this.variables,this.valueTransforms)}getCSSWidth(t){return av(t,this.simulationContext)}getHeight(t){return tv(t,this.simulationContext)}getYPosition(t){return dv(t,this.simulationContext)}getComponentViewportContext(t){let r=this.getCSSWidth(t),o,n;return vn(t)||(o=this.getHeight(t),n=this.getYPosition(t)),{width:r,height:o,y:n}}};var vl=class{constructor(t,r){this.tree=t;this.bindings=r;I(this,"ids",new Map)}create(t){let r=this.composeBaseId(t),o=this.tree.get(t);Ao(o,"AppearIdCollector: Node not found");let n=es(o,this.tree);return n.length>0?this.composeRepeaterId(r,n):r}composeBaseId(t){let r=ve(t),o=this.ids.get(r);if(w(o))return this.ids.set(r,0),r;let n=o+1;return this.ids.set(r,n),`${r}-${n}`}composeRepeaterId(t,r){let o=[t];for(let n of r){let i=this.tree.get(n);i&&o.push(this.bindings.createWithNode("index",i))}return he.join(o,"-")}};var Il=class{constructor(t,r,o){this.declarations=t;this.scope=r;this.primaryVariantId=o}create(t,r){if(t===!0&&w(r))return{condition:!0};if(!w(t)&&w(r))return{condition:t};if(r){if(Array.from(r.values()).every(({value:f})=>f===t))return{condition:t};let o=new Set,n=new v.Set;wr(this.scope)&&this.primaryVariantId&&mv(this.primaryVariantId,t,o,n);let i=new Map,a=new Map,s=new Map,l=zx(s),c=l(t);for(let[f,h]of r){if(wr(this.scope)&&mv(f,h.value,o,n),!h.isGesture&&h.value===t)continue;let y=h.isGesture?i:a;Bx(f,l(h.value),y)}let m=[],d=[];for(let f of s.keys()){let h=s.get(f);h&&(d.push(new v(f)),m.push(Q(h)))}let u=this.declarations.dedupe("isDisplayed",new v(re.lines(p`(${new v(m.join(", "))}) => {`,wr(this.scope)&&p`if (!${v.fn(R.isBrowser)}) return true`,...this.createConditionStatementsForGroup(i,"gestureVariant"),...this.createConditionStatementsForGroup(a,"baseVariant"),p`return ${c}`,p`}`)));return{condition:v.fn(u,...d),classNames:o,classNameExpressions:n}}return{condition:!0}}createConditionStatementsForGroup(t,r){if(t.size===0)return[];let o=[],n=new v(r);for(let[i,a]of t){let s=new v(i);if(a.size===1){let l=Array.from(a)[0];if(w(l))continue;o.push(p`if (${n} === ${l}) return ${s}`)}else o.push(p`if (${Array.from(a)}.includes(${n})) return ${s};`)}return o}};function Bx(e,t,r){let o=Q(t),n=r.get(o)??new Set;r.set(o,n.add(e))}function zx(e){let t=new Set;return r=>{if(!Nt(r))return r;let o=Q(r),n=e.get(o)??new v(Jp("value",t));return e.set(o,n),n}}function uv(e){return`hidden-${ve(e)}`}function mv(e,t,r,o){if(t===!1){let n=uv(e);r.add(n)}else if(Nt(t)){let n=uv(e);o.add(p`!(${t}) && ${n}`)}}var zi,en,Ui,Tl=class{constructor(t,r,o,n,i,a){this.scope=t;this.bindings=r;this.declarations=o;this.imports=n;this.variables=i;this.treeStore=a;$(this,zi,new Map);$(this,en,null);$(this,Ui,new Map)}isLayoutTemplateRef(t){if(rt(b(this,en))){if(ie(this,en,new Set),!zo(this.scope)||!tp(this.scope))return!1;let r=P.componentForIdentifier(this.scope.layoutTemplateIdentifier)?.properties;if(!r)return!1;let o=this.scope.getControlProps(r);for(let n in o){let i=o[n];if(w(i?.value)||k(i.value)||i.type!=="scrollsectionref")continue;let a=i.value.target;w(a)||k(a)||b(this,en).add(a)}}return b(this,en).has(t)}getNodeInPrimary(t){if(!t)return;let r=t.originalid?this.treeStore.tree.get(t.originalid):t;if(r)return r}scrollTargetInfo({target:t,collectionItem:r}){if(!t)return;if(me(t))return{ref:this.variables.create(t)};let o=this.treeStore.tree.get(t);if(!o||!$o(o)||this.treeStore.treeIndex.getScopeIdFor(o.id)!==this.scope.id)return;let n=this.getNodeInPrimary(o);if(!n)return;let i=this.ref(n,r);if(i)return{ref:i,offset:o.scrollMarginTop}}ref(t,r){let o=this.getNodeInPrimary(t);if(!o)return;let n=b(this,zi).get(o.id);if(n)return n;let i=es(o,this.treeStore.tree),a=this.isLayoutTemplateRef(o.id);if(a||r||i&&i.length>0){let m=this.id(o,r);if(!m)return;let d=this.imports.addImport("framer",{exportSpecifier:a?"useSiteRefs":"useDynamicRefs"});return v.fn(this.declarations.component.dedupe("dynamicRef",v.fn(p`${d}<HTMLElement>`)),m)}let s=this.bindings.create("ref"),l=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),c=p`const ${s} = ${v.fn(p`${l}.useRef<HTMLElement>`,p`null`)}`;return this.declarations.component.create(c),b(this,zi).set(o.id,s),s}getBaseId(t,r){if(U(r)){if($o(t)){let o=[t.id];return r&&r.id!==this.scope.id&&o.push(r.id),this.declarations.component.dedupe("elementId",v.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteElementId"}),...o))}return ve(t.id)}if(We(r))return he`${R.layoutId}-${ve(t.id)}`}getPortalAncestor(t){let r=this.treeStore.tree.getParent(t.id);if(r){if(Tt(t))return this.treeStore.tree.get(r.originalid??r.id);if(De(r)){let o=this.treeStore.tree.getParent(r.id);return this.treeStore.tree.get(o?.originalid??o?.id)}}}portalId(t){let r=this.getPortalAncestor(t);return r?this.id(r):void 0}id(t,r){let o=this.getNodeInPrimary(t);if(!o)return;let n=this.treeStore.treeIndex.getScopeIdFor(o.id),i=this.treeStore.tree.get(n);if(!U(i)&&!We(i))return;if(U(i)&&$o(o)){let s=rf(o,this.treeStore.tree);s&&b(this,Ui).set(o.id,s)}let a=this.getBaseId(o,i);if(a)return of(o,this.treeStore.tree,s=>{if(s.id===o.id)return a;if(me(r)&&r.id===s.id)return this.variables.create(r);if(Ya(r)&&r.key===s.id)return r.value;if(s.type==="slug")return this.variables.create(mn(s.id,s.providerId))})}annotation(){let t=Object.fromEntries(b(this,Ui));return xe(t)?"":JSON.stringify(t)}};zi=new WeakMap,en=new WeakMap,Ui=new WeakMap;function Wx(e){return e instanceof Error?!!$c(e):!1}function $x(e){return E(e)?e:e instanceof Error?e.message:tt(e)?JSON.stringify(e):"Unknown error"}var Wi,Nl=class{constructor(t,r,o){this.scopeId=t;this.sourceNodeId=r;this.type=o;$(this,Wi,[])}record(t,r,o){if(Wx(r)){this.recordKnownError(t,r);return}b(this,Wi).push({nodeId:t.id,reason:$x(r),moduleIdentifier:Ce(o)?o:void 0})}get errors(){return b(this,Wi).map(t=>new gs({...t,sourceNodeId:this.sourceNodeId,sourceNodeModuleType:this.type,scopeId:this.scopeId,type:"CodeGeneration"}))}recordKnownError(t,r){if($c(r)){let o=new Set;r.error.forEach(n=>{o.add(n),this.record(t,"CodeError",n)}),r.missing.forEach(n=>{o.has(n)||this.record(t,"MissingModule",n)})}}};Wi=new WeakMap;function Hx(e){return e==="string"||e==="vectorsetitem"}var tn,wl=class{constructor(t,r){this.modulesStore=t;this.tree=r;$(this,tn,new Map)}get structure(){return Array.from(b(this,tn).values())}addSection(t){if(!Vc(t)||!t.customizationsSectionId)return;let r={_id:t.customizationsSectionId,_layerId:t.id,content:[]};return b(this,tn).set(r._id,r),r._id}addCustomizations(t,r){if(!Vc(t)||!r)return;let o=b(this,tn).get(r);if(o&&(G(t)&&Gx(t,o,this.tree,this.modulesStore),!!uf(t))){for(let n of t.customizations)if(_e(t))o.content.push({field:n.fieldPath,text:t.getTextContent()});else if(G(t)&&t.isVectorInstance){if(!Ce(t.codeComponentIdentifier))return;let i=bi(Z(t.codeComponentIdentifier),this.tree,this.modulesStore)?.name;if(!E(i))return;o.content.push({field:n.fieldPath,text:i})}b(this,tn).set(r,o)}}};tn=new WeakMap;function Gx(e,t,r,o){let n=P.componentForIdentifier(e.codeComponentIdentifier)?.properties;if(!n)return;let i=e.getControlProps(n);for(let a in i){let s=i[a];if(!s)continue;let{type:l,value:c}=s;if(!E(l)||!Hx(l))continue;let m=n[a]?.title??a;if(E(c))switch(l){case"string":t.content.push({field:m,text:c});break;case"vectorsetitem":{if(!Ce(c))continue;let d=bi(Z(c),r,o)?.name;if(!E(d))continue;t.content.push({field:m,text:c});break}default:z(l,"Unknown control type")}}}var rn,Rl=class{constructor(t){this.scopeNode=t;$(this,rn,new Map)}recordClassName(t,r,o){if(!pe(this.scopeNode)||t.parentid!==r||t.visible===!1||xf(t)&&t.locked)return;let n=r,i=b(this,rn).get(n)??new Set;i.add("."+o),b(this,rn).set(n,i)}annotation(){if(!pe(this.scopeNode)||b(this,rn).size===0)return"{}";let t={};for(let[r,o]of b(this,rn))t[r]=Array.from(o);return JSON.stringify(t)}};rn=new WeakMap;var on,nn,Zn,xl=class{constructor(t){$(this,on);$(this,nn,new Set);$(this,Zn,new Map);ie(this,on,{...t})}count(t,r=1){b(this,on)[t]+=r}measureLength(t,r){return(typeof r=="string"||r instanceof v)&&(b(this,on)[t]+=r.length),r}get(){if(b(this,nn).size>0){let r=Array.from(b(this,nn),o=>o.metric).join(", ");throw Error(`Attempted to get metrics before completing timer(s): ${r}`)}let t={...b(this,on)};for(let[r,o]of b(this,Zn)){let n=by(o);t[r]+=Math.round(n.reduce((i,[a,s])=>i+(s-a),0))}return t}time(t){let r=performance.now(),o=!1,n={get metric(){return t},cancel:()=>{o||(b(this,nn).delete(n),o=!0)},done:()=>{g(!o,"Attempted to complete a cancelled timer");let i=b(this,Zn).get(t);i||(i=[],b(this,Zn).set(t,i)),i.push([r,performance.now()]),n.cancel()}};return b(this,nn).add(n),n}async timed(t,r){let o=this.time(t);try{return await r()}finally{o.done()}}};on=new WeakMap,nn=new WeakMap,Zn=new WeakMap;var ei,Ml=class{constructor(){$(this,ei,[])}add(t){let r=_x(t);r.length!==0&&b(this,ei).push(...r)}annotation(){if(b(this,ei).length===0)return;let t=new Set;for(let r of b(this,ei))t.add(JSON.stringify(r));return`[${Array.from(t).join(",")}]`}};ei=new WeakMap;function $i(e){return E(e)&&e.length>0}function jx(e){return tt(e)?"id"in e&&$i(e.id)&&(e.type===void 0||e.type==="click"||e.type==="form_submit"):!1}function b4(e){return or(e)?e.every(jx):!1}function _x(e){let t=[],r=e.originalid??e.id;if(Io(e)&&$i(e.linkClickTrackingId)&&t.push({id:e.linkClickTrackingId,nodeId:r,type:"click"}),_e(e))for(let o of e.getLinkClickTrackingId(!1))$i(o)&&t.push({id:o,nodeId:r,type:"click"});if(G(e)){let o=P.reactComponentForIdentifier(e.codeComponentIdentifier);if(o?.properties){let n=e.getControlProps(o.properties);for(let i in n){if(!n[i])continue;let a=n[i];a.type==="trackingid"&&$i(a.value)&&t.push({id:a.value,nodeId:void 0,type:void 0})}}}return Mr(e)&&$i(e.formSubmitTrackingId)&&t.push({id:e.formSubmitTrackingId,nodeId:r,type:"form_submit"}),t}var Vl=class{constructor(t,r,o,n){this.imports=t;this.treeStore=r;this.modulesStore=o;this.createBinding=n;I(this,"sets",new Set)}resolveVariableInstance(t){g(me(t.dynamicVectorSetIdentifier),"Vector set identifier must be a variable reference"),g(Ce(t.codeComponentIdentifier),"Code component identifier must be a module");let r=Z(t.codeComponentIdentifier),o=bi(r,this.treeStore.tree,this.modulesStore)?.set.moduleId;return o&&this.sets.add(o),this.createBinding(t.dynamicVectorSetIdentifier,t,"Icon")}resolveControl(t,r,o){if(me(t))return this.sets.add(r.setModuleId),this.createBinding(t,o,"Icon");g(Ce(t),"Vector set item must be a module export identifier");let n=cf(this.treeStore.tree,r,t);if(n)return this.imports.addModuleImport(n)}annotation(){if(this.sets.size!==0)return JSON.stringify(Array.from(this.sets))}};var Hi,Gi,Ld,Dl=class{constructor(){$(this,Gi);$(this,Hi,new Map)}set(t,r){b(this,Hi).set(Ze(this,Gi,Ld).call(this,t),r)}get(t){return b(this,Hi).get(Ze(this,Gi,Ld).call(this,t))}};Hi=new WeakMap,Gi=new WeakSet,Ld=function(t){return t.originalid??t.id};var Ed=class{constructor(t,r){this.imports=t;this.declarations=r;I(this,"links",new Map);I(this,"scrollSectionRefs",new Map)}collect(t,r,o,n){if(!Yu(n))return;let i=t==="link"?this.links:this.scrollSectionRefs,a=i.get(r)??new Set;a.add(o),i.set(r,a)}collectLink(t,r,o){return this.collect("link",t,r,o),o}collectScrollSectionRef(t,r,o){return this.collect("scrollSectionRef",t,r,o),o}values(t){let r=[],o={},n=p`resolvedLinks`,i=this.links.get(t);if(i?.size)for(let s of i)o[s]=p`${n}[${r.length}]`,r.push(p`props[${s}]`);let a=this.scrollSectionRefs.get(t);if(a?.size){let s=this.declarations.component.dedupe("siteRef",v.fn(this.imports.addImport("framer",{exportSpecifier:"useSiteRefs"})));for(let l of a)o[l]=v.fn(s,p`${n}[${r.length}]`),r.push(p`props[${l}]`)}if(!xe(o))return{ResolveLinks:this.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),binding:n,links:r,props:o}}};function fv(e,t,r,o,n){let i=new cs(n);return{bindings:n,imports:o,declarations:i,tree:e.tree,modulesStore:t,assets:new To(r.assetMap),unresolvedLinks:new Ed(o,i),wideGamutColors:new kn}}function qx(e,t){let r={};for(let o in e)r[o]=t(o);return r}function Xx(e){return(t,r,o)=>{if(w(r))return t;let n=qx(r,o);if(!n||!tt(n)||xe(n))return t;let i=e.declarations.file.dedupe("getLocalizedValue",p`(values, locale) => {${p.joinLines(p`while (locale) {${p.joinLines(p`const value = values[locale.id]`,p`if (value) return value`,p`locale = locale.fallback`)}}`)}}`),a=e.imports.addImport("framer",{exportSpecifier:"useLocaleInfo"}),{activeLocale:s}=e.declarations.component.dedupe({activeLocale:void 0},v.fn(a)),l=e.declarations.file.dedupe("localizedValues",n);return p`${v.fn(i,l,s)} ?? ${t}`}}function hv(e,t,r,o,{declarations:n,tree:i,modulesStore:a,assets:s,imports:l,unresolvedLinks:c,wideGamutColors:m}){let d=Xx({declarations:n,imports:l});return rs(t,r,{resolveAsset:(u,f,h,y)=>{let S,C=un(f)?f.__defaultAssetReference:void 0;return u!==C&&(S=(y?s.resolveResponsiveImage(u,void 0):s.resolve(u))?.src),!Da(h)||w(S)?S:d(S,h.valueLocalized,T=>{let N=h.valueLocalized?.[T]?.value;return Sa(N)?void 0:N===C?p`undefined`:(y?s.resolveResponsiveImage(u,void 0):s.resolve(u))?.src})},resolveResponsiveImage:(u,f,h)=>{let y,S,C;if(ba(f)&&Ca(f.__vekterDefault)?(y=f.__vekterDefault.assetReference,S=f.__vekterDefault.positionX,C=f.__vekterDefault.positionY):un(f)&&(y=f.__defaultAssetReference),u===y&&h.positionX===S&&h.positionY===C)return;let T=v.fromValue(s.resolveResponsiveImage(u,void 0,h)),N=d(T,h.valueLocalized,x=>{let V=h.valueLocalized?.[x];if(!Va(V))return;if(V.value===y&&V.imageFocalPoint?.positionX===S&&V.imageFocalPoint?.positionY===C)return p`undefined`;let A=s.resolveResponsiveImage(V.value,void 0,V.imageFocalPoint);return v.fromValue(A)});return v.fn(n.file.dedupe("wrapInAddImageAlt",iy),N,d(h.alt??ts,h.altLocalized,x=>h.altLocalized?.[x]?.value))},resolveDynamicValue:(u,f)=>{},resolveLink:(u,f)=>{if(Ft(f.value))return;let h=Bo(f.value);if(!w(h)){if($r(h)){let y=f.valueLocalized;return y?d(h.url,y,S=>y[S]?.value):h.url}return c.collectLink(o,u,{href:Mc(h,i,a)})}},resolvePageScope:u=>{},resolveLocalizedValue:(u,f)=>d(u,f,h=>f?.[h]?.value),compileRichText:(u,f)=>{let y={collectors:{imports:l,assets:s,links:{create:C=>{if(!(w(C)||me(C)))return $r(C)?C.url||void 0:Mc(C,i,a)}}},nodeId:e.originalid??e.id,useCreateElement:!0},S=n.file.dedupe("text",qr(u,y));return d(S,f,C=>{if(!f)return;let T=f[C];if(!T)return;let N=T.value;if(E(N))return qr(N,y)})},resolveFont:u=>La(u)?Ea(u):{},resolveScrollSectionRef:(u,f)=>{if(w(f)||me(f)||!E(f.target))return;let{target:h,collectionItem:y}=f;if(!h||me(h))return;let S={type:"webPage",webPageId:e.id,hash:h,hashVariables:Ya(y)?{[y.key]:y}:void 0};return c.collectScrollSectionRef(o,u,{href:{...nf(S,i,a),webPageId:e.id},refKey:!0})},resolveCustomCursor:(u,f)=>{if(!(w(f)||me(f)))return Xp(f,i)},resolveVectorSetItem:u=>{if(!(w(u)||me(u)))return l.addModuleImport(u,{absolute:!0})},resolveColor:u=>m.resolveColor(u)})}function gv(e,t,r,o=void 0){if(!r&&!o)return;let n=o??jg(r??[]);n.length&&Qg.resetPropertiesToMasterValues(e,t,n)}function Kx(e){let t=[];for(let r in e){let o=e[r];o&&t.push({hash:ve(r),mediaQuery:Xh(o)})}return t}function Yx(e,t,r,o){let n=new O({routeId:p`routeId`,style:p`style`,key:Q(e)});O.addSpreadAtStart(n,p`props`);let i=p`${o.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.createElement`;if(!r)return Bd(t,p`return ${v.fn(i,e,n,p`children(true)`)};`);O.assign(n,r.props);let{ResolveLinks:a,binding:s,links:l}=r;return Bd(t,p`return ${v.fn(i,a,new O({links:l},1),p`(${s}) => ${v.fn(i,e,n,p`children(true)`)}`)};`)}function x8(e,t){let r=[];for(let o of t){if(!U(o)||!zo(o))continue;let n=Z(o.layoutTemplateIdentifier);if(!kt(n)||n.type!=="layoutTemplate")continue;let i=e.getNodeWithTrait(n.localIdName,pe);i&&r.push(i)}return r}function M8(e,t,r,o,n,i){let a={},s={},l={},c=new Map,m={},d=fv(e,t,r,n,i),u=d.bindings.create("props"),f={},h=new Set,y=d.bindings.create("Template"),S=e.tree.getNodeWithTrait(e.tree.root.homePageNodeId,U);if(!U(S))return;for(let V of[S,...o]){if(!U(V,!0)||!zo(V)||h.has(V.id))continue;let A=Z(V.layoutTemplateIdentifier);if(!kt(A)||A.type!=="layoutTemplate")continue;let F=e.tree.getNodeWithTrait(A.localIdName,pe);if(!F)continue;h.add(V.id);let W=t.getPersistedModuleByLocalId(A.localId)?.moduleURL;g(W,"An applied Layout Template must have a module URL.");let K=t.forType("layoutTemplate").getByLocalId(A.localId).annotations(P.componentForIdentifier(V.layoutTemplateIdentifier),A.exportSpecifier)?.framerBreakpoints;Fm(K)&&c.set(A.localIdName,K);let ce=P.componentForIdentifier(V.layoutTemplateIdentifier)?.properties;g(ce,"An applied Layout Template must have controls.");let D=hv(V,ce,V.getControlProps(ce),F.id,d),ye=f[F.id],ne=Kr(D,ye?.value,"js");if(ye?.value&&!xe(D)&&(!ne||xe(ne)))m[V.id]=ye.binding;else if(Vr(ne)&&!xe(ne)){let de=d.declarations.component.dedupe("props",Qx(ne,ye));m[V.id]=de,f[F.id]??={binding:de,value:ne}}a[V.id]=A.localIdName;let Y=s[A.localIdName]??[];Y.push(V.id),s[A.localIdName]=Y,!(A.localIdName in l)&&(l[A.localIdName]=d.imports.addImport(W,{exportSpecifier:"default",importBinding:cm(F.name??"Template")}))}if(xe(s))return;let C=[],T=[];for(let V in s){let A=s[V],F=l[V];if(!F||!A)continue;C.push(Yx(F,A,d.unresolvedLinks.values(V),d.imports));let j=c.get(V);j&&T.push(Bd(A,p`return ${Kx(j)}`))}let N=d.declarations.component.dedupe("templateProps",m),x=d.wideGamutColors.getWideGamutColorRules("body");return{binding:y,css:x.length?`@supports (color: color(display-p3 1 1 1)) { ${x.join(" ")} }`:"",declarations:p.joinLines(...d.declarations.file.list(),p`function ${y}({routeId, children, style, ...rest}) {${p.joinLines(...d.declarations.component.list(),p`const ${u} = ${N}[routeId] ?? {}`,p`switch (routeId) {${p.joinLines(...C,p`default: { return children(false) }`)}}`)}}`,p`export function getLayoutTemplateBreakpoints(routeId) {${p.joinLines(p`switch (routeId) {${p.joinLines(...T,p`default: { return undefined }`)}}}`)}`)}}function Qx(e,t){if(!t)return e;let r=new O(e);return O.addSpreadAtStart(r,t.binding),r}function Zx(e){let t=e.getPrimaryVariant();if(!(!t||!Nn(t)))return t.children.findIndex(r=>co(r))}function Bd(e,t){return p.joinLines(...e.map(r=>p`case ${r}:`),t)}function yv(e){return ui(e)&&e.layout==="stack"&&e.stackDirection==="vertical"}function eM(e,t){if(!wr(t))return;t.getPrimaryVariant().set(bp),gv(e,t.getReplicaVariants(),["layout","padding"])}function kl(e){return yv(e.getPrimaryVariant())&&e.getReplicaVariants().every(yv)}function tM(e){let t=new Set,r=new Set;for(let o of e.tree.root.children){if(o.id===e.tree.root.homePageNodeId||!U(o)||!w(o.layoutTemplateIdentifierOverride))continue;let n=e.stores.modulesStore.forType("screen").getByStableName(o.id)?.annotations(P.componentForIdentifier(o.instanceIdentifier),"default")?.framerAcceptsLayoutTemplate;if(rm(n)){n===!1&&t.add(o.id);continue}if(o.isLoaded()){kl(o)===!1&&t.add(o.id);continue}r.add(o.id)}return{incompatible:t,shallow:r}}async function rM(e,t){let r=new Set,o=Array.from(t).map(i=>e.tree.getNodeWithTrait(i,U)),n=await e.tree.loadScopes(o);for(let i of n)rt(i)||kl(i)||r.add(i.id);return r}function Od(e,t,r,o=void 0,n=new Set){let i=Au(r),a=i?r():r,s=t.id===e.tree.root.homePageNodeId?e.tree.root:e.tree.current(t);if(!s)return;for(let u of n)e.tree.getNodeWithTrait(u,U)?.set({layoutTemplateIdentifierOverride:null});if(s.set({layoutTemplateIdentifier:a.instanceIdentifier}),eM(e.tree,t),i&&e.stores.scopeStore.select(a.id,{keepHistory:!1}),!o)return;g(a.isLoaded(),"Layout Templates: template must be loaded to add a child.");let l=Zx(a),c=P.activeBundleHash;if(!c)return;let m=tg(e.tree,e.stores.treeStore.sandboxCollectionData,c,P,o.id),d=e.tree.current(o);if(d){for(let u of d.walk()){let f=eg(e.tree,t.id,u,m);f&&u.set(f)}e.tree.moveNode(o,a.baseVariantId,l),e.stores.selectionStore.set(o.id)}}async function V8(e,t,r,o){if(t.id===e.tree.root.homePageNodeId){let{incompatible:n,shallow:i}=tM(e);if(i.size===0)Od(e,t,r,o,n);else{let a=await rM(e,i),s=new Set([...n,...a]);e.scheduler.process(()=>{Od(e,t,r,o,s)})}$t("layout_template_apply",{onHomePage:!0})}else Od(e,t,r,o),$t("layout_template_apply",{onHomePage:!1})}function oM(e,t,r){if(!Array.from(t).some(a=>{let s=r.get(a);return Le(s)}))return;let n=r.get(e.parentid),i=e;for(;n;){if(t.has(n.originalid??n.id)){let a=r.get(n.originalid??n.id),s=ef(r,a),l=i.originalid??i.id;if(Le(a)&&l===s?.id)return a}i=n,n=r.get(n.parentid)}}function nM(e){return e}function iM(e){let t=new Set;return Yh(e,r=>{r.providerId&&t.add(r.providerId)}),t}var Pl=(e,t,r,o)=>(n,i,a,s=nM,l=void 0)=>{if(me(n))return s(r.create(n));if(Ft(n)){let c=s(o.createComputedValue(n,i,l));return Uu(n)?c:t.component.dedupe(a,c,oM(i,iM(n),e.tree))}z(n)};function zd(e){if(Ne(e))return"screen";if(Me(e))return"vector";if(Ve(e))return"design";let{type:t}=Z(e.instanceIdentifier);return t}function Sv(e,t,{treeStore:r,modulesStore:o,engineChanges:n,assetMap:i},a=new Set,s=`framer-${zn(5)}`){let l=zd(t),c=new jr(...a),m=new Co(l,o,c);m.addImport("react",{exportSpecifier:"*",importBinding:"React"});let d=new Nl(t.id,Ne(t)?e.id:t.id,l),u=Vs(t);Ao(u!=="ContentManagement"&&u!=="Analytics"&&u!=="LocalizationGlossary","Content management, Analytics & Localization glossary nodes cannot be code-generated");let f=new cs(c),h=new as(t),y=new To(i),S=new Vn(t,m,c,h,r,o,()=>{let Te=m.addImport("framer",{exportSpecifier:"useRouter"});return f.component.dedupe("router",v.fn(Te))}),C=new ks(t,r,h,f.file,c,m,y),T=new Ds(c,h,C,y,S),N=new ly(t,h,r,m,f,T,o,l),x=new sy(f.file,f.component,m,h,N,S,T,o,l),V=new Tl(t,c,f,m,h,r),A=new Ml,F=new Il(f.component,t,e.id),j=Pl(r,f,h,x),W=new Of(t,h,r,x,j),K=new el(t,e,s,W),ce=new Set,D=new Ys(e,h,r,c,m,{type:l}),ye=new wo(f.font),ne=new xl(kp()),Y=new Set,de={dependencies:Y,addDependency:Te=>Y.add(Te)},ae=Wt(t)?t.getReplicaVariants():[],Ie={};if(We(t))for(let Te of ae)!Nr(Te)||qg(Te.gesture)||(Ie[Te.replicaInfo.inheritsFrom??Te.replicaInfo.master]=!0);let je=new vl(r.tree,c),ee=new qp(t,ye,m,f.file,h,o,r),L=new wl(o,r.tree),ue=new Rl(t),we=new Vl(m,r,o,j),Ye=new bl(r,h,x),Vt=pe(t)?h.create({id:"children",providerId:t.id}):void 0;return{type:"jsxContext",treeStore:r,modulesStore:o,engineChanges:n,assetMap:i,simulatedDOM:Ye,variants:ae,topLevelVariantsWithGestures:Ie,imports:m,errors:d,variables:h,fetches:T,assets:y,valueTransforms:x,elementIds:V,css:K,renderFunctions:F,events:D,links:S,fonts:ye,metrics:ne,packages:de,appearIds:je,bindings:c,declarations:f,preload:C,localizedValues:N,componentPresetIds:ce,renderAsListNodes:new Map,repeaterInfo:new Map,renderConditions:new Map,nodesWithAnyGradientFill:new Map,customCursors:ee,cssVariableDefinitions:W,formIds:new Set,hitTargets:ue,createDeduplicatedDynamicValueBinding:j,trackingIds:A,vectorSets:we,kitSectionsStructure:L,scopeId:t.id,scopeType:u,moduleType:l,rootId:e.id,linkClassName:K.addRule({display:"block"},t),layoutTemplateSlotBinding:Vt,nodeRendersWithMotion:new Dl,serializationId:s,acceptsLayoutTemplate:U(t)&&t.isLoaded()&&t.baseVariantId?kl(t):void 0}}function Cv({ctx:e,ancestorInfo:t,jsxAttributes:r,usedVariableIds:o,dataRepeater:n,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:s}){let l=[],c=r.subqueries,m=t.subqueries,d=Hy(n,i,o,y=>{if(a){let S=m;for(;S;){if(y.providerId===S.repeaterNode.id){let C=Os(S.repeaterNode),[T,N]=Gy(y.id,C);return{type:"Identifier",name:N,collection:T}}S=S.parent}}return g(e.variables,"VariableCollector is required"),l.push(y),{type:"LiteralValue",value:e.variables.create(y)}},y=>{let S=e.imports.addModuleImport(y);return g(S,"Can't import collection"),S});g(c,"Subqueries must exist");let u=c.getSubqueries(s);for(let[y,S]of u)d.select.push({type:"FunctionCall",functionName:"ARRAY",alias:y,arguments:[{type:"Select",...S}]});let f=c.getVariableDependencies(s);l.push(...f);let h=d;return a?(g(m,"Parent subqueries must exist"),m.addSubquery(s,n.originalid??n.id,d),m.addVariableDependencies(s,l)):e.preload.addQuery(n,h,l),new O({query:h,pageSize:n.collectionPaginationPageSize})}function aM(e,t){return w(e.subqueries)||t.isAnyVariantPaginated?!1:e.inRepeatedItem??!1}function bv(e,t,r,o,n){let i=o.inheritedControlMap?.get(e.id);g(i,"Primary variant control map must be defined.");let a=aM(r,o),s=Cv({ctx:t,ancestorInfo:r,jsxAttributes:o,usedVariableIds:n,dataRepeater:e,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:"primary"}),l={};for(let c of t.variants){let m=Yo(c,e.id,t.treeStore.tree)??e;g(Le(m),"Node must be a data repeater");let d=Cv({ctx:t,ancestorInfo:r,jsxAttributes:o,usedVariableIds:n,dataRepeater:m,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:c.id});pr(s,d)||(l[c.id]=d)}return a?null:{props:s,overrides:xe(l)?void 0:l}}function sM(e,t){let r=t.imports.addImport("framer",{exportSpecifier:"useQueryData"});if(yr(e)){let o=t.imports.addImport("framer",{exportSpecifier:"useLoadMorePaginatedQuery"}),n=p`paginatedQuery`;return p.joinLines(p`const { ${n}, paginationInfo, loadMore } = ${o}(query, pageSize, ${e.id})`,p`const data = ${v.fn(r,n)}`,p`return children(data, paginationInfo, loadMore)`)}return p.joinLines(p`const data = ${v.fn(r,p`query`)}`,p`return children(data)`)}function vv(e,t){return p`({ query, pageSize, children }) => {
        ${sM(e,t)}
    }`}function Iv({renderAsListNodes:e},t){return t.parentid?e.has(t.parentid):!1}function Tv(e,t,{isAnyVariantALink:r},o){let n=o?"motion.":"";return Io(t)&&(it(t)||r)?`${n}a`:Iv(e,t)?`${n}li`:bo(t)&&t.htmlTag&&On(e.scopeType)?`${n}${t.htmlTag}`:`${n}${ns}`}function Nv(e,t,{isAnyVariantAnEffect:r,isAnyVariantOptimizedAppearEffect:o},n){let i=[];r&&i.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),o&&i.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}));let a=t.treeStore.tree.get(n.lastRepeaterId);return Wr(a)&&yr(a)&&Ho(e,a)&&i.push(t.imports.addImport("framer",{exportSpecifier:"withInfiniteScroll"})),t.scopeType==="SmartComponent"?t.imports.addImport("framer",{exportSpecifier:"SmartComponentScopedContainer",composeWithImports:i}):t.imports.addImport("framer",{exportSpecifier:"Container",composeWithImports:i})}function lM(e,t){if(!vp(t.treeStore.tree,e)||!!!P.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerImmutableVariables)return;let o=Z(e.codeComponentIdentifier);if(!Ce(o))return;let{importSpecifier:n,importBinding:i}=_r(o,t.moduleType,t.modulesStore);if(!n)return;let a=t.imports.addImport(n,{exportSpecifier:"*",importBinding:`${i}Info`});return[t.imports.addImport("framer",{exportSpecifier:"withMappedReactProps"}),a]}function cM(e,t,r,o){let n=[];ir(e)&&t.scopeType==="CanvasPage"&&n.push(t.imports.addImport("framer",{exportSpecifier:"withGeneratedLayoutId"}));let i=dM(e,t,r);i&&n.push(i);let a=ol(e,t);if(n.push(...a),i||a.length>0){let s=lM(e,t);s&&n.push(s)}return o.isAnyVariantAVariantAppearEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withVariantAppearEffect"})),G(e)&&!e.isVectorInstance||(o.isAnyVariantAnEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),o.isAnyVariantOptimizedAppearEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}))),n}function dM(e,t,r){let o=rl(e,t);if(!o)return;let{importSpecifier:n,exportSpecifier:i}=o,a={scopeId:t.scopeId,nodeId:e.originalid??e.id,override:t.imports.addImport(n,{exportSpecifier:i}),inComponentSlot:r.inComponentSlot?!0:void 0};return[t.imports.addImport("framer",{exportSpecifier:"withCodeBoundaryForOverrides"}),a]}function uM(e,t){if(e.kind!=="localModuleExport")return;let{localId:r}=e,n=t.modulesStore.getPersistedModuleByLocalId(r)?.metadata.packageDependencies;Array.isArray(n)&&n.forEach(i=>{E(i)&&t.packages.addDependency(i)})}function wv(e,t){let r=ws(e,P);if(!r)return;let o=Fe("prototype",r);return t.imports.addImport(`../${o}`,{exportSpecifier:"default",importBinding:"Prototype"})}function mM(e){switch(e){case"BooleanShapeNode":case"CodeComponentNode":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FrameNode":case"OvalShapeNode":case"OverlayNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"RichTextNode":case"ShapeContainerNode":case"ShapeGroupNode":case"StarShapeNode":case"SVGNode":case"TextNode":{let t=e;return!0}case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BlockquoteStylePresetNode":case"BoxShadow":case"CanvasNode":case"CanvasPageNode":case"CanvasScopeNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeFileEntityTypeRootNode":case"CollectionReferenceVariableEditTool":case"CollectionItemNode":case"CollectionNode":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ComponentPresetNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"DateVariableEditTool":case"DesignPageNode":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"EnumVariableEditTool":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HighlightStackItemTool":case"HighlightTool":case"ImageStylePresetNode":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"InlineCodeStylePresetNode":case"LayoutTemplateEntityTypeRootNode":case"LayoutTemplateNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkStylePresetNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"Menu":case"MoveTool":case"MutableNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PresetsListNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextVariableEditTool":case"RootNode":case"RotateTool":case"RouteNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"SmartComponentNode":case"StringVariableEditTool":case"StyledTextDraft":case"TableStylePresetNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextStylePresetNode":case"VectorSetEntityTypeRootNode":case"VectorSetNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"WebPageNode":case"ZoomSelectTool":case"ZoomTool":{let t=e;return!1}default:z(e)}}function Rv(e,t,r,o){if(!mM(e.__class))throw Error(`jsxTagNameForNode: ${e.__class} does not support serialization to JSX.`);let n=cM(e,t,r,o);switch(e.__class){case"SVGNode":case"ShapeContainerNode":case"BooleanShapeNode":case"OvalShapeNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"ShapeGroupNode":case"StarShapeNode":return t.imports.addImport("framer",{exportSpecifier:"SVG",composeWithImports:n});case"TextNode":return t.imports.addImport("framer",{exportSpecifier:"Text",composeWithImports:n});case"RichTextNode":return t.imports.addImport("framer",{exportSpecifier:"RichText",composeWithImports:n});case"FrameNode":{if(Mr(e))return t.imports.addImport("framer",{exportSpecifier:"FormContainer",composeWithImports:n});if(wt(e)||o.isAnyVariantAnImage)return t.imports.addImport("framer",{exportSpecifier:"Image",composeWithImports:n});let i=t.nodeRendersWithMotion.get(e);g(!w(i),"Node must have had `rendersWithMotion` computed for it.");let a=Tv(t,e,o,i);return i?t.imports.addImport("framer-motion",{exportSpecifier:a,composeWithImports:n}):new v(a)}case"CodeComponentNode":{if(g(fo(e),"Nodes with a ClassDiscriminator of CodeComponentNode must be a Code Component"),EC(e))return t.imports.addImport("framer",{exportSpecifier:OC(e)});if(fn(e)||o.identifiers&&o.identifiers.size>1)return t.imports.addImport("framer",{exportSpecifier:"Instance",composeWithImports:n});let i=Z(e.codeComponentIdentifier);if(!Ce(i)){let c=Su(e.codeComponentIdentifier);return g(c,"A package must have module information to be included in code-generation."),t.packages.addDependency(c.packageName),t.imports.addImport(c.moduleURL,{exportSpecifier:c.exportIdentifier,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"withMeasuredSize"})]})}g(Ce(i),"A code component that is not a package must be a module.");let{importSpecifier:a,exportSpecifier:s,importBinding:l}=_r(i,t.moduleType,t.modulesStore);return g(a,"A module must have an import specifier."),uM(i,t),t.fonts.addFontReference({componentIdentifier:e.codeComponentIdentifier,fontReference:t.imports.addImport(a,{exportSpecifier:s,importBinding:l,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"getFonts"})]})}),t.imports.addImport(a,{exportSpecifier:s,importBinding:l,composeWithImports:n})}case"OverlayNode":return t.imports.addImport("framer",{exportSpecifier:"ResetOuterLinkContext"});case"FormBooleanInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormBooleanInput",composeWithImports:n});case"FormPlainTextInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormPlainTextInput",composeWithImports:n});case"FormSelectNode":return t.imports.addImport("framer",{exportSpecifier:"FormSelect",composeWithImports:n});default:z(e.__class)}}function xv(e,t){if(mt(t)){let r=e.dataForIdentifier(t.dataIdentifier);return g(r,"A Data Repeater must have an evaluated data entity in the sandbox."),{id:t.id,annotations:r.annotations}}if(_o(t))return{id:t.id,annotations:void 0};z(t,"A data repeater must have either an identifier or array variable")}function pM(e,t,r){let o=[];for(let n of t){if(Nc(n))continue;let i=r?.get(n);if(!i)continue;let a=Go(n,e.id,!1),s=Tm(i.type);Vr(s)&&o.push(p`${a} ??= ${s}`)}return o}function fM(e,t,r,o){if(mt(e)){let n=r?.framerRecordIdKey;return n?t.variables.create(mn(n,e.id)):o}return t.bindings.create("id")}function hM(e,t){if(mt(e))return t.bindings.createWithNode("collection",e);if(_o(e))return t.variables.create(e.dataRepeaterArray);z(e,"parent should be a collection or array repeater")}function gM(e,t,r,o,n){let i=mt(e)?{}:{[ay]:t};for(let a of r)Nc(a)||(i[a]=Go(a,e.id,!1));if(mt(e)){g(o,"Subqueries must exist");for(let a of o.childRepeaterIds){let s=n.treeStore.tree.get(a);g(s,"Repeater node must exist");let l=n.bindings.createWithNode("collection",s);i[a]=l}}return i}function Mv(e,t,r,o,n){let i=fM(e,o,t,n),a=hM(e,o),s=o.variables.variableIdsByProviderId.get(e.id)??new Set,l=gM(e,i,s,r.subqueries,o),c=r.inheritedControlMap?.get(e.id),m=Ia(e);return{args:p`${l}, ${n}`,variableFallbackList:pM(e,s,c),data:a,key:m?p`${i} ?? ${n}`:i}}var yM=fe("jsxForNode");async function SM(e,t,r,o){let n=xs(t.treeStore.tree,e,P);for(let i in n){if(i==="children")continue;let a=[],s=n[i];if(s){for(let l of s){let c=await Al(l.node,e,t,{...o,inComponentSlot:!0});c&&c.length>0&&a.push(c)}r.props[i]=a}}}function CM(e,t,r){if(De(e))return Q(Lr(t.imports.addImport("framer-motion",{exportSpecifier:"motion.div"}),t,r));if(G(e)&&e.codeComponentIdentifier==="framer/Prototype"){let o=wv(e,t);if(o)return Q(le.tag(o,void 0))}return""}function bM(e,t,r){if(Le(t)){let o=xv(P,t);return r.repeaterInfo.set(t.id,o),t.id}return e.lastRepeaterId}function vM(e,t,r){return Le(t)?!1:!!(Mn(r.treeStore.tree,t)||e.inRepeatedItem)}function IM(e,t,r,{itemsOrderOverrides:o,hiddenInVariants:n,inheritedControlMap:i,inCodeOverride:a,subqueries:s,kitSectionId:l}){return{...e,lastRepeaterId:bM(e,t,r),inRepeatedItem:vM(e,t,r),subqueries:s,itemsOrderOverrides:o,hiddenInVariants:n,inheritedControlMap:i,inCodeOverride:a,kitSectionId:e.kitSectionId??l,inComponentSlot:e.inComponentSlot||G(t)&&t.codeComponentIdentifier!=="framer/Prototype"}}function TM(e,t,r,o,n){let i=[],s=o.treeStore.tree.getPresetsListNode()?.getComponentPresets();if(_e(e)&&me(e.htmlContent)&&s&&s.length>0){let u=o.imports.addImport(`../${Un}`,{exportSpecifier:"*",importBinding:"componentPresets"}),f={},h=e.getComponentPresets();for(let[y,S]of h)o.componentPresetIds.add(S),f[y]=p`${u}.props[${S}]`;i.push(y=>le.tag(o.imports.addImport("framer",{exportSpecifier:"ComponentPresetsProvider"}),new O({presets:f}),y))}G(e)&&Cr(e)&&i.push(u=>Lr(Nv(e,o,r,n),o,r.propsForContainer,u)),G(e)&&!e.isVectorInstance&&i.push(u=>Lr(o.imports.addImport("framer",{exportSpecifier:"ComponentViewportProvider"}),o,r.propsForComponentViewport,u));let l=o.links.getUnresolvedLinksForNode(e);if(l){let{unresolvedLinks:u,binding:f}=l;if(Vr(u)||Pu(u)){let h=o.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),y=new O({links:u});i.push(S=>Lr(h,o,{props:y},p`(${f}) => (${S})`))}}if(r.isAnyVariantALink&&i.push(u=>Lr(o.imports.addImport("framer",{exportSpecifier:"Link"}),o,r.propsForLink,u)),r.isAnyVariantATransitionOverride){let u=o.imports.addImport("framer-motion",{exportSpecifier:"MotionConfigContext"}),f=o.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),h=o.declarations.file.dedupe("Transition",new v(re.lines(p`({value, children}) => {`,p`const config = ${f}.useContext(${u})`,p`const transition = value ?? config.transition`,p`const contextValue = ${f}.useMemo(() => ({ ...config, transition }), [JSON.stringify(transition)])`,p`return <${u}.Provider value={contextValue}>{children}</${u}.Provider>`,p`}`)));i.push(y=>Lr(h,o,r.propsForTransition,y))}let c=o.events.overlayTriggerOverlayBindings.get(e.id);if(c&&c.size>0){i.push(S=>le`<>${S}</>`);let u=p`visible`,f=p`setVisible`,h={visible:p`enabled && ${u}`,[Qs.show]:p`() => ${v.fn(f,p`true`)}`,[Qs.hide]:p`() => ${v.fn(f,p`false`)}`,[Qs.toggle]:p`() => ${v.fn(f,p`!${u}`)}`},y=o.declarations.file.dedupe("Overlay",new v(re.lines(p`({ children, blockDocumentScrolling, enabled = true, }) => {`,p`const ${[u,f]} = ${v.fn(o.imports.addImport("framer",{exportSpecifier:"useOverlayState"}),p`{ blockDocumentScrolling }`)}`,p`return children(${h})`,p`}`)));for(let[S,C]of c){let T=o.treeStore.tree.get(S);if(!T)continue;let N=new O({blockDocumentScrolling:De(T)?T.blockDocumentScrolling:!1}),x=o.renderConditions.get(S);Nt(x)&&(N.enabled=x),i.push(V=>le.tag(y,N,p`${C} => (${V})`))}}let m=o.events.overlayState.get(e.id);if(m&&De(e)){let u=o.imports.addImport("react-dom",{exportSpecifier:"*",importBinding:"ReactDOM"}),f=`#${Ra}`,h=`#${wa}`,y=o.declarations.file.dedupe("getContainer",p`() => {${p.joinLines(p`return document.querySelector(${f}) ?? document.querySelector(${h}) ?? document.body`)}}`);i.push(S=>le`<>{${u}.createPortal(${S}, ${v.fn(y)})}</>`)}t&&m&&Et(e)&&r.isAnyVariantFloating&&i.push(u=>Lr(o.imports.addImport("framer",{exportSpecifier:"Floating"}),o,r.propsForFloating,u)),m&&Tt(e)&&i.push(u=>le.tag(o.imports.addImport("framer-motion",{exportSpecifier:"AnimatePresence"}),void 0,p`${m}.visible && (${u})`)),r.renderCondition!==!0&&i.push(u=>p`${r.renderCondition} && (${u})`);let d=o.fetches.getResultBinding(e);if(r.propsForFetcher&&d&&i.push(u=>Lr(o.imports.addImport("framer",{exportSpecifier:"Fetcher"}),o,r.propsForFetcher,p`${d} => (${u})`)),Le(t)&&Mn(o.treeStore.tree,e)){let u=o.repeaterInfo.get(t.id);if(g(u,"jsxForNode: `repeaterInfo` must exist when transforming the child of a repeater."),mt(t)){let N=o.links.getPathVariablesForRepeaterInfo(u);N&&i.push(x=>le.tag(o.imports.addImport("framer",{exportSpecifier:"PathVariablesContext.Provider"}),new O({value:N}),x))}let f=o.bindings.createWithNode("index",t),{data:h,args:y,variableFallbackList:S,key:C}=Mv(t,u.annotations,r,o,f),T=o.variables.variableIdsByProviderId.get(t.id)?.has(Tc)?new v(Go(Tc,t.id,!1)):void 0;i.push(N=>p`${h}?.map((${y}) => {${p.joinLines(...S,T&&p`const ${T} = ${f} + 1`,...o.declarations.component.list(t),p`return (${le.tag(o.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),new O({key:C,id:he`${t.id}-${C}`}),N)})`)}})`)}return i}function NM(e,t,r){let n=Cr(e)?t.propsForContainer:t.propsForElement,i=r.events.overlayTriggerOverlayBindings.get(e.id);if(i&&i.size>0){let l=n.props;l||(l=new O),l.id=l.id??r.elementIds.id(e)}let s=r.cssVariableDefinitions.getDefinitionsForNode(e)??{};if(!xe(s)){let l=n.props;l||(l=new O),l.style?Object.assign(l.style,s):l.style=s}}async function Al(e,t,r,o){try{if(co(e)){g(t&&r.layoutTemplateSlotBinding,"A SlotNode must be in a Layout Template and have a parent.");let l=jb(e,t,r);return le`${p.joinLines(le.children(r.layoutTemplateSlotBinding),le.tag(p`div`,new O({className:l})))}`}await xM(e,r),r.metrics.count("nodes");let n=Gb(e,t,r,o);if(!n)return le``;G(e)&&await SM(e,r,n.propsForElement,o);let i=CM(e,r,n.propsForElement),a=IM(o,e,r,n);for(let l of MM(e,r)){if(Tt(l)&&!r.events.overlayState.has(l.id))continue;let c=await Al(l,e,r,a);c&&(i+=Q(le.children(c)))}NM(e,n,r);let s=await kM(e,r,o,a,n,le.fromTrustedString(i));return le.applyTransforms(s,TM(e,t,n,r,o))}catch(n){return yM.reportError(n,{node:e.id,primaryVariant:r.rootId}),r.errors.record(e,n),le``}}async function Ll(e,t,r,o,n=`framer-${zn(5)}`){let{combinedVariableControlMap:i}=t.combineVariableControlMap(r.treeStore.tree,void 0,P,P.activeBundleHash),a={inheritedControlMap:i},s=Sv(e,t,r,o,n);return{ctx:s,jsx:await Al(e,null,s,a)}}async function Fl(e,t,{modulesStore:r,errors:o,treeStore:n,rootId:i}){let a=n.tree.get(i),s=n.tree.getScopeNodeFor(a);if(np(n.tree,s,e))return;for(let c of t)if(kt(c)&&c.type==="codeFile"){let d=P.componentForIdentifier(c.value),u=P.errorForIdentifier(c.value);d?u&&o.record(e,"CodeError",c.value):o.record(e,"MissingModule",c.value);return}let l=wM(t);l.length>0&&await r.preloadExternalModules(l),await Bn(P,t.map(c=>c.value),r)}function wM(e){let t=[];for(let r of e)vr(r)&&t.push(r);return t}function RM(e,t){if(!Ce(e.codeComponentIdentifier))return;let r=new Set([e.codeComponentIdentifier]);for(let o of t.variants){let n=Yo(o,e.id,t.treeStore.tree);n&&(g(G(n),"Expected a CodeComponentNode in the variant",n?.id),Ce(n.codeComponentIdentifier)&&r.add(n.codeComponentIdentifier))}return r}async function xM(e,t){if(G(e)){if(e.codeComponentIdentifier==="framer/Prototype"){let n=ws(e,P);if(!n)return;await Fl(e,[ut("prototype",n,"default")],t)}let r=RM(e,t);if(!r)return;let o=[];for(let n of r)o.push(Z(n));await Fl(e,o,t)}if(Qm(e)){if(!Ce(e.codeOverrideIdentifier))return;await Fl(e,[Z(e.codeOverrideIdentifier)],t)}mt(e)&&await Fl(e,[Z(e.dataIdentifier)],t)}function MM(e,t){return!Nn(e)||pn(e)||_e(e)?uu():G(e)&&e.codeComponentIdentifier!=="framer/Prototype"?Ag(t.treeStore.tree,e,P).map(r=>r.node):e.children}function VM(e,t,r,o,n){if(!Ia(e)){if(mt(e)){let i=t.variables.variableIdsByProviderId.get(e.id)??new Set,a=bv(e,t,r,o,i);if(a){let s=t.declarations.file.dedupe("QueryData",vv(e,t)),l=t.bindings.createWithNode("collection",e),c=t.bindings.createWithNode("paginationInfo",e),m=t.bindings.createWithNode("loadMore",e);n.push(d=>le.tag(t.imports.addImport("framer",{exportSpecifier:"ChildrenCanSuspend"}),void 0,Lr(s,t,a,p`(${l}, ${c}, ${m}) => (<>${d}</>)`)))}return}z(e,"All data repeater types should be handled")}}function DM(e,t,r,o){let n=[];return Mr(e)&&n.push(i=>p`(${bd}) => (<>${i}</>)`),Le(e)&&VM(e,t,r,o,n),n}async function kM(e,t,r,o,n,i){let a=Lr(Rv(e,t,r,n),t,De(e)?void 0:n.propsForElement,le.applyTransforms(i,DM(e,t,r,n)));if((G(e)||_e(e))&&gp(e,"framer/useShowRelativeOverlay")){let s=Q(a);for(let l of e.children){if(!Tt(l)||!t.events.overlayState.has(l.id))continue;let c=await Al(l,e,t,o);c&&(s+=Q(le.children(c)))}return le.fromTrustedString(s)}return a}function Lr(e,t,r,o){if(!r)return le.tag(e,void 0,o);let{props:n=new O,overrides:i}=r,a=[];if(i)switch(t.scopeType){case"SmartComponent":O.addSpreadAtEnd(n,v.fn(p`addPropertyOverrides`,i,p`baseVariant`,p`gestureVariant`));break;case"WebPage":case"LayoutTemplate":a.push(s=>le.tag(t.imports.addImport("framer",{exportSpecifier:"PropertyOverrides"}),new O({breakpoint:p`baseVariant`,overrides:i}),s));break;default:break}return le.applyTransforms(le.tag(e,n,o),a)}async function El(e,t,r,o,n,i){return ho(t)&&t.usesDOMRectCached()&&!t.getDOMRect()&&(await PM(t,o,r,n),!t.cache.getRawDOMRect(t.id)&&i)?et.atOrigin(i):e.getRect(t)}async function PM(e,t,r,o){if(t){let a=(await t({ids:[e.id]}))?.measurements?.[0];if(a){let{layoutMetrics:s}=a,l=et.from(s);e.cache.setRawDOMRect(e.id,l);return}}if(!r)return;let n=FM(r,o);if(n){let i=et.atOrigin(n);e.cache.setRawDOMRect(e.id,i)}}function FM(e,t){if(!kt(e))return;let r=t.getPersistedModuleByLocalIdentifier(e);if(!r)return;let{intrinsicWidth:o,intrinsicHeight:n}=r.metadata;if(H(o)&&H(n))return{width:o,height:n}}var Zt={Screen:p`Screen`,activeVariantCallback:R.activeVariantCallback,css:R.css,delay:R.delay,ref:R.ref,serializationHash:R.serializationHash,sharedStyleClassNames:R.sharedStyleClassNames,restProps:R.restProps,refBinding:R.refBinding},AM=new Set(Object.values(Zt).map(e=>Q(e))),Vv=xt(async(e,t,{serializationId:r,initialIntrinsicSize:o})=>{let n=t.treeStore.tree.getScopeNodeFor(e);if(!Ne(n))return[];let i=t.treeStore.tree.get(e.id);g(i,"Must have a source node to serialize. This should be a primary variant."),g(Ne(n),"Must have a scope node to serialize. This should be a CanvasPage Node.");let{assetMap:a,engineChanges:s,modulesStore:l,treeStore:c}=t,m={assetMap:a,engineChanges:s,modulesStore:l,treeStore:c},d=`FramerScreen${ve(e.id)}`,u=ut("screen",e.id,"default").value,{jsx:f,ctx:h}=await Ll(i,n,m,new Set(AM).add(d),r);g(f,"There must be JSX to serialize.");let y=h.imports,S=await El(m.treeStore.tree,i,u,t.measureNodes,m.modulesStore,o),C=h.events.navigationTargets.size>0,T=h.events.handlers.size>0,N=h.events.variantOnAppearId.get(e.id),x=h.events.keyBindHooks.size>0,V=[];for(let ae of h.events.navigationTargets)ae!==fd&&V.push(ae);let A=h.fonts.fontObjects,F=new Map(h.fonts.fontReferences),{variables:j}=h.variables,W=[],K=new Set(h.css.sharedStyleIds),ce=[];for(let ae of K){let Ie=Fe("css",ae),je=y.addImport(`../${Ie}`,{exportSpecifier:"*",importBinding:"sharedStyle"});ce.push(je),W.push(v.fn(y.addImport("framer",{exportSpecifier:"getFontsFromSharedStyle"}),p`${je}.fonts`))}let D;for(let ae of h.componentPresetIds){D??=y.addImport(`../${Un}`,{exportSpecifier:"*",importBinding:"componentPresets"});let Ie=p`${D}.fonts?.[${ae}]`;W.push(p`(${Ie} ? ${v.fn(h.imports.addImport("framer",{exportSpecifier:"getFontsFromComponentPreset"}),Ie)} : [])`)}let ye=new Map;Pn(h.css.get(),ye);let ne=new v(d),Y=y.addImport("react",{exportSpecifier:"useRef"}),de=re.lines(C&&`const preload = ${Q(V)};`,...h.declarations.file.list(),p`const ${Zt.serializationHash} = ${r}`,p`const ${Zt.Screen} = ${LM({props:p`style, className`},p`const fallbackRef = ${v.fn(p`${Y}<HTMLElement>`,p`null`)}`,p`const ${Zt.refBinding} = ${Zt.ref} ?? fallbackRef`,C?p`const navigate = ${v.fn(y.addImport("framer",{exportSpecifier:"usePrototypeNavigate"}),{preload:p`preload`})}`:void 0,T&&p`const { ${Zt.activeVariantCallback}, ${Zt.delay} } = ${v.fn(y.addImport("framer",{exportSpecifier:"useActiveVariantCallback"}))}`,...h.events.handlers.values(),p`const ${Zt.sharedStyleClassNames} = ${ce.map(ae=>p`${ae}.className`)}`,...h.declarations.component.list(),x&&re.linesFrom(h.events.keyBindHooks),N&&v.fn(y.addImport("framer",{exportSpecifier:"useOnAppear"}),N),j.size>0&&p`const { ${p.listFrom(j)} } = {}`,p`return ${f}`)}`,p`const ${Zt.css} = ${[...h.css.conditionalRules(r),ds,...Fn(ye),...ce.map(ae=>p`...${ae}.css`)]}`,us(ne,r,Zt.Screen,Zt.css,{framerIntrinsicHeight:S.height,framerIntrinsicWidth:S.width,framerSupportedLayoutWidth:"fixed",framerSupportedLayoutHeight:"fixed",framerScreen:void 0,framerDisplayContentsDiv:!1},y),p`${ne}.displayName = ${`Screens/${n.name?.trim()||"Generated Component"}`};`,p`${ne}.defaultProps = ${{width:S.width,height:S.height}};`,qs({componentName:ne,fontObjects:A,fontReferences:F,imports:y,declarations:h.declarations.font,sharedFontArrays:W}));return[{type:"screen",revision:void 0,source:new v(re.sections(re.linesFrom(y.statements),de)),artifacts:{assets:h.assets.keys,packageDependencies:h.packages.dependencies,metrics:h.metrics.get()}}]});function LM({props:e},...t){return new v(re.lines(p`React.forwardRef(function({ ${e}, ...${Zt.restProps} }, ${Zt.ref}) {`,...t,p`});`))}var kv="{serializationId}";function Dv(e){return`.${kv} ${e}`}var Pv=xt(async(e,{treeStore:t},{serializationId:r})=>{let o=new jr,n=new ls(o),i=new wo(n),a=e.getFontsForCodeGeneration(),s=e.moduleSourceRevision,l=hn(e);for(let C of a)i.addFontObjectBySelector(C,l);let c=[],m=new kn,d={colors:m};for(let{selectors:C,declarations:T}of e.getCSS(d)){let N=C.map(Dv);c.push(`${N.join(", ")} { ${T} }`)}let u=t.tree.getNodesWithTrait(e.cache.replicaInstances??[],Dh).filter(Dp).sort((C,T)=>(T.breakpointWidth??0)-(C.breakpointWidth??0));for(let C=0;C<u.length;C++){let T=u[C];if(T===void 0)continue;let N=u[C+1],x=T.breakpointWidth-1,V=N?.breakpointWidth??0;for(let{selectors:A,declarations:F}of T.getCSS(d)){let W=`${A.map(Dv).join(", ")} { ${F} }`;c.push(`@media (max-width: ${x}px) and (min-width: ${V}px) { ${W} }`)}}let f=m.getWideGamutColorRules(`.${r}`);f.length&&c.push(`@supports (color: color(display-p3 1 1 1)) { ${f.join(" ")} }`);let h=c.map(C=>C.replaceAll(kv,r)),y=Di({fontObjects:i.fontObjects,fontReferences:i.fontReferences}),S=p.joinLines(p`import { fontStore } from "framer";`,p`fontStore.loadFonts(${a});`,...n.list(),p`export const fonts = ${y};`,p`export const css = ${h};`,p`export const className = ${r};`);return[{revision:s,type:"css",source:S,artifacts:{metrics:{nodes:c.length}}}]});function Wd(e){if(yt(e))return{widthType:e.widthType,heightType:e.heightType,...yo(e)?{minHeight:e.minHeight,maxHeight:e.maxHeight,minWidth:e.minWidth,maxWidth:e.maxWidth}:fp}}function $d(e,t){if(Ee(t))return{min:e.getRect(t).width}}var EM=new Set(Object.values(R).map(e=>Q(e)));function OM(e,t){if(ir(e)){let r=t.get(e.parentid);return!Ve(r)||!r.isLoaded()?null:r}return t.current(e)}var Hd=xt(async(e,t,{serializationId:r,initialIntrinsicSize:o})=>{let{assetMap:n,engineChanges:i,modulesStore:a,treeStore:s,aiGenerationStore:l,measureNodes:c}=t,m=Ot(e,s.tree)?e.moduleSourceRevision:void 0,d=OM(e,s.tree);g(d?.isLoaded(),"The scope node must be valid.");let u=zd(d),f=Wt(d)?d.baseVariantId:e.id,h=s.tree.get(f);g(h,"Must have a source node to serialize. This should be a primary variant.");let y={assetMap:n,engineChanges:i,modulesStore:a,treeStore:s},S=`Framer${e.id}`,C=new v(S),{jsx:T,ctx:N}=await Ll(h,d,y,new Set(EM).add(S),r);g(T,"There must be JSX to serialize.");let x=N.imports,V=Ve(d),A=V?void 0:d.instanceIdentifier,F=await El(y.treeStore.tree,h,A,c,y.modulesStore,o),j=Wt(d)?d.getReplicaVariants():[],{variants:W,hook:K}=N.preload.getHook(),{gestures:ce,breakpoints:D,classNames:ye,sizes:ne,appearEventMap:Y}=KM(h,j,N,y,W),de=We(d)?[d.baseVariantId,...d.getTopLevelReplicaVariants().map(Ls)]:[],ae=de.length>1,Ie=!xe(ce),je=!xe(Y),ee=!xe(D),L=p`${x.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.useId`,{mediaQueries:ue,sharedStyleImports:we,sharedFontArrays:Ye,css:Vt}=JM(r,N,j,D,d),Te=le.applyTransforms(T,YM(d,N,_M(d,h,j,ue,y.treeStore,N))),tr=U(d)?py(d):new Set,Dt={};for(let _t of tr){let Jt=mn(_t,d.id);Dt[_t]=N.variables.create(Jt)}let{props:mr,types:oo,propertyControls:lt,variableMap:ct}=Es(d,y,N,Vs(d),u,F),te=WM(d,t),se=!ee&&p`const ${R.layoutDependency} = ${v.fn(N.declarations.file.dedupe("createLayoutDependency",p`(props, variants) => {${p.joinLines(p`if (props.layoutDependency) return variants.join('-') + props.layoutDependency`,p`return variants.join('-')`)}}`),p`props`,R.variants)}`,{cursors:ze}=N.customCursors,rr=x.addImport("react",{exportSpecifier:"useRef"}),br=re.sections(Ie&&p`const ${R.enabledGestures} = ${ce};`,ae&&`const ${R.cycleOrder} = ${Q(de)};`,ee&&`const ${R.breakpoints} = ${Q(ue)}`,ee&&`const ${R.isBrowser} = () => typeof document !== "undefined";`,V&&p`const ${R.variant} = undefined;`,V&&p`const ${R.breakpoints} = undefined;`,V&&p`const ${R.layoutId} = undefined;`,V&&p`const ${R.className} = undefined;`,V&&p`const ${R.style} = undefined;`,p`const ${R.serializationHash} = ${r}`,`const ${R.variantClassNames} = ${Q(ye)};`,!ee&&$M,...N.declarations.file.list(),`export interface Props extends React.HTMLAttributes<HTMLDivElement> { ${oo} }`,`const ${R.Component} = ${zM(p`const fallbackRef = ${v.fn(p`${rr}<HTMLElement>`,p`null`)}`,p`const ${R.refBinding} = ${R.ref} ?? fallbackRef`,p`const ${R.defaultLayoutId} = ${v.fn(L)}`,`const { ${R.activeLocale}, ${R.setLocale} } = ${v.fn(x.addImport("framer",{exportSpecifier:"useLocaleInfo"}))}`,We(d)||U(d)?p`const ${R.componentViewport} = ${v.fn(N.imports.addImport("framer",{exportSpecifier:"useComponentViewport"}))}`:void 0,jM({data:te,imports:x,variables:N.variables.variables}),mr,U(d)&&HM({webPageNodeId:e.id,metadataDependencies:Dt,imports:x,bindings:N.bindings}),ee?p.joinLines(p`const [${R.baseVariant}, ${R.hydratedBaseVariant}] = ${v.fn(x.addImport("framer",{exportSpecifier:"useHydratedBreakpointVariants"}),R.variant,R.breakpoints,p`false`)};`,p`const ${R.gestureVariant} = undefined;`):BM(h.id,Ie,ae,x),se,XM(N),...N.events.routeHandlers.values(),N.events.handlers.size>0&&p`const { ${R.activeVariantCallback}, ${R.delay} } = ${v.fn(x.addImport("framer",{exportSpecifier:"useActiveVariantCallback"}),ee?p`undefined`:R.baseVariant)}`,...N.events.handlers.values(),je&&v.fn(x.addImport("framer",{exportSpecifier:"useOnVariantChange"}),ee?R.hydratedBaseVariant:R.baseVariant,Y),p`const ${R.sharedStyleClassNames} = ${we.map(_t=>p`${_t}.className`)}`,...N.declarations.component.list(),ze,K?.(Ie?R.enabledGestures:p`undefined`),p`return (${Te})`)}`,Vt,us(C,r,R.Component,R.css,UM(d,N,F,ne,ct),x),`${S}.displayName = ${Q(d.name?.trim()||"Generated Component")};`,`${S}.defaultProps = ${Q({width:F.width,height:F.height})};`,lt&&v.fn(x.addImport("framer",{exportSpecifier:"addPropertyControls"}),C,new v(`${Q(lt)} as any`)),qs({componentName:C,fontObjects:N.fonts.fontObjects,fontReferences:N.fonts.fontReferences,imports:x,declarations:N.declarations.font,sharedFontArrays:Ye})),[no]=U(d)?await my(d,t,{serializationId:r}):[];return Ps([{type:u,revision:m,source:new v(re.sections(re.linesFrom(x.statements),br)),artifacts:{packageDependencies:N.packages.dependencies,errors:N.errors.errors,assets:N.assets.keys,metrics:N.metrics.get(),kitSectionsStructure:l.cacheKitSectionsStructure(e.id,N.kitSectionsStructure.structure)}},no,N.localizedValues.module(m)])});function BM(e,t,r,o){let n=O.fromEntries([[R.defaultVariant,e],[R.variant,R.variant],[R.variantClassNames,R.variantClassNames],[R.enabledGestures,t?R.enabledGestures:void 0],[R.cycleOrder,r?R.cycleOrder:void 0],[R.ref,R.refBinding]]),i=v.fn(o.addImport("framer",{exportSpecifier:"useVariantState"}),n),a=R.variants,s=R.baseVariant,l=p`setVariant`,c=R.gestureVariant,m=R.classNames,d=R.setGestureState,u=R.gestureHandlers,f=R.clearLoadingGesture,h=R.isLoading;return re.lines(p`const ${{variants:a,baseVariant:s,setVariant:l,gestureVariant:c,classNames:m,setGestureState:d,gestureHandlers:u,clearLoadingGesture:f,isLoading:h}} = ${i}`)}function zM(...e){return re.sections(p`React.forwardRef<HTMLDivElement, Props>(function(props, ${R.ref}) {`,...e,p`});`)}function UM(e,t,r,o,n){let{height:i,width:a}=r,s={propertyName:"variant",data:Object.fromEntries(Object.entries(o).map(([c,m])=>[c,Gp(m)]))},l={framerIntrinsicHeight:i,framerIntrinsicWidth:a,framerRootFontSize:wr(e)?e.getPrimaryVariant()?.rootFontSize:void 0,framerCanvasComponentVariantDetails:JSON.stringify(s),framerVariables:n&&JSON.stringify(n),framerImmutableVariables:!0,framerDisplayContentsDiv:!1,framerAutoSizeImages:!0,framerComponentViewportWidth:!0,framerColorSyntax:!0,framerVectorSets:t.vectorSets.annotation()};if(pe(e)){let c={},m=e.getBreakpointValues();for(let d in m){let u=t.treeStore.tree.get(d);c[d]={...m[d],canvasClassName:Ev(d),minHeight:u?.height,viewportHeight:u?.viewportHeight,name:u?.name??void 0,width:u?.widthType===0?u?.width:void 0,rootFontSize:u?.rootFontSize??xa}}l.framerHitTargets=t.hitTargets.annotation(),l.framerBreakpoints=JSON.stringify(c),l.framerDefaultVariant=e.baseVariantId,l.framerTrackingIds=t.trackingIds.annotation(),l.framerLayoutTemplate=""}else U(e)?(l.framerAcceptsLayoutTemplate=t.acceptsLayoutTemplate,l.framerTrackingIds=t.trackingIds.annotation(),l.framerScrollSections=t.elementIds.annotation(),l.framerResponsiveScreen=""):We(e)?l.framerTrackingIds=t.trackingIds.annotation():Ve(e)?l.framerDesign="":We(e)||(l.framerScreen="");return l}function WM(e,t){if(!U(e)||!mt(e)||!Za(t.treeStore.tree,e))return;let o=e.getVariableControlMap(t.treeStore.tree,P,P.activeBundleHash)??new Map;return{defaultCollectionAlias:Os(e),identifier:e.dataIdentifier,controlMap:o}}var $M=re.lines("function addPropertyOverrides(overrides, ...variants) {","const nextOverrides = {}","variants?.forEach(variant => variant && Object.assign(nextOverrides, overrides[variant]))","return nextOverrides","}");function HM({webPageNodeId:e,metadataDependencies:t,imports:r,bindings:o}){let n=r.addImport(`../${dy(e).localId}`,{exportSpecifier:"default",importBinding:"metadataProvider"}),i=o.create("metadata"),a=r.addImport("framer",{exportSpecifier:"useMetadata"}),s=v.fn(n,t,R.activeLocale),l=Object.values(t).concat(R.activeLocale);return re.lines(p`const ${i} = React.useMemo(() => ${s}, ${l})`,v.fn(a,i))}function GM(e){if(Nr(e))return{type:e.gesture,topLevel:e.replicaInfo.inheritsFrom}}function jM({data:e,imports:t,variables:r}){if(!e)return;let o=t.addImport("framer",{exportSpecifier:"useCurrentPathVariables"}),n=t.addImport("framer",{exportSpecifier:"NotFoundError"}),i=t.addImport("framer",{exportSpecifier:"useQueryData"}),a=t.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"}),s=new Set;for(let[h]of e.controlMap){let y=Go(h,void 0,!0);r.has(y)&&s.add(h)}function l(h){let y=t.addModuleImport(h);return g(y,"Can't import collection"),y}let c=new Set,m=$y(e.controlMap,s,c,e.defaultCollectionAlias,l),d=Wy(e.identifier,e.controlMap,c,e.defaultCollectionAlias,l),u=p`const [${R.currentRouteData}] = ${v.fn(i,{from:d,select:m,where:v.fn(a,R.currentPathVariables,e.defaultCollectionAlias)})};`;return p.joinLines(p`const ${R.currentPathVariables} = ${v.fn(o)};`,u,p`const ${R.getFromCurrentRouteData} = (key) => {
            if (!${R.currentRouteData}) throw new ${n}(\`No data matches path variables: \${JSON.stringify(${R.currentPathVariables})}\`);
            return ${R.currentRouteData}[key];
        };`)}function Ev(e){return`framer-${ve(e)}-override`}function Fv(e,t){if(!(!In(e)||Tn(e)&&!e.fillEnabled))return e.fillType==="color"&&k(e.fillColor)?t(e.fillColor,e,"fill"):Ap(e)}function Av(e){if(!Zu(e))return;let t=e.rootFontSize/16*100;return em(t,"%")}function Lv(e,t){return E(e)?e:v.fn(t.imports.addImport("framer",{exportSpecifier:"safeCSSValue"}),e)}function _M(e,t,r,o,n,i){if(!pe(e)&&!U(e))return;let a=Pl(n,i.declarations,i.variables,i.valueTransforms),s=pe(e)?":root":"html",l=`${s} body`,c=Av(t),m=Fv(t,a)??"none",d=[he`${l} { background: ${Lv(m,i)}; }`];E(c)&&d.push(`${s} { font-size: ${c}; }`);for(let u of r){let f=o[u.id];if(f){let h=Fv(u,a)??"none",y=Av(u),S=[];if(vt(m,h)||S.push(he`${l} { background: ${Lv(h,i)}; }`),vt(c,y)||S.push(`${s} { font-size: ${y}; }`),S.length===0)continue;d.push(he`@media ${f} { ${he.join(S," ")} }`)}}return he.join(d," ")}function JM(e,t,r,o,n){let i=qh(Jh(o)),a=[],s=new Map;if(pe(n)){let y=n.getPrimaryVariant(),S={marginBottom:En(y,t)};t.css.createRule(`[${Pi}="true"] > #overlay`,Rn(S));for(let C of r){let T={marginBottom:En(C,t)},N=Kr(T,S);!N||xe(N)||t.css.createRule(`[${Pi}="true"] > #overlay`,Rn(N),C.id)}}Pn(t.css.get(),s);let l={},c={};for(let y of r){let S=i[y.id];if(S){let C=new Map;if(Pn(t.css.get(y.id),C),!C.size)continue;pe(n)?(l[y.id]=Fn(C),c[y.id]=`.${Ev(y.id)}`):a.push(he`@media ${S} { ${he.join(Fn(C)," ")}}`)}else Pn(t.css.get(y.id),s)}let m=[],d=[];for(let y of t.css.sharedStyleIds){let S=Fe("css",y),C=t.imports.addImport(`../${S}`,{exportSpecifier:"*",importBinding:"sharedStyle"});d.push(C),m.push(v.fn(t.imports.addImport("framer",{exportSpecifier:"getFontsFromSharedStyle"}),p`${C}.fonts`))}let u;for(let y of t.componentPresetIds){u??=t.imports.addImport(`../${Un}`,{exportSpecifier:"*",importBinding:"componentPresets"});let S=p`${u}.fonts?.[${y}]`;m.push(p`(${S} ? ${v.fn(t.imports.addImport("framer",{exportSpecifier:"getFontsFromComponentPreset"}),S)} : [])`)}let f=[ds,...Fn(s),...d.map(y=>p`...${y}.css`),...t.css.conditionalRules(e)],h=qM(n,t,f,a,l,c,i);return{sharedStyleImports:d,sharedFontArrays:m,mediaQueries:i,css:p`const ${R.css} = ${h}`}}function qM(e,t,r,o,n,i,a){if(We(e)||Ve(e))return r;if(U(e))return[...r,...o];if(pe(e)){let s=t.declarations.file.dedupe("breakpointRules",n),l=t.declarations.file.dedupe("breakpointKeys",p`Object.keys(${s})`),c=t.declarations.file.dedupe("selectors",i),m=t.declarations.file.dedupe("rules",r),d=t.declarations.file.dedupe("mediaQueries",a),u=t.bindings.create("target"),f=t.bindings.create("query"),h=t.bindings.create("selector"),y=t.bindings.create("rule"),S=t.imports.addImport("framer",{exportSpecifier:"RenderTarget"});return p`(target) => {${p.joinLines(p`const isStaticRenderer = ${u} === ${S}.canvas || ${u} === ${S}.export`,p`if (!isStaticRenderer) {${p.joinLines(p`return [...${m}, ...${l}.map(key => {${p.joinLines(p`const ${f} = ${d}[key]`,p`return ${he`@media ${f} { ${p`${s}[key].join(" ")`} }`}`)}})]`)}}`,p`return [...${m}, ...${l}.flatMap(key => {${p.joinLines(p`const ${h} = ${c}[key]`,p`return ${s}[key].map(${y} => ${he`${h} {${y}}`})`)}})]`)}}`}z(e)}function XM(e){if(e.events.needsPathVariables)return`const ${AC} = React.useContext(${e.imports.addImport("framer",{exportSpecifier:"PathVariablesContext"})});`}function KM(e,t,r,o,n){let i=Wd(e);g(i,"The primary variant should have a default size as it must be a FrameNode.");let a={default:i},s={[e.id]:`framer-v-${ve(e.id)}`},l={},c={},m={},d=$d(o.treeStore.tree,e);d&&(m[e.id]=d);let u=r.events.variantOnAppearId.get(e.id),f={};!w(u)&&!v.isUndefined(u)&&(f.default=u);for(let h of t){r.metrics.count("variants");let y=GM(h);if(y){let x=l[y.topLevel]??{};x[y.type]=y.type==="loading"?n?.has(y.topLevel):!0,l[y.topLevel]=x,c[y.topLevel]=[...c[y.topLevel]??[],h.id]}else s[h.id]=`framer-v-${ve(h.id)}`;let S=Wd(h);S&&(a[h.id]=S);let C=$d(o.treeStore.tree,h);C&&(m[h.id]=C);let T=r.events.variantOnAppearId.get(h.id),N=Q(f[h.replicaInfo.inheritsFrom??""]??u);!w(T)&&Q(T)!==N&&(f[h.id]=T)}return{gestures:l,breakpoints:m,classNames:s,sizes:a,appearEventMap:f}}function YM(e,t,r){let o=[];if((pe(e)||U(e))&&r){let i=t.declarations.file.dedupe("HTMLStyle",p`({value}) => {${p.joinLines(p`const onCanvas = ${v.fn(t.imports.addImport("framer",{exportSpecifier:"useIsOnFramerCanvas"}))}`,p`if (onCanvas) return null`,p`return ${le.tag(p`style`,new O({"data-framer-html-style":"",dangerouslySetInnerHTML:{__html:p`value`}}))}`)}}`);o.push(a=>le`${p.joinLines(le.tag(i,new O({value:r})),a)}`)}if(We(e)){let i=t.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a=t.imports.addImport("framer-motion",{exportSpecifier:"motion.create"}),s=t.declarations.file.dedupe("Variants",v.fn(a,p`${i}.Fragment`));o.push(l=>le.tag(s,new O({initial:!1,animate:R.variants}),l))}if(U(e)||pe(e)||Ve(e)){let i=new O({id:pe(e)?Ra:wa});o.push(a=>le`${p.joinLines(a,le.tag(p`div`,i))}`)}let n=t.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"});if(o.push(i=>le.tag(n,new O({id:p`layoutId ?? ${R.defaultLayoutId}`}),i)),U(e)||pe(e)){let i=t.imports.addImport("framer",{exportSpecifier:"GeneratedComponentContext"});o.push(a=>le.tag(p`${i}.Provider`,new O({value:{primaryVariantId:e.baseVariantId,variantClassNames:R.variantClassNames,isLayoutTemplate:pe(e)?!0:void 0}}),a))}return o}function Ov(){let e=new v("a6932ec");return p`// Generated by Framer (${e})`}var Bv={ref:R.ref,restProps:R.restProps,style:R.style,className:R.className,layoutId:R.layoutId},Gd=p`css`,ji=p`Icon`,Ol=p`Component`,_i=p`Props`,QM=[...Object.values(Bv),Gd,ji,Ol,_i].map(e=>Q(e)),zv=xt(async(e,t,r)=>{let{serializationId:o}=r,{assetMap:n,engineChanges:i,modulesStore:a,treeStore:s,vectorsStore:l}=t,c=s.tree.getScopeNodeFor(e);g(Me(c),"Vector set item must be in a VectorSetNode.");let m=s.tree.get(e.id);g(m,"Must have a source node to serialize");let d={assetMap:n,engineChanges:i,modulesStore:a,treeStore:s},{ctx:u,jsx:f,svg:h,type:y}=Uf(m,c,d,o,QM),S=ut("vectorSet",c.id,"default").localId,C=a.getPersistedModuleByLocalId(S);g(C,"VectorSet must be persisted.");let T=s.tree.getRect(e),{propertyControls:N,variableMap:x,types:V,props:A}=Es(c,d,u,"VectorSet","vector",T),F=ZM(u),j={name:m.name??"Vector",empty:eV(m)?!0:void 0,color:F,set:{localId:S,id:c.id,moduleId:C.id}},W=u.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),K=u.imports.addImport("framer",{exportSpecifier:"withCSS"}),ce=tV[y],D=re.lines(...u.declarations.file.list(),p`interface ${_i} extends ${W}.HTMLAttributes<${W}.${ce}> { ${V??p``} }`,p`const ${Ol}: ${W}.ComponentType<${_i}> = ${W}.forwardRef<${W}.${ce}, ${_i}>(function(props, ${Bv.ref}) {${p.joinLines(A,...u.declarations.component.list(),p`return (${f})`)}})`,p`const ${Gd} = ${u.css.rules}`,vo("This is a generated Framer component.",{framerIntrinsicWidth:T.width,framerIntrinsicHeight:T.height,framerSupportedLayoutWidth:"any-prefer-fixed",framerSupportedLayoutHeight:"any-prefer-fixed",framerVariables:x&&JSON.stringify(x),framerImmutableVariables:!0,framerVector:JSON.stringify(j),framerDisableUnlink:jy.has(j.set.moduleId)?!0:void 0}),p`const ${ji}: ${W}.ComponentType<${_i}> = ${v.fn(K,Ol,Gd,o)} as typeof ${Ol};`,p`${ji}.displayName = ${m.name??"Vector"};`,p`export default ${ji}`,N&&v.fn(u.imports.addImport("framer",{exportSpecifier:"addPropertyControls"}),ji,new v(`${Q(N)} as any`)));return l.cache(e.id,{svg:Q(h),color:F}),Ps([{revision:m.moduleSourceRevision,type:"vector",source:new v(re.sections(re.linesFrom(u.imports.statements),D)),artifacts:{files:[{name:"icon.svg",type:"svgIcon",content:Q(h)}]}}])});function ZM(e){if(e.colors.uniqueColorCount!==1)return;let t=e.colors.singleColor;if(t)return{type:"static",value:t};let r=e.colors.singleVariableColor;if(r)return{type:"variable",value:ve(r)}}function eV(e){return!e.children||e.children.length===0?!0:e.children.every(t=>t.visible===!1)}var tV={0:p`HTMLImageElement`,1:p`HTMLDivElement`,3:p`HTMLSVGElement`,2:p`HTMLSVGElement`};var Uv=xt(async(e,{modulesStore:t},r)=>{let o=[];for(let a of e.getVectorSetItems()){let s=ut("vector",a.id,"default").localId,l=t.getPersistedModuleByLocalId(s);l&&o.push({id:a.id,name:a.name??"Vector",moduleId:l.id,saveId:r.includeVectorSetSaveIds?l.saveId:void 0})}let n={framerVectorSet:JSON.stringify({name:e.name??"Set",items:o})},i=new v(re.lines(vo("This is a generated Framer component.",n),p`const VectorSet: React.ComponentType<unknown> = function VectorSet() { return null; };`,p`export default VectorSet;`));return[{revision:e.moduleSourceRevision,type:"vectorSet",source:i}]});function an(e,t){if(We(e,!0))return["canvasComponent"];if(U(e,!0))return["screen","webPageMetadata"];if(pe(e,!0))return["layoutTemplate"];if(Ne(t.get(e.parentid)))return["screen"];if(Me(e,!0))return["vectorSet"];if(Ne(e,!0))return["prototype"];if(St(e,!0))throw new Error("Unhandled scope node type");if(ot(e))return["collection","draftCollection"];if(jo(e))return["css"];if(Ir(e))return["componentPresets"];if(pn(e)&&Me(t.getScopeNodeFor(e)))return["vector"];if(nr(e))return["siteMetadata"];if(Rt(e))return["vector"];if(Ve(t.get(e.parentid)))return["design"];throw new Error(`Unsupported component node: ${e.__class} ${e.id}`)}function Hv(e){return Math.ceil(e/Math.ceil(e/100))}var Wv=class{constructor(t,r){I(this,"status",null);I(this,"results");I(this,"reportProgress");I(this,"onDone");this.reportProgress=t,this.onDone=r}async import(t,r,o){this.status="importing",this.results={scopeId:r,vectors:[],targetLayout:o};let n=o?{left:o.x+o.width*2,top:o.y}:{left:0,top:0};for(let i=0;i<t.length;i++){let a=t[i];if(!a)continue;let s=await oV(a,r,n);if(this.status!=="importing")return;s&&this.results.vectors.push(s),this.reportProgress?.({status:this.status,finishedCount:i+1})}await this.done()}cancel(){this.status="canceled"}async done(){this.results&&await this.onDone?.(this.results),this.status="done"}},$v="run-svgo",rV=1e6;async function oV(e,t,r){if(e.size>rV){Sr({type:"add",variant:"error",key:$v,text:"Your SVG is too large to upload. You may need to convert to a different format, such as PNG.",icon:"error",duration:5e3});return}try{let o=await e.text(),n=ty(o),i=iV(e.name),a=Jg(o,Lg.createEmpty,n);return a?(a.parentid=t,a.set({name:i,isVectorSetItem:!0,...r}),{node:a,size:n}):void 0}catch(o){console.error("Failed to insert SVG:",o),Sr({type:"add",variant:"error",key:$v,text:"Failed to insert SVG",icon:"error"});return}}var nV=/[_-]/gu;function iV(e){let[t]=Iu(e);return Bu(t.replace(nV," "))}var aV=2;function jd(e){if(U(e))return aV}function O9(e,t,r){if(t.type==="siteMetadata"||t.type==="webPageMetadata")return!0;let o=an(e,r).includes(t.type);if(g(e.id===t.name&&o,"sourceNode and module must match"),As(t))return!1;let n=jd(e);if(n===void 0)return!0;let i=t.metadata.codeGenVersion;return H(i)&&i>=n}var _d=1;function sV(e){let t=e.metadata.compatibleTextStyleVersion;return H(t)?t:0}function W9(e){return sV(e)<_d}var Do=io(dn());function Gv(e,t){if(We(e))return"Smart Component";if(U(e))return"web page";if(Ne(t.get(e.parentid)))return"prototype screen";if(Ne(e))return"prototype";if(ot(e))return"CMS collection"}function jv(e,t){return U(t)?fy(e,t):t.name??void 0}function _v(e,t="module",r){let o="is too large and will not update";Sr({type:"add",variant:"warning",text:r?(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsxs)(Ms,{children:["The ",t]})," \u201C",r,"\u201D ",(0,Do.jsx)(Ms,{children:o})]}):(0,Do.jsxs)(Ms,{children:["A ",t," ",o]}),key:`module-too-large-${e}`,duration:1/0,extraAction:{title:"Learn more",onClick(){$t("ui_interaction",{page:"module-too-large-toast",id:"learn_more"}),Og("https://www.framer.com/help/articles/how-to-fix-module-too-large-warning/")}}});let i=`module-too-large-toast-${t.split(" ").join("-")}`;$t("ui_impression",{page:i})}var Bl=class{constructor(){I(this,"queue",[]);I(this,"synchronize",async()=>{for(let t of this.snapshot())await t.task()})}snapshot(t){return this.queue=this.queue.filter(t??(r=>!r.promise.isResolved())),Array.from(this.queue)}get size(){return this.snapshot().length}async request(t,r){let o=new pu;this.queue.push({id:r?.id,promise:o,task:()=>(o.state!=="initial"||(o.pending(),(t()??Promise.resolve()).finally(()=>o.resolve())),o)}),r?.synchronize!==!1&&await this.synchronize()}};function zl(e,t){if(!gm(e)||!t.isGroundNode(e))return!1;let r=t.get(e.parentid);return!!(r&&Ne(r))}function Zr(e){if(nr(e))return cy.localIdName;switch(e.id){case ng:return"componentPresets";default:return e.id}}function sn(e,t){return an(e,t).map(o=>Fe(o,Zr(e)))}function Ji(e,t,r){return e?sn(e,t).every(o=>!w(r.getModuleEntryByLocalId(o))):!1}function Jv(e,t){if(!ko(e,t)||Ve(e))return!1;if(!St(e)){let r=t.getScopeNodeFor(e);if(Ve(r))return!1}return!0}function ko(e,t){if(nr(e))return!0;if(!t.has(e.id))return!1;if(Wt(e))return!0;if(di(e))return!1;if(ot(e)||jo(e)||Ir(e)||Me(e))return!0;if(Rt(e)){let r=t.get(e.parentid);return Me(r)}if(Ve(e))return!1;if(t.isGroundNode(e)&&ir(e)){let r=t.getScopeNodeFor(e);if(Ve(r))return!0}return!!(Ne(e)||zl(e,t))}var lV=1e4,cV=1e3,qi=fe("CodeGenerationStore");function dV(e){return!(ot(e)||Ne(e)||nr(e)||ir(e)||Ir(e)||Me(e))}function uV(e,t){if(!Rt(t))return;let r=e.getScopeNodeFor(t);return g(Me(r),"Vector set item must be in a VectorSetNode."),r.variables}function mV(e){let t=e.name?.trim();return t||(nt(e)?"Text":_h(e,e.__class))}function qv(e,t,r,o,n){let i={},a=mV(t);i.metadata||(i.metadata={});let s=[...n?.files??[]];dV(t)&&s.push({name:"tree.json",type:"nodeTree",content:JSON.stringify(Object.assign(t.toJS(),{__treeSerializationVersion:e.serializationVersion,__vectorSetVariables:uV(e,t)}))});let l=jd(t);l&&(i.metadata.codeGenVersion=l);let c=n?.packageDependencies;return c&&(i.metadata.packageDependencies=Array.from(c)),Iy(r)&&(i.metadata.compatibleCmsVersion=vy),lo(t)&&(i.metadata.compatibleTextStyleVersion=_d),i.assets=n?.assets?Array.from(n.assets):[],{...i,title:a,files:s,errors:n?.errors??[],type:r,name:o}}async function pV(e,t,r,o){if(e&&t instanceof fu&&t.code===1001){let n=kh(e,a=>r.treeIndex.getScopeIdFor(a))??void 0,i=new gs({type:"CodeGeneration",nodeId:Wt(e)?e.baseVariantId:e.id,reason:"FileTooLarge",sourceNodeId:e.id,scopeId:n});_v(e.id,Gv(e,r.tree),jv(r.tree,e)),await o(a=>{if(a.isViewOnly)return;a.lineage.setEditReason("codegeneration");let s=a.ensureErrorListNode();qi.debug("Writing ClientFileTooLarge error to tree for",e.id),a.insertNode(i,s.id)})}else qi.reportError(t)}var er,Xi,Ul=class{constructor(t,r,o,n){this.treeStore=t;this.modulesStore=r;this.runWhenIdle=o;this.scheduleDocumentUpdateIgnoringUndo=n;$(this,er,new Bl);$(this,Xi,new pa({delay:lV,task:()=>this.runWhenIdle(()=>void b(this,er).synchronize())}));I(this,"process",b(this,er).synchronize);I(this,"changeScope",()=>b(this,Xi).debounce(cV));I(this,"isIdle",()=>b(this,er).size===0);I(this,"isBlocking",()=>b(this,er).snapshot().some(t=>t.promise.state==="pending"))}enqueue(t,r){b(this,er).snapshot(a=>a.promise.isResolved()?!1:a.id===t?a.promise.state!=="initial":!0);let o=this.treeStore.tree.get(t);if(!o||!Jv(o,this.treeStore.tree))return;let n=Zr(o),i={};for(let{type:a,artifacts:s}of r){let l=qv(this.treeStore.tree,o,a,n,s);i[Fe(a,n)]=l}b(this,er).request(async()=>{try{qi.debug("Persisting transient modules for",t),await this.modulesStore.upsertBatch(i)}catch(a){await pV(o,a,this.treeStore,this.scheduleDocumentUpdateIgnoringUndo)}},{id:t,synchronize:!1})}async persist(t,r,o){let n=this.treeStore.tree.get(t);if(n)return this.enqueue(t,r),o?b(this,Xi).debounce():(await b(this,er).synchronize(),sn(n,this.treeStore.tree).map(i=>this.modulesStore.getPersistedModuleByLocalId(i)))}async persistBatch(t){let r={},o="batch";for(let n in t){let i=this.treeStore.tree.get(n),a=t[n];if(!i||!a)continue;let s=Zr(i),l=new Set;for(let{type:c,artifacts:m}of a){let d=Fe(c,s);g(!l.has(d),"Duplicate local module id",d),l.add(d),r[d]=qv(this.treeStore.tree,i,c,s,m),o+=`-${d}`}}b(this,er).snapshot(n=>n.promise.isResolved()?!1:n.id===o?n.promise.state!=="initial":!0),await b(this,er).request(async()=>{qi.debug("Persisting transient modules for batch: ",o);try{await this.modulesStore.upsertBatch(r)}catch(n){qi.reportError(n)}},{id:o,synchronize:!0})}get size(){return b(this,er).size}};er=new WeakMap,Xi=new WeakMap;var fV=()=>({stylePresets:[],componentPresets:[],collections:[],smartComponents:[],screens:[],prototypes:[],webpages:[],metadata:[],layoutTemplates:[]}),Ae=fe("CodeGenerationStore");var hV=500,Kv=1500,gV=6e4;function yV(e){for(let t in e.to)if(t in ug||t in dg||t in Kh)return!0;return!1}function SV(e){return Me(e)?hV:Kv}var Po,Ke,eo,ti,Ki,ri,oi,It,Wl,Yv,Xv=class extends So{constructor(r,o,n,i,a,s,l,c,m,d,u,f=new Map){super();this.scheduler=r;this.treeStore=o;this.modulesStore=n;this.vectorsStore=i;this.aiGenerationStore=a;this.assetMap=s;this.timeline=l;this.engineChanges=c;this.scheduleDocumentUpdateIgnoringUndo=m;this.updateTreeCache=d;this.measureNodes=u;$(this,Wl);$(this,Po,new Set);$(this,Ke);$(this,eo,new Map);$(this,ti);$(this,Ki,new pa({delay:Kv,maxDelay:gV,task:()=>this.scheduler.runWhenIdle(()=>{this.generateAndUpdateQueuedComponents()})}));$(this,ri,new Map);$(this,oi);I(this,"testing",{setComponentGenerationQueue:r=>{ie(this,Ke,r)},flushQueuedCallbacks:()=>{b(this,eo).forEach(r=>r.forEach(o=>o()))},generateAndUpdateQueuedComponents:r=>this.generateAndUpdateQueuedComponents(r),setSerializationId:r=>{ie(this,oi,r)},setModulesStore:r=>{Object.assign(this,{modulesStore:r}),Object.assign(this.persistence,{modulesStore:r})},waitForProcessing:async r=>{await this.serialization.promise(r)}});I(this,"persistence");I(this,"moduleTypeOrder",{localization:0,webPageMetadata:1,siteMetadata:2,collection:3,draftCollection:4,css:5,componentPresets:6,vector:7,vectorSet:8,canvasComponent:9,screen:10,["prototype"]:11,codeFile:12,config:13,layoutTemplate:14,design:15,kit:16});$(this,It,new Map);I(this,"serialization",{idle:async()=>{let r=[];for(let o of b(this,It).keys())r.push(this.serialization.promise(o)?.then(()=>this.untilCompiled(o)));await Promise.all(r)},isIdle:()=>b(this,It).size===0,prepare:r=>{b(this,Ke).delete(r);let o=b(this,It).get(r)??ma();b(this,It).set(r,o)},cancel:r=>{b(this,Ke).delete(r),b(this,It).get(r)?.resolve(),b(this,It).delete(r)},preparing:r=>b(this,It).has(r),promise:r=>b(this,It).get(r),commit:async(r,o,n)=>{let i=()=>{b(this,It).get(r.id)?.reject(),b(this,It).delete(r.id)};try{let a=await Ze(this,Wl,Yv).call(this,r,o,n);return a||i(),a}catch(a){throw Ae.reportError(a),i(),a}}});ie(this,Ke,f),ie(this,ti,this.timeline.openNodeChangesReader()),this.persistence=new Ul(this.treeStore,this.modulesStore,h=>this.scheduler.runWhenIdle(h),h=>this.scheduleDocumentUpdateIgnoringUndo(h)),pC(()=>{if(fa.isTest||this.treeStore.tree.isViewOnly)return!1;if(this.hasBlockingUpdates()){if(Ae.debug("Showing Unsaved Changes dialog (generation queue #: ",b(this,Ke).size,", component ids to generate: ",[...b(this,Ke).keys()],")"),!fa.isTest){let h=this.getMetrics();h.paused>1?Ae.reportError("Tab closed with paused code generations",h):(h.persisting>5||h.serializing>5||h.queue>5)&&Ae.reportError("Tab closed with multiple code generations in progress",h)}return b(this,Po).clear(),this.generateAndUpdateQueuedComponents().then(()=>{this.persistence.process()}).catch(h=>Ae.reportError(h)),!0}return!1}),window.addEventListener("blur",async()=>{try{await this.generateAndPersistAllQueuedComponents()}catch(h){Ae.reportError(h)}})}isIdle(){return b(this,Ke).size===0&&this.serialization.isIdle()&&this.persistence.isIdle()}getMetrics(){return{queue:b(this,Ke).size,paused:b(this,Po).size,serializing:b(this,It).size,persisting:this.persistence.size}}documentDidLoad(){b(this,Ke).clear(),b(this,eo).clear(),b(this,ri).clear()}telemetrySession(r){let o=b(this,ri).get(r);if(o)return o;let n=this.treeStore.tree.get(r);g(n,"TelemetrySession: source node must exist");let i=new Ws(n);return b(this,ri).set(r,i),i}getSerializationId(){return b(this,oi)?`framer-${b(this,oi)}`:`framer-${zn(5)}`}async generateAndPersistAllQueuedComponents(){await this.ensureSiteMetadataModule(),await this.generateAndUpdateQueuedComponents(),await this.serialization.idle(),await this.persistence.process()}debugGetComponentSourceNodes(){let r=fV();g(!1,"This method should only be used in tests.");for(let{node:o,skipChildren:n}of this.treeStore.tree.root.walkWithSkipChildren())U(o)?(r.webpages.push(o),r.metadata.push(o),n()):We(o)?(r.smartComponents.push(o),n()):ot(o)?(r.collections.push(o),n()):jo(o)?(r.stylePresets.push(o),n()):Ir(o)?r.componentPresets.push(o):zl(o,this.treeStore.tree)?(r.screens.push(o),n()):Ne(o)?r.prototypes.push(o):nr(o)?r.metadata.push(o):pe(o)&&r.layoutTemplates.push(o);return r}postProcess(r,o,n){if(!this.treeStore.tree.isViewOnly){if(n){b(this,ti).clear();return}this.ingestChanges(r),b(this,Ki).debounce(SV(o))}}ingestChanges(r){for(let[o,n]of b(this,ti).read()){if(n.length===0||n.every(a=>a.ignoreInCodeGeneration))continue;let i=r.get(o);if(i){if(Ot(i,this.treeStore.tree)){Mp(i,n)&&this.addChangeToQueue(i);continue}if(nr(i)){if(!n.some(yV))continue;this.addChangeToQueue(i)}else if(Ne(i))this.addChangeToQueue(i);else{let a=this.treeStore.treeIndex.getGroundNodeIdFor(o),s=r.get(a);if(!s||G(s))continue;let l=r.getScopeNodeFor(s);if(!Ne(l))continue;this.queueCanvasPageNodesFollowingLinks(r,s)}}}}queueCanvasPageNodesFollowingLinks(r,o){if(this.addChangeToQueue(o),!(!o.cache.links||o.cache.links.size===0))for(let n of o.cache.links){let i=this.treeStore.treeIndex.getGroundNodeIdFor(n),a=r.get(i);!a||G(a)||this.queueCanvasPageNodesFollowingLinks(r,a)}}changeScope(){this.treeStore.tree.isViewOnly||fa.isTest||this.isIdle()||this.serialization.idle().then(()=>this.generateAndUpdateQueuedComponents()).then(()=>{if(!at.isOn("prioritizedModuleEvaluation")){this.persistence.process();return}this.persistence.isIdle()||this.persistence.changeScope()}).catch(r=>Ae.reportError(r))}async createVectorSet(r,o){let n=r[0];if(!n)return;let i=this.treeStore.tree.getScopeNodeFor(n);g(Me(i),"VectorSet: VectorSetNode must exist.");let a=performance.now(),s=await this.batchSerializeVectors(r,o);if(!s)return;let l={},c=0,m=Object.keys(s).length,d=Hv(m),u=[];for(let f in s){let h=s[f];h&&(l[f]=h,c++,!(c%d!==0&&c!==m)&&(u.push(l),l={}))}for(let f=0;f<u.length;f++){let h=u[f];h&&(await this.persistence.persistBatch(h),o?.("persisting",f))}await this.forceComponentUpdate(i.id),Ae.debug("createVectorSet: Spent ",performance.now()-a,"ms creating a new vector set.")}async createModuleFromComponentSource(r,o){if(g(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot create smart components or web pages."),g(ko(r,this.treeStore.tree),"CodeGenerationStore: componentSourceNode must be a valid component source."),Ji(r,this.treeStore.tree,this.modulesStore))return;Ae.debug("createModuleFromComponentSource",r.id),this.serialization.prepare(r.id);let i=await this.generateComponent(r.id,1,void 0,{intrinsicSize:o});if(!i)throw new Error("Code not generated");return await this.compileOutput(r,i),sn(r,this.treeStore.tree).map(a=>this.modulesStore.getPersistedModuleByLocalId(a))}revisionNodes(){let r=[];for(let o of this.treeStore.tree.root.children)Ot(o,this.treeStore.tree)&&r.push(o),(Ir(o)||Wu(o))&&o.children.forEach(n=>{Ot(n,this.treeStore.tree)&&r.push(n),ot(n)&&n.getUnsortedChildren().forEach(i=>{Ot(i,this.treeStore.tree)&&r.push(i)})});return r}nodesWithStaleModules(r,o){let n=[],i=o?.ignoreHint??!1;for(let a of this.revisionNodes())so(a)||r&&!r(a)||(!i&&a.moduleSourceRevisionHint!==a.moduleSourceRevisionCommittedHint||!this.allModulesAreAtRevision(a.id))&&n.push(a);return n}async updateComponent(r,o=0){g(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot generate smart component or web page updates.");let n=this.treeStore.tree.get(r);if(!n||!ko(n,this.treeStore.tree))return!1;if(this.serialization.preparing(r))return await this.serialization.promise(r),await this.untilCompiled(r),!0;Ae.debug("Update component: ",r,", Condition: ",o);let i=b(this,Ke).get(r);this.serialization.prepare(r);let a=await this.generateComponent(r,o,i);return a?this.compileOutput(n,a):!1}async forceComponentUpdate(r){return g(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot generate smart component or web page updates."),await this.updateComponent(r,2)?(await this.persistence.process(),!0):!1}queueCallbackAfterComponentCompilation(r,o){let n=b(this,eo).get(r);n?n.push(o):b(this,eo).set(r,[o])}untilCompiled(r){return new Promise(o=>{this.queueCallbackAfterComponentCompilation(r,o)})}calculateNewModuleRevision(r){let o=this.treeStore.tree.get(r);if(!o||!Ot(o,this.treeStore.tree))return 1;if(!(!id(this.treeStore.tree,r)||!this.treeStore.tree.has(r)))return uC(r,this.scheduleDocumentUpdateIgnoringUndo)}allModulesAreAtRevision(r,o){let n=this.treeStore.tree.get(r);if(!n||!Ot(n,this.treeStore.tree))return!1;let i=o??n.moduleSourceRevision;return an(n,this.treeStore.tree).every(a=>this.modulesStore.forType(a).getByStableName(Zr(n)).sourceRevision()===i)}async ensureDependencyModulesExist(){for(let r of this.revisionNodes()){if(!ko(r,this.treeStore.tree))return;if(!Ji(r,this.treeStore.tree,this.modulesStore))try{await this.updateComponent(r.id)}catch(o){Ae.error("Error updating dependency module",r.id,o)}}}async ensureSourceNode(r){let o=this.treeStore.tree.get(r),n=St(o)&&!o.isLoaded()?await o.load():o;if(n){if(U(n)&&await this.ensureSiteMetadataModule(),ot(n)&&await this.ensureDependentModulesAreCompatibleWithCollection(n),Rt(n)){let i=this.treeStore.tree.getScopeNodeFor(n);if(!Me(i))return;let a=Fe("vectorSet",i.id);if(this.modulesStore.getModuleEntryByLocalId(a))return;await this.createModuleFromComponentSource(i)}await this.ensureAllNodesWithLinksHaveLinkedScopesLoaded(n)}}async ensureSiteMetadataModule(){if(this.treeStore.tree.isViewOnly)return;let r=this.treeStore.tree.root;if(!Ji(r,this.treeStore.tree,this.modulesStore))return this.updateComponent(r.id)}hasBlockingUpdates(){if(b(this,Ke).size>0){for(let[r,o]of b(this,Ke))if(this.treeStore.tree.has(r)&&o)return!0}return!this.persistence.isIdle()||!this.serialization.isIdle()}async updateModules(r,o){let n=this.treeStore.tree.get(r),i=this.timeline.remoteTreeVersion;if(!n||!ko(n,this.treeStore.tree))return!1;let a=[];for(let{revision:l,source:c,type:m,artifacts:d}of o){let u={assets:d?.assets,submodules:d?.submodules,binaryAssets:d?.binaryAssets,preventCircularImports:m==="canvasComponent",telemetrySession:this.telemetrySession(r),treeVersion:i,sourceRevision:l,kitSectionsStructure:d?.kitSectionsStructure,svgIcon:d?.files?.find(y=>y.type==="svgIcon")?.content,stableName:!0},f=this.modulesStore.forType(m).getByStableName(Zr(n)),h=re.sections(Ov(),c);f.currentSourceEquals(h,u)||a.push({localId:f.localId,source:h,options:u})}if(a.length===0)return!1;let s=await this.modulesStore.updateSources(a);return Rt(n)&&this.vectorsStore.delete(r),U(n)&&this.aiGenerationStore.deleteKitSectionsStructure(r),s}allModulesExistForSources(r,o){let n=Zr(r);for(let i of o)if(!this.modulesStore.getPersistedModuleByLocalId(Fe(i.type,n)))return!1;return!0}async compileOutput(r,o){if(this.treeStore.tree.isViewOnly)return!1;let n=o.slice().sort((a,s)=>this.moduleTypeOrder[a.type]-this.moduleTypeOrder[s.type]);if(this.allModulesExistForSources(r,n))await this.updateModules(r.id,n);else for(let a of n){let s=await this.updateModules(r.id,[a]),l=Zr(r);!this.modulesStore.getPersistedModuleByLocalId(Fe(a.type,l))&&s&&await this.persistence.persist(r.id,[a])}return ot(r)&&await this.ensureDependentModulesCanRenderCollectionColors(r),b(this,eo).get(r.id)?.forEach(a=>a()),b(this,eo).delete(r.id),this.persistence.persist(r.id,o,!0),!0}pauseCodeGeneration(r){return Ae.debug("Pausing code generation for",r),b(this,Po).add(r),()=>{Ae.debug("Resuming code generation for",r),b(this,Po).delete(r),b(this,Ki).debounce()}}async generateAndUpdateQueuedComponents(r){if(this.treeStore.tree.isViewOnly)return[];await this.ensureDependencyModulesExist();let o=[],n=new Map;for(let[a]of b(this,Ke)){if(b(this,Po).has(a)||this.serialization.preparing(a))continue;let s=this.treeStore.tree.get(a);if(!s||!ko(s,this.treeStore.tree)||r&&!an(s,this.treeStore.tree).includes(r)){b(this,Ke).delete(a);continue}if(this.serialization.prepare(a),Rt(s)){let l=this.treeStore.tree.getScopeNodeFor(s);if(!l)continue;let c=n.get(l.id)??[];c.push(s),n.set(l.id,c)}else o.push(s)}let i=new Set;Ae.debug("Batch generating queued vector nodes");for(let a of n.values())try{let s=await this.batchSerializeVectors(a,void 0,i);for(let l in s)this.persistence.persist(l,s[l],!0)}catch{}Ae.debug("Generating queued components",{ids:o.map(Ls)});for(let a of o)try{Ae.debug("Flushing queue of ",a.id);let s=await this.generateComponent(a.id,1);s&&(await this.compileOutput(a,s),i.add(a.id))}catch{}return Array.from(i)}async batchSerializeVectors(r,o,n){let i=r[0];if(!i)return;await this.ensureSourceNode(i.id),await this.ensureSourceCache(i.id),r.forEach(d=>this.serialization.prepare(d.id));let a=await mC(r,this.scheduleDocumentUpdateIgnoringUndo);g(a,"VectorSet: newModuleRevisions must exist");let s={assetMap:this.assetMap,modulesStore:this.modulesStore,treeStore:this.treeStore,vectorsStore:this.vectorsStore,aiGenerationStore:this.aiGenerationStore,engineChanges:this.engineChanges,measureNodes:this.measureNodes},l=await Promise.all(r.map(async d=>{if(!a[d.id])return;let y=(await this.serializerForSourceNode(d)(d,s,{serializationId:this.getSerializationId()}))?.[0];return g(y,"VectorSet: source must exist.",d.id),this.serialization.promise(d.id)?.resolve(),b(this,It).delete(d.id),[d.id,y]})),c=0,m={};for(let d of l){if(!d)continue;let[u,f]=d;await this.updateModules(u,[f])&&(m[u]=[f],o?.("serializing",c),c++,n?.add(u))}return m}async createVersionedVectorSet(r){await this.generateAndPersistAllQueuedComponents();let o=await this.generateComponent(r.id,2,void 0,{includeVectorSetSaveIds:!0});return!o||!await this.compileOutput(r,o)?!1:(await this.persistence.process(),!0)}async generateComponent(r,o,n,i){Ae.debug("Ensure source node",r),await this.ensureSourceNode(r),Ae.debug("Ensure source cache",r),await this.ensureSourceCache(r);let a=await this.calculateNewModuleRevision(r),s=this.treeStore.tree.get(r);if(!s||!ko(s,this.treeStore.tree)||!this.shouldGenerateUnderCondition(o,s,a,n)){Ae.debug("Cancel serialization",r),this.serialization.cancel(r);return}let l=Wt(s)?s.getPrimaryVariant():s;return Ae.debug("Serialize",r),this.serialization.commit(s,l,i)}shouldGenerateUnderCondition(r,o,n,i){let a=i??b(this,Ke).get(o.id);if(b(this,Ke).delete(o.id),!Ji(o,this.treeStore.tree,this.modulesStore))return!0;switch(r){case 2:return!0;case 1:return!w(n)||!this.allModulesAreAtRevision(o.id,n);case 0:return!w(n)&&!!a&&!this.allModulesAreAtRevision(o.id,n);default:z(r)}}addChangeToQueue(r){if(!this.shouldSkipChange(r)){if(Rt(r)&&this.vectorsStore.queue(r.id),so(r)){let o=r.parentid;g(o,"Collection node has no parent"),b(this,Ke).set(o,!0);return}b(this,Ke).set(r.id,!0)}}serializerForSourceNode(r){return ot(r)?TC:Wt(r)?Hd:jo(r)?Pv:Ne(r)?MC:nr(r)?uy:Ir(r)?RC:Me(r)?Uv:Rt(r)?zv:Ve(this.treeStore.tree.get(r.parentid))?Hd:Vv}shouldSkipChange(r){if(G(r)){let o=Z(r.codeComponentIdentifier);if(kt(o)&&o.type==="screen")return!0}return!1}async ensureSourceCache(r){let o=this.treeStore.tree.get(r);!o||o.update===o.cache.lastUpdate||await new Promise(n=>{this.scheduler.runBeforeNextFrame(()=>{St(o)&&o.update!==o.cache.lastUpdate&&this.updateTreeCache(o.id),n()})})}async ensureDependentModulesAreCompatibleWithCollection(r){let o=Fe("collection",r.id),n=this.modulesStore.getDependentsOfModule(o);!n||n.size===0||await Promise.all(Array.from(n).map(async i=>{let a=i,s=this.modulesStore.getPersistedModuleByLocalId(a);if(!(!s||!As(s)))return this.forceComponentUpdate(s.name)}))}async ensureDependentModulesCanRenderCollectionColors(r){let o=Fe("collection",r.id),n=this.modulesStore.getDependentsOfModule(o);if(!n||n.size===0)return;let i=this.modulesStore.forType("collection").getByStableName(r.id);i&&i.annotations(null,"default")?.framerColorSyntax&&await Promise.all(Array.from(n).map(async a=>{let[s,l]=Ka(a);s==="draftCollection"||this.modulesStore.forType(s).getByStableName(l)?.annotations(null,"default")?.framerColorSyntax||await this.forceComponentUpdate(l)}))}async ensureAllNodesWithLinksHaveLinkedScopesLoaded(r){let o=new Set;this.treeStore.tree.beginAllowPartialScopeAccess();for(let n of r.walkWithSkipChildren()){if(!it(n.node))continue;let i=n.node.getLink();if(!ka(i))continue;let a=this.treeStore.tree.get(i.webPageId);!a||a.loaded||this.modulesStore.forType("screen").getByStableName(i.webPageId)?.annotations(null,"default")?.framerScrollSections||(o.add(a),n.skipChildren())}this.treeStore.tree.endAllowPartialScopeAccess(),await this.treeStore.tree.loadScopes(Array.from(o))}};Po=new WeakMap,Ke=new WeakMap,eo=new WeakMap,ti=new WeakMap,Ki=new WeakMap,ri=new WeakMap,oi=new WeakMap,It=new WeakMap,Wl=new WeakSet,Yv=async function(r,o,n){if(!nr(r)&&!this.treeStore.tree.has(o.id))return;let i=this.telemetrySession(r.id),a=i.start("synchronize"),s=performance.now();Ae.debug("Waiting for ModulesStore to be idle",{id:r.id}),await this.modulesStore.whenIdle();let l=performance.now()-s;Ae.debug("Waited",Math.round(l/1e3*100)/100,"seconds for ModulesStore to be idle",{id:r.id}),a.end();let c=r.draftOrCurrent();if(St(c)&&(!c.isLoaded()||c.loaded.children?.length===0))return;let m=i.start("serialize");ot(r)&&CV(r,this.treeStore,this);let d=this.serializerForSourceNode(r);b(this,It).get(r.id)?.resolve(),b(this,It).delete(r.id);let u=await d(r,{assetMap:this.assetMap,modulesStore:this.modulesStore,treeStore:this.treeStore,vectorsStore:this.vectorsStore,aiGenerationStore:this.aiGenerationStore,engineChanges:this.engineChanges,measureNodes:this.measureNodes},{serializationId:this.getSerializationId(),initialIntrinsicSize:n?.intrinsicSize,includeVectorSetSaveIds:n?.includeVectorSetSaveIds});return u.forEach(({source:f,artifacts:h})=>{if(Ae.trace("serializeComponent",`
>>>> >>>>
`,Q(f),`
<<<< <<<<`),h?.submodules)for(let[y,S]of h.submodules)Ae.trace("serializeComponent",`
>>>>`,y,`>>>>
`,S,`
<<<<`,y,"<<<<")}),m.end(u),u};function CV(e,t,r){let o=e.instanceIdentifier,n=P.dataForIdentifier(o);if(!n||!Object.values(n.properties).some(s=>s?.type==="image"))return;let a=new Set;for(let s of t.tree.root.children){if(!St(s))continue;if(U(s)&&s.dataIdentifier===o){a.add(s);continue}s.loaded?.some(c=>Le(c)&&c.dataIdentifier===o)&&a.add(s)}a.forEach(s=>{r.forceComponentUpdate(s.id).catch(Re)})}var bV=fe("exportToHTML");function ni(e,t,r,o=new Set([t]),n=new Set){for(let{node:i,skipChildren:a}of t.walkWithSkipChildren()){if(n.has(i)){a();continue}n.add(i);for(let s of ff(i,r)){let l=pf(s);if(!l)continue;let c=e.getNode(l);if(c){if(!e.isGroundNode(c)){bV.reportError("Navigation target node must be ground node",{sourceId:i.id,targetId:c.id});continue}o.add(c),ni(e,c,r,o,n)}}G(i)&&Object.values(xs(e,i,r)).flat().forEach(s=>ni(e,s.node,r,o,n))}return o}async function Qv(e,t){await t.updateComponent(e.id,1)}async function Zv(e,{codeGenerationStore:t,modulesStore:r,treeStore:o},n,i={}){let{waitForAll:a=!0,persist:s=!0}=i,l=ni(o.tree,e,n),c=[],m=[];for(let u of l)m.push(ut("screen",u.id,"default").value),u!==e&&c.push(Qv(u,t));let d=Qv(e,t);return c.push(d),await Promise.all(a?c:[d]),s&&await t.persistence.process(),Bn(n,m,r)}function eI(e,t){let r=t.getPrimaryVariant();Ec(r)&&(e.routes[t.id]=r.pageEffects)}function zY(e,t,r){let o=t.getPrimaryVariant();if(Ec(o)){let n={};for(let i in o.pageEffects)n[i]=r.dedupe("effect",o.pageEffects[i]);e.routes[t.id]=n}}function tI(e,t){if(G(e)&&$g(t,e)){let r=Hg(t,e);return g(U(r),"PreviewRenderer: WebPage Scope node must exist and be a WebPageNode"),g(r.isLoaded(),"PreviewRenderer: WebPage Scope node must fully loaded"),{entryNode:r.getPrimaryVariant(),entryScopeNode:r}}if(U(e)&&e.isLoaded())return{entryNode:e.getPrimaryVariant(),entryScopeNode:e};if(ir(e)){let r=t.getGroundNodeFor(e),o=t.getScopeNodeFor(r);if(Ve(o))return{entryNode:r,entryScopeNode:o}}if(Ee(e)){let r=t.getScopeNodeFor(e);return g(wr(r),"PreviewRenderer: Scope node must exist and be a node supports breakpoint variants"),g(r.isLoaded(),"PreviewRenderer: Scope node with breakpoint variants must be fully loaded"),{entryNode:r.getPrimaryVariant(),entryScopeNode:r}}if(Lt(e)&&!Ee(e)){let r=t.getScopeNodeFor(e);return g(We(r),"PreviewRenderer: Smart Component Scope node must exist and be a SmartComponentNode"),{entryNode:e,entryScopeNode:r}}if(xp(e)&&e.isVectorSetItem){let r=t.getScopeNodeFor(e);return g(Me(r),"PreviewRenderer: Scope node must exist and be a VectorSetNode"),{entryNode:e,entryScopeNode:r}}return{entryNode:e}}function rI(e,t){let r=e.getGroundNodeFor(t),o=e.getScopeNodeFor(r);return Ne(o)&&!G(r)}var oI="utils";function nI(e,t){if(!U(t)||!t.dataIdentifier)return;let r=Z(t.dataIdentifier);if(!Ce(r)||r.kind!=="localModuleExport")return;let o=e.getPersistedModuleByLocalId(r.localId);if(o&&o.exports.includes(oI))return{exportIdentifier:oI,moduleURL:o.moduleURL,collectionId:r.localIdName}}var iI=fe("renderInfoForPreviewItem");function ii(e){let t=e.root.getDefaultLocale(),r=e.root.locales,o=[t];return r&&o.push(...r),o}function aI(e,t,r,o,n,i){let a=[],s=[],l={global:i.root.globalPageEffect,routes:{}},c=new Set,m=ii(i),u=Yp(m,{includeDrafts:!0}).find(C=>C.id===n);for(let C of i.root.children){if(!pe(C)&&!U(C))continue;if(pe(C)&&a.push({id:C.id,moduleIdentifier:Jy(),layoutTemplate:{moduleIdentifier:C.instanceIdentifier}}),U(C)){let x=C.isLoaded()?Jc(Kp(C)):[],V=Za(i,C),A=nI(e,C);A&&s.push(A),a.push({id:C.id,moduleIdentifier:C.instanceIdentifier,collectionId:A?.collectionId,path:V,elements:x,layoutTemplate:IV(C,u)}),C.isLoaded()&&eI(l,C)}let N=P.componentForIdentifier(C.instanceIdentifier)?.fonts;if(!N){iI.debug("Did not find fonts for component:",C.instanceIdentifier);continue}for(let x of _y(N))c.add(x)}let f=o?t.getPathSlugs(r.id,o,u):void 0,h=[],y=f?.unresolvedSlugs;for(let C in y){let T=y[C];g(T),h.push({variableId:C,collectionId:T.collectionId,collectionItemId:T.collectionItemId})}let S=f?.pathVariables?Jc(f.pathVariables):[];return iI.debug("renderInfoFor",{webPageNode:r,collectionItemNodeId:o,initialUnresolvedPathSlugs:h}),{kind:"webpage",routes:a,collectionUtils:s,locales:m,initialPathVariables:S,pageEffects:l,preloadFonts:Array.from(c),initialRoute:r.id,initialUnresolvedPathSlugs:h,initialLocaleId:n}}function IV(e,t){if(!zo(e))return;let r=e.getResolvedControlPropValues(P,qy(),void 0,t);return{moduleIdentifier:e.layoutTemplateIdentifier,props:xe(r)?void 0:r,richTextControlKeys:e.getRichTextControlKeys(P),vectorSetItemControls:e.getComponentVectorSetChildren(P)}}function sI({treeStore:e,chromeStore:t,previewStore:r,modulesStore:o},n){if(!n)return{kind:"empty"};switch(n.type){case"component":return g(Ce(n.componentId),"Previewing component should provide module identifier",n.componentId),{kind:"module",layout:"component",moduleIdentifier:n.componentId,locales:ii(e.tree),initialLocaleId:t.canvasLocaleId};case"node":{let i=e.tree.get(n.nodeId);g(i,"Previewing node should provide correct node id",n.nodeId);let a=tI(i,e.tree),s=a.entryScopeNode;if(pe(s))return aI(o,r,s,n.collectionItemNodeId,t.canvasLocaleId,e.tree);if(Ve(s))return{kind:"module",moduleIdentifier:ut("design",i.id,"default").value,layout:"design-screen",locales:ii(e.tree),initialLocaleId:t.canvasLocaleId};if(U(a.entryScopeNode))return aI(o,r,a.entryScopeNode,n.collectionItemNodeId,t.canvasLocaleId,e.tree);if(We(a.entryScopeNode)){let l={variant:a.entryNode.id};return{kind:"module",moduleIdentifier:a.entryScopeNode.instanceIdentifier,props:l,layout:"component",locales:ii(e.tree),initialLocaleId:t.canvasLocaleId}}if(Me(a.entryScopeNode))return{kind:"module",moduleIdentifier:ut("vector",a.entryNode.id,"default").value,layout:"component",locales:ii(e.tree),initialLocaleId:t.canvasLocaleId};if(G(a.entryNode)){let l=a.entryNode.getCodeComponentProps(P);return{kind:"module",moduleIdentifier:a.entryNode.codeComponentIdentifier,props:l,layout:"component",locales:ii(e.tree),initialLocaleId:t.canvasLocaleId}}if(rI(e.tree,a.entryNode)){let l=e.tree.getGroundNodeFor(a.entryNode),c=ni(e.tree,a.entryNode,P),m=[];for(let d of c){let u=e.tree.getGroundNodeFor(d),f=ut("screen",u.id,"default").value;m.push({id:u.id,moduleIdentifier:f})}return{kind:"prototype",routeId:l.id,routes:m}}throw new Error(`Unsupported node for preview: ${i.id}`)}default:z(n)}}var TV="getVectorSetItems";function lI(e){return TV in e}function cI(e,t){return e.getNodesWithTrait(t,o=>Ot(o,e)).flatMap(o=>{if(o.moduleSourceRevision===void 0)return[];let n=sn(o,e).filter(a=>!a.includes("draftCollection")),i=o.moduleSourceRevision;return n.map(a=>({moduleIdentifier:mu(a,"default").value,moduleRevision:i}))})}function NV(e){return e.mainView===1?e.codeEditorPreviewVisible:e.mainView===3}function LQ(e,t,r={}){let{previewStore:o,fullsizePreviewStore:n,loadingStore:i,chromeStore:a,treeStore:s,modulesStore:l}=e;if(!i.hasMinimalEditableData)return;let{visible:c,shownOnLaunch:m,source:d="unknown"}=r,u=NV(a),f=typeof c=="boolean"?c:!u;if(a.setPreviewVisible(f),!u&&f){o.addActiveSession();let h=o.computePreviewItem();if(!wV({treeStore:s,previewStore:o,chromeStore:a,modulesStore:l},h))o.item=h;else if(h?.type==="node"){let y=s.tree.get(h.nodeId);g(y,"Did not find previewNode",h.nodeId),n.updatePreviewSize(y)}RV(t,h).then(y=>{o.targetModuleRevisions=cI(s.tree,y)}).catch(Re).finally(()=>{o.item=h}),fC({shown_on_launch:m,source:d})}else u&&!f&&(o.removeActiveSession(),o.stickyPreviewItem=!1,o.item=void 0)}function wV(e,t){if(!t||t.type!=="node")return!1;let{modulesStore:r}=e,o=sI(e,t);switch(o.kind){case"module":{let n=Z(o.moduleIdentifier);return kt(n)?!r.getModuleEntryByLocalId(n.localId):!1}case"webpage":{let n=Fe("screen",o.initialRoute);return!r.getModuleEntryByLocalId(n)}case"prototype":{let n=Fe("prototype",o.routeId);return!r.getModuleEntryByLocalId(n)}case"empty":return!1;default:z(o)}}async function RV(e,t){if(Uc(e,"canDesign")||!t)return[];let r=await xV(t,e.stores,e),{codeGenerationStore:o}=e.stores,n=await o.generateAndUpdateQueuedComponents();return await o.serialization.idle(),[r,...n]}async function xV(e,t,r){if(Uc(r,"canDesign"))return Promise.resolve(void 0);let{codeGenerationStore:o,treeStore:n,modulesStore:i}=t;if(e.type==="component"){await o.updateComponent(e.componentId,1);return}else if(e.collectionItemNodeId){let a=n.tree.getParent(e.collectionItemNodeId);return a?(await o.updateComponent(a.id,1),a.id):void 0}else{let a=n.tree,s=a.get(e.nodeId);g(s,"Did not find previewNode",e.nodeId);let l=a.getCanvasScopeNodeFor(s);if(g(l,"Tried triggering code generation for non canvas scope node:",s.id),lI(l))return Rt(s)?(await o.updateComponent(s.id,1),s.id):Promise.resolve(void 0);if(Wt(l))return await o.updateComponent(l.id,1),l.id;if(Ne(l))return await Zv(s,{codeGenerationStore:o,treeStore:n,modulesStore:i},P),s.id;if(Ve(l))return await o.updateComponent(s.id,1),s.id;z(l)}}function UQ(e){let{newContentAsDraft:t}=e.stores.persistedUserDefaults;return!(!t||e.stores.publishStore.publishStatus===1)}var Yi=class Yi extends So{constructor(r){super();this.scheduler=r;I(this,"menu",null)}show(r,o){if(!at.isOn("improvedMenus")){VV(r,o);return}let n={...o,className:o.options?.className},i=Yi.buildItems(r);this.menu={items:i,config:n,startTime:performance.now()}}close(){this.scheduler.processWhenReady(()=>{this.menu&&(this.menu.config.onDone?.(),this.menu.config.onCancel?.(),this.menu=null)})}};I(Yi,"buildItems",(r,o=[])=>{let n=[];for(let[i,a]of r.entries()){if(!w(a.submenu)&&!or(a.submenu))continue;let{submenu:s,...l}=a,c=o?[...o,i]:[i],m={...l,path:c};if(m.type==="separator"){if(i===0||i===r.length-1||n[n.length-1]?.type==="separator")continue;n.push(m);continue}if(a.disabled&&(m.enabled=!1),a.action&&(m.role=a.action),a.role){let{states:u,options:f}=Dy(a.role),h=u[a.role],{label:y,checked:S,visible:C}=f[a.role]??{};E(y)&&(m.label=y),w(a.checked)&&fr(S)&&(m.checked=S),w(a.visible)&&fr(C)&&(m.visible=C),w(a.disabled)&&w(a.enabled)&&fr(h)&&(m.enabled=h)}if(a.visible===!1)continue;if(s){let u=Yi.buildItems(s,c),f={...m,submenu:u};n.push(f);continue}let d=MV(m);n.push(d)}return n.length>0&&n[n.length-1]?.type==="separator"&&n.pop(),n.length>0&&n[0]?.type==="separator"&&n.shift(),n});var dI=Yi;function MV(e){let{role:t}=e;if(!t)return e;let r={...e};return!jp&&!e.acceleratorWindows&&(r.acceleratorWindows=Ky[t]),e.accelerator||(r.accelerator=Xy[t]),r}function VV(e,t){let r=Yy.buildFromTemplate(e),o={...t.options,onCancel:t.onCancel};r.popup(t.location,o).catch(Re).finally(t.onDone)}var ai,Fo,uI=class extends So{constructor(r){super();this.modulesStore=r;$(this,ai,new Map);$(this,Fo,new Map);I(this,"_forceUpdate",0)}rerender(){this._forceUpdate++}queue(r){if(b(this,Fo).has(r))return;let o=ma();b(this,Fo).set(r,o),this.rerender()}cache(r,o){let n=b(this,Fo).get(r);n&&n.resolve(o),b(this,Fo).delete(r),b(this,ai).set(r,o),this.rerender()}getByGlobalId(r){let o=this.modulesStore.getPersistedModuleByGlobalId(r);if(!o)return;let n=Ka(o.localId)[1],i=b(this,Fo).get(n);if(i)return i;let a=b(this,ai).get(n);if(a)return a;let s=this.modulesStore.forType("vector").getByStableName(n)?.transientSVGIcon;if(s)return{svg:s}}delete(r){b(this,ai).delete(r),this.rerender()}};ai=new WeakMap,Fo=new WeakMap;function dZ(e,t){if(!Ng(e)){t.onlyNodesWithFormInputFontStyles=!1;return}Tr("formInputFontFamily",t,e),DV(t,e),Tr("formInputFontColor",t,e),Tr("formInputFontWeight",t,e),Tr("formInputFontStyle",t,e),Tr("formInputFontLineHeight",t,e),Tr("formInputFontLineHeightUnit",t,e),Tr("formInputFontTextAlignment",t,e),Tr("formInputFontLetterSpacing",t,e),Tr("formInputFontLetterSpacingUnit",t,e),pt(t.formInputFontSelector)&&(t.formInputFontSelector=new Set),ya(e.formInputFontSelector)&&t.formInputFontSelector.add(e.formInputFontSelector),t.formInputOpenTypeFontFeatures=Jd(t.formInputOpenTypeFontFeatures,e.formInputOpenTypeFontFeatures)}function DV(e,t){let r=e.formInputFontSize,o=e.formInputFontSizeUnit;if(ht(r)&&ht(o)||w(t.formInputFontSize))return;let[n,i]=H(t.formInputFontSize)?[t.formInputFontSize,"px"]:uo(t.formInputFontSize);if(pt(o))e.formInputFontSizeUnit=i;else if(mo(i,o)){e.formInputFontSizeUnit=oe,e.formInputFontSize=oe;return}pt(r)?e.formInputFontSize=n:mo(n,r)&&(e.formInputFontSize=oe)}function Jd(e,t){let r=new Set(gn(e)?Object.keys(e):void 0),o=t??[],n=gn(e)?e:{};for(let i of o){if(!pi(i))continue;let a=n[i];w(a)&&(n[i]=gn(e)?oe:!0),r.delete(i)}for(let i of r)pi(i)&&(n[i]=oe);return n}var kV={borderBottom:oe,borderLeft:oe,borderRight:oe,borderTop:oe,borderWidth:oe,borderColor:oe,borderStyle:oe,borderPerSide:oe};function Pe(e,t){return ht(t)?oe:pt(t)?e:mo(e,t)?oe:e}function PV(e,t){return ht(t)?oe:pt(t)||pr(e,t)?e:oe}function FV(e,t,r){return g(gn(e)),ht(e)?oe:e.length!==t.length?oe:(e.forEach((o,n)=>{let i=t[n];g(i);let a=o.type;switch(a){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"number":case"object":case"richtext":case"string":case"transition":case"image":case"responsiveimage":case"scrollsectionref":case"customcursor":case"border":case"cursor":Qi(o,i,r);break;default:z(a)}}),e)}function Qi(e,t,r){switch(e.type){case"array":{if(g(t.type==="array"),g(r.type==="array"),ht(e.value))break;if(pt(e.value)){if(Ft(t.value)){e.value=t.value;break}e.value=t.value.map(o=>BV(r.control,o.id))}if(Ft(t.value)){e.value=Pe(t.value,e.value);break}if(Ft(e.value)){e.value=oe;break}e.value=FV(e.value,t.value,r.control);break}case"slot":{if(g(t.type===e.type),ht(e.value))break;g(r.type==="slot"),g(!k(t.value),"Slots don't support dynamic values"),pt(e.value)?e.value=t.value:e.value=oe;break}case"object":if(g(t.type===e.type),ht(e.value))break;if(g(r.type==="object"),pt(e.value))if(t.value===null)e.value=null;else{e.value={};for(let o in r.controls){let n=r.controls[o];g(n);let i=OV(n);i&&(e.value[o]=i)}}if(e.value===null||t.value===null){e.value!==t.value&&(e.value=oe);break}for(let o in e.value){let n=r.controls[o];g(n);let i=e.value[o];g(i);let a=t.value[o];g(a,"getControlProps(), should have added these if they were missing from the document data"),Qi(i,a,n)}break;case"transition":if(g(t.type===e.type),ht(e.value))break;if(pt(e.value)){e.value=t.value;break}if(k(e.value)||k(t.value)||!e.value||!t.value){e.value=Pe(t.value,e.value);break}pr(e.value,t.value)||(e.value=oe);break;case"responsiveimage":if(g(t.type==="image"),e.value=Pe(t.value,e.value),e.type==="responsiveimage"){let o=E(t.alt)?t.alt:"";e.alt=Pe(o,e.alt);let{positionX:n,positionY:i}=t;e.positionX=Pe(n,e.positionX),e.positionY=Pe(i,e.positionY)}break;case"fusednumber":g(t.type===e.type),e.single=Pe(t.value.single,e.single),e.isFused=Pe(t.isFused,e.isFused),e.fused[0]=Pe(t.value.fused[0],e.fused[0]),e.fused[1]=Pe(t.value.fused[1],e.fused[1]),e.fused[2]=Pe(t.value.fused[2],e.fused[2]),e.fused[3]=Pe(t.value.fused[3],e.fused[3]);break;case"link":{if(g(t.type===e.type),ht(e.value))break;if(pt(e.value)){e.value=t.value;break}if(k(e.value)||k(t.value)||!e.value||!t.value){e.value=Pe(t.value,e.value);break}if(!pc(e.value,t.value)){e.value=oe;break}break}case"linkrelvalues":{if(g(t.type===e.type),ht(e.value))break;if(pt(e.value)){e.value=t.value;break}if(k(e.value)||k(t.value)||!e.value||!t.value){e.value=Pe(t.value,e.value);break}pr(e.value,t.value)||(e.value=oe);break}case"pagescope":if(g(t.type===e.type),ht(e.value))break;if(pt(e.value)){e.value=t.value;break}if(!e.value||!t.value){e.value=Pe(t.value,e.value);break}if(!pc(e.value,t.value)){e.value=oe;break}break;case"font":{if(g(r.type==="font"),g(t.type===e.type),ht(e.value))break;if(pt(e.value)){if(w(t.value)){e.value=t.value;break}let h=new Set([t.value.fontSelector]),y=$e,S=new Set,C=new Set,T=$e,N=$e,x=$e,V=new Set,A={};if(r.displayFontSize){let[F,j]=mi(t.value.fontSize)?uo(t.value.fontSize):[];y=F,j&&S.add(j)}if(r.displayTextAlignment&&(N=t.value.textAlignment),r.controls==="extended"){let[F,j]=t.value.lineHeight??[];T=F,j&&C.add(j);let[W,K]=t.value.letterSpacing??[];x=W,K&&V.add(K)}t.value.openTypeFontFeatures&&(A=(t.value.openTypeFontFeatures??[]).reduce((F,j)=>(pi(j)&&(F[j]=!0),F),{})),e.value={fontSelector:h,lineHeightValue:T,lineHeightUnits:C,fontSizeValue:y,fontSizeUnits:S,textAlignment:N,letterSpacingValue:x,letterSpacingUnits:V,openTypeFontFeatures:A};break}if(w(e.value)){w(t.value)||(e.value=oe);break}if(w(t.value)){e.value=oe;break}let{fontSelector:o,lineHeight:[n,i]=[],fontSize:a,textAlignment:s,letterSpacing:[l,c]=[],openTypeFontFeatures:m}=t.value;e.value.fontSelector.add(o);let[d,u]=mi(a)?uo(a):[],f=e.value.fontSizeValue!==d||!w(u)&&!e.value.fontSizeUnits.has(u);r.displayFontSize&&f&&(e.value.fontSizeValue=oe,u&&e.value.fontSizeUnits.add(u)),r.displayTextAlignment&&e.value.textAlignment!==s&&(e.value.textAlignment=oe),r.controls==="extended"&&(e.value.lineHeightValue!==n&&(e.value.lineHeightValue=oe),i&&e.value.lineHeightUnits.add(i),e.value.letterSpacingValue!==l&&(e.value.letterSpacingValue=oe),c&&e.value.letterSpacingUnits.add(c)),e.value.openTypeFontFeatures=Jd(e.value.openTypeFontFeatures,m);break}case"customcursor":case"scrollsectionref":{g(t.type===e.type);let o=pr(t.value,e.value)?e.value:t.value;e.value=Pe(o,e.value);break}case"border":{if(g(t.type===e.type),pt(e.value)){k(t.value)?e.value=t.value:rt(t.value)?e.value=null:e.value={...t.value};break}if(k(t.value)||k(e.value)||rt(t.value)||rt(e.value)){mo(t.value,e.value)&&(e.value=kV);break}let o=e.value;o.borderTop=Pe(t.value.borderTop,o.borderTop),o.borderRight=Pe(t.value.borderRight,o.borderRight),o.borderBottom=Pe(t.value.borderBottom,o.borderBottom),o.borderLeft=Pe(t.value.borderLeft,o.borderLeft),o.borderWidth=Pe(t.value.borderWidth,o.borderWidth),o.borderColor=Pe(t.value.borderColor,o.borderColor),o.borderStyle=Pe(t.value.borderStyle,o.borderStyle);break}case"boxshadow":g(t.type===e.type),e.value=km(t.value,e.value);break;case"multicollectionreference":g(t.type===e.type),e.value=PV(t.value,e.value);break;case"gap":{if(g(t.type===e.type),e.value=Pe(t.value,e.value),!ht(e.columnGap)){let o=k(t.value)?oe:Ct(t.value);pt(e.columnGap)?e.columnGap=o:mo(o,e.columnGap)&&(e.columnGap=oe)}if(!ht(e.rowGap)){let o=k(t.value)?oe:Ln(t.value);pt(e.rowGap)?e.rowGap=o:mo(o,e.rowGap)&&(e.rowGap=oe)}break}case"boolean":case"color":case"date":case"enum":case"file":case"number":case"richtext":case"string":case"image":case"cursor":case"padding":case"borderradius":case"collectionreference":case"trackingid":case"vectorsetitem":g(t.type===e.type),e.value=Pe(t.value,e.value);break;default:}}function Zi(e){switch(e.type){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"linkrelvalues":case"number":case"richtext":case"string":case"transition":case"boxshadow":case"image":case"object":return{type:e.type,value:$e};case"array":case"slot":case"font":case"pagescope":case"scrollsectionref":case"customcursor":case"border":case"cursor":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"vectorsetitem":return{type:e.type,value:$e};case"gap":return{type:e.type,value:$e,columnGap:$e,rowGap:$e};case"trackingid":return{type:e.type,value:$e,trackingIdAIPrompt:$e};case"fusednumber":return{type:"fusednumber",isFused:$e,single:$e,fused:[$e,$e,$e,$e]};case"responsiveimage":return{type:"responsiveimage",value:$e,alt:$e,positionX:$e,positionY:$e};case"eventhandler":return null;default:return null}}var AV={number:!0,enum:!0,boolean:!0,string:!0,richtext:!0,color:!0,image:!0,responsiveimage:!0,file:!0,transition:!0,link:!0,date:!0,object:!0,array:!0,fusednumber:!0,font:!0,pagescope:!0,scrollsectionref:!0,customcursor:!0,border:!0,cursor:!0,boxshadow:!0,gap:!0,padding:!0,borderradius:!0,collectionreference:!0,multicollectionreference:!0,trackingid:!0};function LV(e){return Object.hasOwn(AV,e)}function EV(e){return LV(e.type)}function OV(e){let t=Zi(e);return t?(g(EV(t)),t):null}function BV(e,t){let r=Zi(e);g(r);let o=r;return o.id=t,o}function xZ(e,t){let r={};for(let o in e){let n=e[o];if(!n)continue;let i=Zi(n);i&&(r[o]=i)}for(let o of t)for(let n in o){let i=e[n];if(g(i),i.type==="eventhandler")continue;let a=r[n];g(a,"Each control prop should have a corresponding reduced control prop");let s=o[n];g(s),Qi(a,s,i)}return r}function BZ(e,t,r,o,n){let i=r.id;if(!i)return;let a=e.getNodeWithTrait(r.providerId,mt);if(!a)return;let s=a.dataIdentifier;if(!kt(s))return;let l=Ci(e,s);if(!l)return;n??=wi(a,t);let c=e.getNodeWithTrait(n,so);if(!c)return;let m=$a(e,t,i,c,l);m&&(c=m.collectionItemNode,l=m.collectionNode,i=m.variableId);let u=l.getPropertyControls(e)[i];if(!u)return;let f=l.getVariable(i);if(!f)return;let h=c.getControlProp(i),{controlProp:y,reducedControlProp:S}=zV(u,h);if(Sy(y)&&(g(S,"Reduced control prop should not be null when a collection control prop is present"),l.id===c.parentid&&!(l.managedByPlugin&&!f.userEditable)&&f.type===o&&y.type===o))return{collectionNode:l,collectionItemNode:c,variableDefinition:f,controlDescription:u,rawControlProp:h,controlProp:y,reducedControlProp:S,variableId:i}}var mI=new WeakMap;function zV(e,t){let r=mI.get(e);if(r&&r.rawControlProp===t){let{controlProp:i,reducedControlProp:a}=r;return{controlProp:i,reducedControlProp:a}}let o=Lm(e,t),n=Zi(e);return n&&o&&Qi(n,o,e),mI.set(e,{rawControlProp:t,controlProp:o,reducedControlProp:n}),{controlProp:o,reducedControlProp:n}}function pI(e){return e!=null&&typeof e=="object"&&e.nodeType===1}function fI(e,t){return t&&e==="hidden"?!1:e!=="visible"&&e!=="clip"}function qd(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let r=getComputedStyle(e,null);return fI(r.overflowY,t)||fI(r.overflowX,t)}return!1}function $l(e,t,r,o,n,i,a,s){return i<e&&a>t||i>e&&a<t?0:i<=e&&s<=r||a>=t&&s>=r?i-e-o:a>t&&s<r||i<e&&s>r?a-t+n:0}function Xd(e,t){let{scrollMode:r,block:o,inline:n,boundary:i,skipOverflowHiddenElements:a}=t,s=typeof i=="function"?i:W=>W!==i;if(!pI(e))throw new TypeError("Invalid target");let l=document.scrollingElement||document.documentElement,c=[],m=e;for(;pI(m)&&s(m);){if(m=m.parentNode,m===l){c.push(m);break}m===document.body&&qd(m)&&!qd(document.documentElement)||qd(m,a)&&c.push(m)}let d=window.visualViewport,u=d?.width??innerWidth,f=d?.height??innerHeight,h=window.scrollX||pageXOffset,y=window.scrollY||pageYOffset,{height:S,width:C,top:T,right:N,bottom:x,left:V}=e.getBoundingClientRect(),A=o==="start"||o==="nearest"?T:o==="end"?x:T+S/2,F=n==="center"?V+C/2:n==="end"?N:V,j=[];for(let W of c){let{height:K,width:ce,top:D,right:ye,bottom:ne,left:Y}=W.getBoundingClientRect();if(r==="if-needed"&&T>=0&&V>=0&&x<=f&&N<=u&&T>=D&&x<=ne&&V>=Y&&N<=ye)return j;let de=getComputedStyle(W),ae=parseInt(de.borderLeftWidth,10),Ie=parseInt(de.borderTopWidth,10),je=parseInt(de.borderRightWidth,10),ee=parseInt(de.borderBottomWidth,10),L=0,ue=0,we="offsetWidth"in W?W.offsetWidth-W.clientWidth-ae-je:0,Ye="offsetHeight"in W?W.offsetHeight-W.clientHeight-Ie-ee:0;if(l===W)o==="start"?L=A:o==="end"?L=A-f:o==="nearest"?L=$l(y,y+f,f,Ie,ee,y+A,y+A+S,S):L=A-f/2,n==="start"?ue=F:n==="center"?ue=F-u/2:n==="end"?ue=F-u:ue=$l(h,h+u,u,ae,je,h+F,h+F+C,C),L=Math.max(0,L+y),ue=Math.max(0,ue+h);else{o==="start"?L=A-D-Ie:o==="end"?L=A-ne+ee+Ye:o==="nearest"?L=$l(D,ne,K,Ie,ee+Ye,A,A+S,S):L=A-(D+K/2)+Ye/2,n==="start"?ue=F-Y-ae:n==="center"?ue=F-(Y+ce/2)+we/2:n==="end"?ue=F-ye+je+we:ue=$l(Y,ye,ce,ae,je+we,F,F+C,C);let{scrollLeft:Vt,scrollTop:Te}=W;L=Math.max(0,Math.min(Te+L,W.scrollHeight-K+Ye)),ue=Math.max(0,Math.min(Vt+ue,W.scrollWidth-ce+we)),A+=Te-L,F+=Vt-ue}j.push({el:W,top:L,left:ue})}return j}function hI(e){return e===Object(e)&&Object.keys(e).length!==0}function UV(e,t="auto"){let r="scrollBehavior"in document.body.style;e.forEach(({el:o,top:n,left:i})=>{o!==document.body&&(o.scroll&&r?o.scroll({top:n,left:i,behavior:t}):(o.scrollTop=n,o.scrollLeft=i))})}function WV(e){return e===!1?{block:"end",inline:"nearest"}:hI(e)?e:{block:"start",inline:"nearest"}}function gI(e,t){let r=!e.ownerDocument.documentElement.contains(e);if(hI(t)&&typeof t.behavior=="function")return t.behavior(r?[]:Xd(e,t));if(r)return;let o=WV(t);return UV(Xd(e,o),o.behavior)}var $V="codemark",ea=100,yI=new Gm($V);function Er(e,t){var r,o;return"schema"in e?(r=t?.markType)!==null&&r!==void 0?r:e.schema.marks.code:(o=t?.markType)!==null&&o!==void 0?o:e.state.schema.marks.code}function to(e,t){return e.resolve(Math.min(Math.max(1,t),e.nodeSize-2))}function bI(e,t,r,o){var n;let i=e.isInSet((n=t.state.storedMarks)!==null&&n!==void 0?n:t.state.doc.resolve(r).marks()),a=t.state.doc.rangeHasMark(r,o,e);return!!(i||a)}var SI={match:/`((?:[^`\w]|[\w])+)`$/,handler:(e,t,r,o,n,i,a,s)=>{if(bI(e,t,n,i))return!1;let l=o[1],c=e.create(s),m=n+l.length,d=t.state.tr.delete(n,i).insertText(l).addMark(n,m,c),u=d.setSelection(Xt.create(d.doc,m)).removeStoredMark(e),f=u.setMeta(a.input,{transform:u,from:n,to:i,text:`\`${l}${r}`});return t.dispatch(f),!0}},CI={match:/^`((?:[^`\w]|[\w])+)`/,handler:(e,t,r,o,n,i,a,s)=>{if(bI(e,t,n,i))return!1;let l=e.create(s),c=o[1],m=n,d=t.state.tr.delete(n,i).insertText(c).addMark(n,n+c.length,l),u=d.setSelection(Xt.create(d.doc,m)).addStoredMark(l),f=u.setMeta(a.input,{transform:u,from:n,to:i,text:`\`${c}${r}`});return t.dispatch(f),!0}};function HV(e,t,r,o,n,i,a){if(t.composing)return!1;let{state:s}=t,l=s.doc.resolve(r);if(l.parent.type.spec.code)return!1;let c="\uFFFC",m=l.parent.textBetween(Math.max(0,l.parentOffset-ea),l.parentOffset,void 0,c)+n,d=n+l.parent.textBetween(l.parentOffset,Math.min(l.parent.nodeSize-2,l.parentOffset+ea),void 0,c),u=SI.match.exec(m),f=CI.match.exec(d);if(u){let h=SI.handler(e,t,n,u,r-u[0].length+n.length,o,i,a);if(h)return h}return f?CI.handler(e,t,n,f,r,o+f[0].length-n.length,i,a):!1}function vI(e,t){t||(t={});let r=new hr({isInputRules:!0,state:{init:()=>null,apply(o,n){let i=o.getMeta(r);return i||(o.selectionSet||o.docChanged?null:n)}},props:{handleTextInput(o,n,i,a){let s=Er(o,t);return HV(s,o,n,i,a,{input:r,cursor:e},t.attrs)}}});return r}function Or(e,t,r="next"){let o={action:r};return e.dispatch(e.state.tr.setMeta(t,o)),!1}function II(e,t,r,o,n){if(e.state.selection.empty||r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{from:i,to:a}=e.state.selection;if(a-i>=ea||e.state.doc.rangeHasMark(i,a,o))return!1;let s=e.state.tr.addMark(i,a,o.create(n)),l=s.setSelection(Xt.create(s.doc,a)).removeStoredMark(o);return e.dispatch(l),!0}function GV(e,t,r,o,n){var i;if(r.metaKey)return Or(e,t);if(r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:a,doc:s}=e.state;if(!a.empty)return!1;let l=t.getState(e.state),c=a.$from,m=!!o.isInSet(c.marks()),d=!!o.isInSet((i=c.marksAcross(to(s,a.from+1)))!==null&&i!==void 0?i:[]);return c.pos===e.state.doc.nodeSize-3&&c.parentOffset===c.parent.nodeSize-2&&l?.active?(e.dispatch(e.state.tr.removeStoredMark(o)),!0):m===d&&c.parentOffset!==0?!1:m&&(!l?.active||l.side===-1)&&c.parentOffset!==0?(e.dispatch(e.state.tr.removeStoredMark(o)),!0):d&&l?.side===-1?(e.dispatch(e.state.tr.addStoredMark(o.create(n))),!0):!1}function TI(e,t,r,o,n){if(GV(e,t,r,o,n))return!0;let{selection:a}=e.state,s=a.$from;return a.empty&&s.parentOffset===s.parent.nodeSize-2?Or(e,t):!1}function jV(e,t,r,o,n){var i;if(r.metaKey)return Or(e,t);if(r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:a,doc:s}=e.state,l=t.getState(e.state),c=!!o.isInSet(a.$from.marks()),m=!!o.isInSet((i=to(s,a.empty?a.from-1:a.from+1).marks())!==null&&i!==void 0?i:[]);if(c&&l?.side===-1&&a.$from.parentOffset===0)return!1;if(l?.side===0&&a.$from.parentOffset===0)return e.dispatch(e.state.tr.removeStoredMark(o)),!0;if(c&&m&&l?.side===0)return e.dispatch(e.state.tr.addStoredMark(o.create(n))),!0;if(c&&!m&&l?.active&&a.$from.parentOffset===0||!c&&l?.active&&l?.side===0)return e.dispatch(e.state.tr.removeStoredMark(o)),!0;if(c===m)return!1;if(m||!a.empty&&c){let d=a.empty?a.from-1:a.from,u=e.state.tr.setSelection(Xt.create(s,d));return!a.empty&&m?e.dispatch(u.addStoredMark(o.create(n))):e.dispatch(u.removeStoredMark(o)),!0}if((m||!a.empty&&c)&&!l?.active){let d=a.empty?a.from-1:a.from;return e.dispatch(e.state.tr.setSelection(Xt.create(s,d)).removeStoredMark(o)),!0}if(c&&!l?.active&&a.$from.parentOffset>0)return e.dispatch(e.state.tr.setSelection(Xt.create(s,a.from-1)).addStoredMark(o.create(n))),!0;if(c&&!m&&l?.active&&l.side!==-1)return e.dispatch(e.state.tr.addStoredMark(o.create(n))),!0;if(c&&!m&&l?.active){let d=a.from-1;return e.dispatch(e.state.tr.setSelection(Xt.create(s,d)).addStoredMark(o.create(n))),!0}return!1}function NI(e,t,r,o,n){if(jV(e,t,r,o,n))return!0;let{selection:a}=e.state,s=a.$from,l=t.getState(e.state);return s.pos===1&&s.parentOffset===0&&l?.side===-1?!0:a.empty&&s.parentOffset===0?Or(e,t):!1}function wI(e,t,r,o){if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=to(i,n.from-1),s=!!o.isInSet(a.marks()),l=a.parentOffset===0,c=!!o.isInSet(to(i,n.to+1).marks());if((!s||l)&&!c)return Or(e,t);let m=t.getState(e.state);if(n.empty&&m?.side===-1){let d=e.state.tr.delete(n.from-1,n.from);return e.dispatch(d),!0}return!1}function RI(e,t,r,o){if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=!!o.isInSet(n.$from.marks()),s=n.$from.parentOffset===0,l=!!o.isInSet(to(i,n.to+2).marks());return(!a||s)&&!l?Or(e,t):!1}function xI(e,t){var r,o;if(!e)return null;let{selection:n,doc:i}=e;if(!n.empty)return null;let a=!!t.isInSet((r=e.storedMarks)!==null&&r!==void 0?r:[]),s=!!t.isInSet(n.$from.marks()),l=!!t.isInSet((o=to(i,n.from+1).marks())!==null&&o!==void 0?o:[]),c=n.$from.parentOffset===0;return s!==l||!s&&a!==s||s&&c?e.tr.removeStoredMark(t):null}function _V(){let e=document.createElement("span");return e.classList.add("fake-cursor"),e}function JV(e){e||(e={});let t=new hr({key:yI,appendTransaction:(r,o,n)=>{var i;let a=t.getState(o),s=(i=r[0])===null||i===void 0?void 0:i.getMeta(t);return a?.next||s?.action==="click"?xI(n,Er(n,e)):null},state:{init:()=>null,apply(r,o,n,i){var a;let s=r.getMeta(t);if(s?.action==="next")return{next:!0};let l=Er(i,e),c=l.isInSet((a=i.storedMarks)!==null&&a!==void 0?a:i.doc.resolve(r.selection.from).marks()),m=l.isInSet(i.doc.resolve(r.selection.from).marks()),d=l.isInSet(to(i.doc,r.selection.from+1).marks()),u=r.selection.$from.parentOffset===0;return r.selection.empty?!c&&d&&(!m||u)?{active:!0,side:-1}:c&&(!m||u)?{active:!0,side:0}:!c&&m&&!d?{active:!0,side:0}:c&&m&&!d?{active:!0,side:-1}:null:null}},props:{attributes:r=>{var o;let{active:n=!1}=(o=t.getState(r))!==null&&o!==void 0?o:{};return Object.assign({},n?{class:"no-cursor"}:{})},decorations:r=>{var o;let{active:n,side:i}=(o=t.getState(r))!==null&&o!==void 0?o:{};if(!n)return hc.empty;let a=jm.widget(r.selection.from,_V,{side:i});return hc.create(r.doc,[a])},handleKeyDown(r,o){switch(o.key){case"`":return II(r,t,o,Er(r,e),e.attrs);case"ArrowRight":return TI(r,t,o,Er(r,e),e.attrs);case"ArrowLeft":return NI(r,t,o,Er(r,e),e.attrs);case"Backspace":return wI(r,t,o,Er(r,e));case"Delete":return RI(r,t,o,Er(r,e));case"ArrowUp":case"ArrowDown":case"Home":case"End":return Or(r,t);case"e":case"a":return o.ctrlKey?Or(r,t):!1;default:return!1}},handleClick(r){return Or(r,t,"click")}}});return t}function MI(e){let t=JV(e),r=vI(t,e);return[t,r]}var nee=MI;var cee=e=>(t,r)=>{if(!r)return!1;let o=t.selection,n=o.$from.node(1);if(!ft(n)||!Hr(n)||o.$to.parentOffset===o.$to.parent.content.size)return!1;let a=n.attrs.tag;return a==="p"||a==="div"?!1:VI(e)(t,r)},dee=e=>(t,r)=>{if(!r)return!1;let n=t.selection.$from.node(1);if(!ft(n)||Hr(n))return!1;let i=n.attrs.tag;return i==="p"||i==="div"?!1:VI(e)(t,r)},VI=e=>(t,r)=>{if(!r)return!1;let o=e.nodes.lineBreak.create(),n=t.tr.replaceSelectionWith(o).scrollIntoView();return r(n),!0},uee=e=>(t,r)=>{let o=t.selection;if(o.from!==o.to)return!1;let n=o.$from.node(-1);return!Jm(n)||qm(o.$from.node(-3))||o.$from.parentOffset!==0||o.$from.index(-1)!==0||o.$from.index(-2)!==0?!1:Cy(e.nodes.listItem)(t,r&&(i=>{if(o.$from.depth>3){let a=o.$from.before(-1);i.join(a)}r(i)}))};function fee(e){return Wc(/^([ai]|\d+)\.\s$/iu,e.nodes.numberedList,t=>{let r=t[1];switch(r){case"a":return{listStyleType:"lower-alpha"};case"A":return{listStyleType:"upper-alpha"};case"i":return{listStyleType:"lower-roman"};case"I":return{listStyleType:"upper-roman"};default:return{start:Number(r)}}},(t,r)=>r.childCount+r.attrs.start===Number(t[1]))}function hee(e){return Wc(/^\s*([-+*])\s$/u,e.nodes.bulletedList)}function bee(){return new hr({appendTransaction(e,t,r){let o,n=r.selection.$from.parent;if(t.selection instanceof xr&&e.find(a=>a.steps.find(s=>s instanceof $m))){let a=t.doc.firstChild,s=ft(n)&&!Hr(n);if(a&&ft(a)&&s){let l=qV(a);if(o??=r.tr,l){let c=l.marks.find(go);o.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c?.attrs.inlineStyles??{}});for(let m of l.marks)o.addMark(0,r.doc.content.size,m),o.addStoredMark(m)}else{let c=a.attrs.inlineStyles;o.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c})}}}return o}})}function qV(e){for(let t=0;t<e.childCount;t++){let r=e.child(t);if(Ba(r))return r}}function wee(e,t){let r=t.getFontsForLoading().filter(i=>!Lo.isSelectorLoaded(i)),o=t.getTextStylePresets(!1).filter(sm),n=e.getNodesWithTrait(o,lo).filter(i=>!Lo.isSelectorLoaded(i.font)).map(i=>i.font);return r.push(...n),r}var DI=[Rr.youtube,Rr.vimeo,Rr.codeblock,Rr.twitter];async function kI(e,t){let r=Z(t);vr(r)&&await e.stores.modulesStore.addExternalModulesToProject([r],{onTreeUpdate(){}})}var PI=new WeakMap;async function kee(e){let{modules:t}=await e.stores.modulesStore.lookUpModules(DI.map(Wm)),r=[];for(let o=0;o<t.length;o++){let n=t[o];g(n,"Module must exist");let i=DI[o];g(i,"Module component must exist"),PI.set(i,n),g(n.files.module,"Module must have a module file"),r.push(ec(n.id,n.saveId,n.files.module,i.exportSpecifier??"default"))}await e.stores.modulesStore.preloadExternalModules(r)}function ta(e,t){let r=PI.get(t);g(r,"Preloaded module must exist");let o=e.getNodeWithTrait(r.id,sc);return o?o.codeComponentIdentifier:(g(r.files.module,"Module must have a module file"),ec(r.id,r.saveId,r.files.module,t.exportSpecifier??"default").value)}async function FI(e,t){let{moduleIdentifier:r}=await wy(e,t);if(r.kind==="externalModuleExport"){let o=e.tree.getNodeWithTrait(r.moduleId,sc);if(o)return o.codeComponentIdentifier}return r.value}async function ro(e,t,r,o,n={}){await kI(e,o);let i=r.state,a=i.tr;a.replaceRangeWith(i.selection.from,i.selection.to,t.nodes.module.create({identifier:o,props:n}));let s=i.selection.from===0?0:i.selection.from-1;a.setSelection(Hm.create(a.doc,s)),r.dispatch(a)}async function Hl(e,t,r,o,n){let i=await FI(e,o);await ro(e,t,r,i,n)}async function Gl(e,t,r,o,n){$t("collection_record_youtube_add",{source:"cms"});let i=n?{url:{type:"string",value:n}}:void 0;try{let a=ta(e.tree,Rr.youtube);await ro(e,t,r,a,i),o?.()}catch(a){Re(a)}}async function Wee(e,t,r,o,n){let i=n?{url:{type:"string",value:n}}:void 0;try{let a=ta(e.tree,Rr.twitter);await ro(e,t,r,a,i),o?.()}catch(a){Re(a)}}async function jl(e,t,r,o,n){$t("collection_record_vimeo_add",{source:"cms"});let i=n?{video:{type:"string",value:n}}:void 0;try{let a=ta(e.tree,Rr.vimeo);await ro(e,t,r,a,i),o?.()}catch(a){Re(a)}}async function $ee(e,t,r,o="",n){let i={code:{type:"string",value:o}};$t("collection_record_codeblock_add",{source:"cms"});try{let a=ta(e.tree,Rr.codeblock);await ro(e,t,r,a,i),n?.()}catch(a){Re(a)}}function ra(e,t,r,o,n){return o.content.size===0?!1:(e.scheduler.processWhenReady(()=>{let i=t.state,a=i.tr,s=n(o),l=XV(s),c=i.selection.$from.node(1),m=i.selection.$from.before(1),d=!s.content.child(0).isInline,u=i.selection instanceof xr||c?.content.size===0;if(l)a.replaceSelectionWith(l,!0);else if(d&&u){let f=c?m+c.nodeSize:i.selection.to;a.replaceRange(m,f,s)}else a.replaceSelection(s);a.scrollIntoView(),a.setMeta("paste",!0),a.setMeta("uiEvent","paste"),t.dispatch(a)}),!0)}function XV(e){return e.openStart===0&&e.openEnd===0&&e.content.childCount===1?e.content.firstChild:null}var KV=fe("prosemirror:addMedia"),LI=[{extension:"mp4",mimeType:"video/mp4"}];function AI(e){return e=e.toLowerCase(),LI.some(({extension:t})=>e.endsWith(`.${t}`))}function YV(e){return e.startsWith("video/")}var EI=[...ms],OI=new Set(ps);for(let{extension:e,mimeType:t}of LI)EI.push(e),OI.add(t);var QV="failed-asset-upload-placeholder",BI="updateAssetReferences";function Zee(e){return e.getMeta(BI)}function ZV(e){return e.setMeta(BI,!0)}async function ln(e,t,r,o,{type:n,insertPosition:i,mediaExtractedFromHTML:a}){let s=r.state,l=s.tr,c=new Wn(e,{silent:a}),m=[],d=[],u=[];for(let T of o)if(T instanceof File){let N=YV(T.type);if(g(!a,"we should not receive files if the media is already in a document"),!OI.has(T.type))continue;let x=URL.createObjectURL(T);m.push({uploadResultTask:c.createTask(T,V=>V),temporaryURL:x,type:N?"video":"image"}),d.push({src:x,isVideo:N}),u.push(x)}else{let N=wu(T.src);if(N){d.push({src:T.src,isVideo:AI(N.originalFilename??N.identifier)});continue}d.push({src:T.src,isVideo:AI(T.src)}),m.push({uploadResultTask:c.createTask(T.src,x=>x),temporaryURL:T.src,type:T.type})}if(!m.length)return Promise.resolve();if(!a)for(let{src:T,isVideo:N}of d){let x=t.nodes.image.create({src:T,type:N?"video":"image"});i?l.insert(i,x):s.selection.replaceWith(l,x)}l.scrollIntoView(),(n==="drop"||n==="paste")&&(l.setMeta(n,!0),l.setMeta("uiEvent",n)),r.dispatch(l);let f=m.map(T=>T.uploadResultTask());a&&rd(c,f).catch(()=>{});let y=(await Promise.allSettled(f)).map((T,N)=>eD(T,N,m)),S=[];y.forEach(T=>{if(T.type==="asset")return S.push(T.asset)});let C=new Map;m.forEach((T,N)=>{let x=y[N];g(x,"Asset upload result must be defined"),C.set(T.temporaryURL,x)}),tD(r,C),u.forEach(T=>URL.revokeObjectURL(T))}function eD(e,t,r){switch(e.status){case"fulfilled":{let{value:o}=e,{asset:n}=o;return o.type==="image"?{type:"asset",asset:n,imageSize:o.imageSize}:{type:"asset",asset:n}}case"rejected":{let o=r[t];return g(o,"Upload must be defined"),KV.reportError(new Error(e.reason)),{type:"failed upload"}}}}async function ete(e,t,r,o){let n=await lC.pickFile({allowedFileTypes:EI});if(!n)return;let i=n[0];return ln(e,t,r,[i],o)}function tD(e,t){let r=e.state,o=r.tr;r.doc.descendants((n,i)=>{if(!bn(n))return;let a=t.get(n.attrs.src);if(a===void 0)return;let s={...n.attrs};if(a.type==="failed upload")s.src=QV;else if(a.imageSize){s.src=Nu({identifier:oc(a.asset),intrinsicSize:{width:a.imageSize.naturalWidth,height:a.imageSize.naturalHeight}});let l=Zg(a.imageSize);s.pixelWidth=l.nonZeroNaturalWidth,s.pixelHeight=l.nonZeroNaturalHeight}else s.src=Tu(oc(a.asset));o.setNodeMarkup(i,n.type,s),ZV(o)}),e.dispatch(o)}function _l(e){let t=e.querySelector("b[id^='docs-internal-guid']")??e.querySelector("*[id^='docs-internal-guid']")?.parentElement;if(t)for(let r=t.children.length-1;r>=0;r--){let o=t.children[r];if(o){for(o instanceof HTMLParagraphElement&&!at.isOn("pasteMarkdown")&&rD(o),o instanceof HTMLDivElement&&oD(o);zI(o.firstChild);)o.removeChild(o.firstChild);for(;zI(o.lastChild);)o.removeChild(o.lastChild);(o.tagName==="BR"||o.childNodes.length===0)&&o.remove()}}}function zI(e){return e instanceof Element&&e.textContent===""&&e.querySelectorAll("img").length===0}function rD(e){if(e.textContent!=="")return;let t=e.querySelectorAll("img");t.length!==0&&e.replaceWith(...t)}function oD(e){let t=e.querySelector("table");t===null||t.querySelectorAll("tr").length===0||t.querySelectorAll("th, td").length===0||e.replaceWith(t)}function UI(e){let t=_m.map(o=>`${o}:has(img)`).join(", ");for(let o of e.querySelectorAll("*:empty"))o.setAttribute("data-original-empty","1");for(let o of e.querySelectorAll(t)){let n=o.parentNode;if(!n)continue;let i=o.querySelector("img");for(;i;){let a=document.createRange();a.setStart(o,0),a.setEndBefore(i);let s=a.extractContents();if(s.childNodes.length){let l=o.cloneNode(!1);l.appendChild(s),l.hasChildNodes()&&n.insertBefore(l,o)}n.insertBefore(i,o),i=o.querySelector("img")}}let r;for(;r=e.querySelector("*:empty:not([data-original-empty])");)r.remove();for(let o of e.querySelectorAll("[data-original-empty]"))o.removeAttribute("data-original-empty")}var nD=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,iD=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function WI({engine:e,schema:t,stylePresetGetters:r,supportedTags:o,saveChanges:n}){return new hr({props:{clipboardSerializer:r?new Kd(t):void 0,transformPastedHTML(i){let a=An(i);return _l(a),UI(a),a.innerHTML},handlePaste(i,a,s){let l=a.clipboardData?.getData("text/plain"),c=a.clipboardData?.getData("text/html");if(gc(t)){let{clipboardData:m}=a;if(m&&m.files.length>0)return ln(e,t,i,m.files,{type:"paste"}).finally(n),!0}if(E(l)){let d=["http:","https:","mailto:","www."].some(f=>l.startsWith(f)),u=i.state.selection;if(d&&u.from!==u.to&&Xm(t)){let f=Pa({url:l}),h=i.state.tr;return h.addMark(u.from,u.to,t.marks.link.create({link:f,openInNewTab:ys(f),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),i.dispatch(h),!0}if(yc(t)&&at.isOn("cmsPasteModules")){let f=Z(l);if(Ce(f))return ro(e,t,i,f.value).catch(Re),!0;if(Xa(l))return Hl(e,t,i,l).catch(Re),!0}if(yc(t)){if(iD.test(l))return Gl(e,t,i,n,l).catch(Re),!0;if(nD.test(l))return jl(e,t,i,n,l).catch(Re),!0}}return ra(e,i,a,s,m=>{if(r&&c&&sD(c))return m;let d=Ry(l);l&&d&&(m=xy(l,t));let u=t.nodes.document.create(void 0),f=new Cn(u);f.insert(0,m.content);let h=[];if(f.doc.descendants((S,C)=>{if(ft(S)){let T=S.attrs.tag,N=o?.has(T)??!0,x=xn(T)&&N?T:"p";f.setNodeMarkup(C,t.nodes.textBlock,{...S.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:x})}bn(S)&&h.push({src:S.attrs.src,type:S.attrs.type})}),h.length&&gc(t)&&ln(e,t,i,h,{type:"paste",mediaExtractedFromHTML:!0}).finally(n),Km(t)&&r){let C=i.state.selection,N=C.$from.parent,x=N.textContent,V=ft(N)&&x.length>0,A=C instanceof xr,j=!c&&l&&l.length>0&&!d;!V&&!j&&!A?lD(e,t,r.getStylePresetForTag,r.getStylePresetForLink,f):cD(i,t,f)}let y=m.content.child(0).isInline?f.doc.content.child(0).content:f.doc.content;return new Sn(y,m.openStart,m.openEnd)})}}})}var $I="framer-match-formatting",aD=document.createComment($I);function sD(e){return e.endsWith(`<!--${$I}-->`)}var Kd=class{constructor(t){I(this,"domSerializer");I(this,"nodes");I(this,"marks");this.domSerializer=Oa.fromSchema(t),this.nodes=this.domSerializer.nodes,this.marks=this.domSerializer.marks}serializeNode(t,r){return this.domSerializer.serializeNode(t,r)}serializeFragment(t,r){let o=this.domSerializer.serializeFragment(t,r);return o.appendChild(aD),o}};function lD(e,t,r,o,n){n.doc.descendants((i,a)=>{if(ft(i)){let s=i.attrs,l=E(s.textStylePreset)?e.tree.getNodeWithTrait(s.textStylePreset,Oo):void 0,c=xn(s.tag)?s.tag:"p",m=l??r(c)??Ts(e.tree,c)??qa.createDefault(c);Ns(e,m),n.setNodeMarkup(a,t.nodes.textBlock,{...i.attrs,blockStyles:l?i.attrs.blockStyles:{},inlineStyles:l?i.attrs.inlineStyles:{},textStylePreset:m.id}),l||n.removeMark(a,i.nodeSize,t.marks.inlineStyles)}if(i.type===t.nodes.text){let s=i.marks.find(za);if(s){let l=o()??vs(e.tree)??bs.createDefault();Is(e,l),n.addMark(a,a+i.nodeSize,s.type.create({...s.attrs,linkStylePreset:l.id}))}}})}function cD(e,t,r){let o=e.state,n=o.selection;if(n instanceof xr){let c=o.doc.resolve(1);n=new Xt(c)}let i=n.$from.parent,a=ft(i),l=n.$from.marks().find(go);if(l)r.addMark(0,r.doc.content.size,l);else if(a){let c=t.marks.inlineStyles.create({inlineStyles:i.attrs.inlineStyles});r.addMark(0,r.doc.content.size,c)}else r.removeMark(0,r.doc.content.size,t.marks.inlineStyles);r.doc.descendants((c,m)=>{if(!ft(c))return;let d=a?i.attrs:c.attrs;r.setNodeMarkup(m,t.nodes.textBlock,d)})}var HI="framer-rich-text",dD=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,uD=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function GI(e,t){return new hr({props:{handlePaste(r,o,n){let i=o.clipboardData?.getData("text/plain"),a=o.clipboardData?.getData("text/html");return i===""&&a===""?!0:ra(e,r,o,n,s=>{let l=!a&&i&&i.length>0;if(a?.endsWith(`<!--${HI}-->`))return s;let d=r.state.selection,f=d.$from.parent,h=f.textContent,y=ft(f)&&h.length>0,S=d instanceof xr;return!y&&!l&&!S?pD(e,t,s):hD(r,s)})},clipboardSerializer:new Yd(He)}})}function Qte(e,t,r,o,n,i){return new hr({props:{transformPastedHTML(a){let s=An(a);return _l(s),s.innerHTML},handlePaste(a,s,l){if(t){let{clipboardData:m}=s;if(m&&m.files.length>0)return ln(e,He,a,m.files,{type:"paste"}).finally(i),!0}let c=s.clipboardData?.getData("text/plain");if(E(c)){let d=["http:","https:","mailto:","www."].some(f=>c.startsWith(f)),u=a.state.selection;if(d&&u.from!==u.to&&o){let f=Pa({url:c}),h=a.state.tr;return h.addMark(u.from,u.to,He.marks.link.create({link:f,openInNewTab:ys(f),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),a.dispatch(h),!0}if(r&&at.isOn("cmsPasteModules")){let f=Z(c);if(Ce(f))return ro(e,He,a,f.value).catch(Re),!0;if(Xa(c))return Hl(e,He,a,c).catch(Re),!0}if(r){if(uD.test(c))return Gl(e,He,a,i,c).catch(Re),!0;if(dD.test(c))return jl(e,He,a,i,c).catch(Re),!0}}return ra(e,a,s,l,m=>{let d=He.nodes.document.create(void 0),u=new Cn(d);u.insert(0,m.content);let f=[];u.doc.descendants((y,S)=>{if(ft(y)){let C=y.attrs.tag,T=n?.has(C)??!0,N=xn(C)&&T?C:"p";u.setNodeMarkup(S,He.nodes.textBlock,{...y.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:N})}bn(y)&&f.push({src:y.attrs.src,type:y.attrs.type})}),f.length&&ln(e,He,a,f,{type:"paste",mediaExtractedFromHTML:!0}).finally(i),u.removeMark(0,u.doc.content.size,He.marks.inlineStyles),o||u.removeMark(0,u.doc.content.size,He.marks.link);let h=m.content.child(0).isInline?u.doc.content.child(0).content:u.doc.content;return new Sn(h,m.openStart,m.openEnd)})}}})}var mD=document.createComment(HI),Yd=class{constructor(t){I(this,"domSerializer");I(this,"nodes");I(this,"marks");this.domSerializer=Oa.fromSchema(t),this.nodes=this.domSerializer.nodes,this.marks=this.domSerializer.marks}serializeNode(t,r){return this.domSerializer.serializeNode(t,r)}serializeFragment(t,r){let o=this.domSerializer.serializeFragment(t,r);return o.appendChild(mD),o}};function pD(e,t,r){let o=He.nodes.document.create(void 0),n=new Cn(o);n.insert(0,r.content);let i=e.tree.getNodeWithTrait(t,_e);g(i,"RichTextNode for pasting not found");let a=fD(e.tree,i);n.doc.descendants((l,c)=>{if(ft(l)){let m=l.attrs,d=E(m.textStylePreset)?e.tree.getNodeWithTrait(m.textStylePreset,Oo):void 0,u=xn(m.tag)?m.tag:"p",f=d??a[u]??i.getNodeTextStylePreset(e.tree,u)??Ts(e.tree,u)??qa.createDefault(u);Ns(e,f),n.setNodeMarkup(c,He.nodes.textBlock,{...l.attrs,blockStyles:d?l.attrs.blockStyles:{},inlineStyles:d?l.attrs.inlineStyles:{},textStylePreset:f.id}),d||n.removeMark(c,l.nodeSize,He.marks.inlineStyles)}if(l.type===He.nodes.text){let m=l.marks.find(za);if(m){let d=i.getNodeLinkStylePreset(e.tree)??vs(e.tree)??bs.createDefault();Is(e,d),n.addMark(c,c+l.nodeSize,He.marks.link.create({...m.attrs,linkStylePreset:d.id}))}}});let s=r.content.child(0).isInline?n.doc.content.child(0).content:n.doc.content;return new Sn(s,r.openStart,r.openEnd)}function fD(e,t){let r={};for(let o of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(o,Oo);n&&(r[n.tag]??=n)}return r}function hD(e,t){let r=e.state,o=r.selection;if(o instanceof xr){let d=r.doc.resolve(1);o=new Xt(d)}let n=He.nodes.document.create(void 0),i=new Cn(n);i.insert(0,t.content);let a=o.$from.parent,s=ft(a),c=o.$from.marks().find(go);if(c)i.addMark(0,i.doc.content.size,c);else if(s){let d=He.marks.inlineStyles.create({inlineStyles:a.attrs.inlineStyles});i.addMark(0,i.doc.content.size,d)}else i.removeMark(0,i.doc.content.size,He.marks.inlineStyles);i.doc.descendants((d,u)=>{if(!ft(d))return;let f=s?a.attrs:d.attrs;i.setNodeMarkup(u,He.nodes.textBlock,f)});let m=t.content.child(0).isInline?i.doc.content.child(0).content:i.doc.content;return new Sn(m,t.openStart,t.openEnd)}function ire({engine:e,schema:t,nodeId:r,getRichTextNode:o}){return at.isOn("pasteMarkdown")?WI({engine:e,schema:t,stylePresetGetters:{getStylePresetForTag:n=>{let i=o();if(i)return gD(e.tree,i,n)??i.getNodeTextStylePreset(e.tree,n)??void 0},getStylePresetForLink:()=>o()?.getNodeLinkStylePreset(e.tree)??void 0}}):GI(e,r)}function gD(e,t,r){for(let o of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(o,Oo);if(n&&n.tag===r)return n}}var yD=["RGB","HSL","HEX","P3"];function sre(e){return yD.some(t=>t===e)}function dre(e,t){let r=new Set,o=new Set;for(let n of t){if(o.has(n))continue;let i=e.get(n);if(i){if(St(i)){r.add(n);continue}for(let a of i.ancestors())if(!o.has(a.id)&&(o.add(a.id),a.cache.reset(),!!St(a))){r.add(a.id);break}}}return r}function SD(e){let t=ic.isP3String(e)?xu.fromString(e):ic(e);if(t)return t.r*.299+t.g*.587+t.b*.114+(1-t.a)*255}function fre(e){let t=SD(e);if(H(t))return t>128?"light":"dark"}async function Sre(e){return Bg.get(`/web/v1/sites/hostnames/${e}`)}var jI=class extends So{};var UD={};ST(UD,{amethyst:()=>bD,aquaBlue:()=>vD,atomDark:()=>ID,atomLight:()=>TD,ayuDark:()=>ND,ayuLight:()=>wD,cmsTheme:()=>CD,cobalt2:()=>RD,cyberpunk:()=>xD,dracula:()=>MD,framerDark:()=>oa,framerLight:()=>VD,freeCodeCamp:()=>DD,githubDark:()=>kD,githubLight:()=>PD,levelUp:()=>FD,magic:()=>LD,monokaiPro:()=>AD,neoCyan:()=>ED,nightOwl:()=>OD,sandpackDark:()=>BD,sandpackLight:()=>zD});var CD={colors:{surface1:Bt.cmsCodeBlockSurface1,surface3:Bt.cmsCodeBlockSurface3,disabled:Bt.cmsCodeBlockDisabled,accent:Bt.cmsCodeBlockAccent,errorSurface:Bt.cmsCodeBlockErrorSurface},syntax:{plain:Bt.cmsCodeBlockPlain,comment:Bt.cmsCodeBlockComment,keyword:Bt.cmsCodeBlockKeyword,tag:Bt.cmsCodeBlockTag,punctuation:Bt.cmsCodeBlockPunctuation,definition:Bt.cmsCodeBlockDefinition,property:Bt.cmsCodeBlockProperty,static:Bt.cmsCodeBlockStatic,string:Bt.cmsCodeBlockString},font:{mono:Eg.family.monospace,lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},bD={colors:{surface1:"#000000",surface3:"#3b3b4f",disabled:"#858591",accent:"#a26cd6",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#a26cdd",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#57d1b7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},vD={colors:{surface1:"#f8f9fb",surface3:"#e4e7eb",disabled:"#C5C5C5",accent:"#2e7692"},syntax:{plain:"#1F2933",comment:"#A7B6C2",keyword:"#1A56DB",tag:"#1A56DB",punctuation:"#394b59",definition:"#A23DAD",property:"#2e7692",static:"#1A56DB",string:"#1992D4"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},ID={colors:{surface1:"#282c34",surface3:"#2c313c",disabled:"#4d4d4d",accent:"#c678dd",errorSurface:"#ffeceb"},syntax:{plain:"#a8b1c2",comment:"#757575",keyword:"#c678dd",tag:"#e06c75",punctuation:"#a8b1c2",definition:"#62aeef",property:"#d19a66",static:"#a8b1c2",string:"#98c379"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},TD={colors:{surface1:"#fafafa"},syntax:{plain:"#383a42",comment:"#a0a1a7",keyword:"#a626a4",tag:"#e45649",punctuation:"#383a42",definition:"#c18401",property:"#4078f2",static:"#986801",string:"#50a14f"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},ND={colors:{surface1:"#0c1017"},syntax:{comment:"#646a72",definition:"#5ac2ff",keyword:"#ff9040",plain:"#bfbdb6",property:"#ffb454",punctuation:"#bfbdb6",static:"#d2a6ff",string:"#80d962",tag:"#3bbae7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},wD={colors:{surface1:"#fafafa"},syntax:{comment:"#aaaeb1",definition:"#3b9ee6",keyword:"#fa8e3e",plain:"#5c6166",property:"#f2ae49",punctuation:"#5c6167",static:"#a37acc",string:"#87b300",tag:"#56b4d5"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},RD={colors:{surface1:"#193549",surface3:"#1f4662",disabled:"#C5C5C5",accent:"#ffc600",errorSurface:"#0d3a58"},syntax:{plain:"#ffffff",comment:"#0088ff",keyword:"#ff9d00",tag:"#9effff",punctuation:"#e1efff",definition:"#ffc600",property:"#ffc600",static:"#ffee80",string:"#a5ff90"},font:{mono:'"Operator Mono", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},xD={colors:{surface1:"#051c30",surface3:"#042f40",disabled:"#C5C5C5",accent:"#fdf500",errorSurface:"#051c30"},syntax:{plain:"#ffffff",comment:"#1ac5b0",keyword:"#fdf500",tag:"#ffc600",punctuation:"#afd7fa",definition:"#ffc600",property:"#fdf500",static:"#e455ae",string:"#37ebf3"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},MD={colors:{surface1:"#282a36",surface3:"#44475a",disabled:"#6272a4",accent:"#bd93f9",errorSurface:"#44475a"},syntax:{plain:"#f8f8f2",comment:"#6272a4",keyword:"#ff79c6",tag:"#ff79c6",punctuation:"#ff79c6",definition:"#f8f8f2",property:"#50fa7b",static:"#bd93f9",string:"#f1fa8c"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},oa={colors:{surface1:"#161820",surface3:"#2f2f2f",disabled:"#4d4d4d",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#eeeeee",comment:"#666666",keyword:"#00BBFF",tag:"#00BBFF",punctuation:"#999999",definition:"#ffcc66",property:"#77dddd",static:"#ff8866",string:"#bb88ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},VD={colors:{surface1:"#fafafa",surface3:"#f3f3f3",disabled:"#c5c5c5",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#666666",comment:"#bbbbbb",keyword:"#0099ff",tag:"#0099ff",punctuation:"#bbbbbb",definition:"#FFAA00",property:"#33cccc",static:"#ff8866",string:"#8855ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},DD={colors:{surface1:"#2a2a40",surface3:"#3b3b4f",disabled:"#858591",accent:"#dbb8ff",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#dbb8ff",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#acd157"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},kD={colors:{surface1:"#0d1117",surface3:oa.colors?.surface3,disabled:oa.colors?.disabled,accent:oa.colors?.accent,errorSurface:oa.colors?.errorSurface},syntax:{comment:"#8b949e",definition:"#d2a8ff",keyword:"#ff7b72",plain:"#e6edf3",property:"#79c0ff",punctuation:"#e6edf3",static:"#7ee787",string:"#a5d6ff",tag:"#7ee787"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},PD={colors:{surface1:"#ffffff",surface3:"#f5f5f5",disabled:"#d1d4d8",accent:"#24292e"},syntax:{keyword:"#d73a49",property:"#005cc5",plain:"#24292e",static:"#032f62",string:"#032f62",definition:"#6f42c1",punctuation:"#24292e",tag:"#22863a",comment:"#6a737d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"normal",property:"normal",keyword:"normal"}},FD={colors:{surface1:"#191324",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},AD={colors:{surface1:"#2D2A2E",surface3:"#484747",disabled:"#444344",accent:"#FFD866",errorSurface:"#c24038"},syntax:{plain:"rgb(252, 252, 250)",comment:"#757575",keyword:"rgb(255, 97, 136)",tag:"rgb(120, 220, 232)",punctuation:"rgb(147, 146, 147)",definition:"rgb(169, 220, 118)",property:"rgb(120, 220, 232)",static:"rgb(171, 157, 242)",string:"rgb(255, 216, 102)"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"normal"}},LD={colors:{surface1:"#f6f6f8",surface3:"#f6f6f8",disabled:"#C5C5C5",accent:"#ffa600",errorSurface:"#ffeceb"},syntax:{plain:"#151515",comment:"#cacacd",keyword:"#ffa600",tag:"#ff9a4d",punctuation:"#ffb3b3",definition:"#ff6f00",property:"#9900ff",static:"#FF453A",string:"#f53524"},font:{mono:'"Roboto Mono", monospace',lineHeight:"24px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},ED={colors:{surface1:"#2b3935",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},OD={colors:{surface1:"#011627",surface3:"#112331",disabled:"#4D4D4D",accent:"#c5e4fd",errorSurface:"#811e18"},syntax:{plain:"#d6deeb",comment:"#999999",keyword:"#c792ea",tag:"#7fdbca",punctuation:"#7fdbca",definition:"#82aaff",property:"#addb67",static:"#f78c6c",string:"#ecc48d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"italic"}},BD={colors:{surface1:"#151515",surface3:"#2F2F2F",disabled:"#4D4D4D",accent:"#90e86f",errorSurface:"#b08df8"},syntax:{plain:"#f0fdaf",comment:"#757575",keyword:"#e5fd78",tag:"#f0fdaf",punctuation:"#ffffff",definition:"#eeeeee",property:"#90e86f",static:"#ffffff",string:"#dafecf"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},zD={colors:{surface1:"#ffffff",surface3:"#F3F3F3",disabled:"#C5C5C5",accent:"#3973E0",errorSurface:"#FCF1F0"},syntax:{plain:"#151515",comment:"#999",keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}};var Qd=e=>{let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r);return t&65535};function na(e){return typeof e=="object"&&e!==null}function WD(e,t){if(e.length!==t.length)return!1;let r=e.length;for(let o=0;o<r;o++)if(e[o]!==t[o])return!1;return!0}var ia=class{constructor(){I(this,"cache",new Map)}set(t,r,o){let n=this.cache.get(t);n||(n=new Map,this.cache.set(t,n)),n.set(r,o)}getSubMap(t){return this.cache.get(t)}get(t,r){return this.cache.get(t)?.get(r)}clear(){this.cache.clear()}};var Jl=class{constructor(t){I(this,"seqs",[]);I(this,"idxs",[]);I(this,"maxSize");this.maxSize=t?.maxSize}clear(){this.seqs=[],this.idxs=[]}get(t){let r=this.seqs.length;if(r===0)return 0;let o=_I(this.seqs,t);return o<r&&this.seqs[o]===t?this.idxs[o]:0}add(t,r){if(this.maxSize&&this.seqs.length>=this.maxSize&&this.seqs[0]>t)return;let i=_I(this.seqs,t);if(i<this.seqs.length&&this.seqs[i]===t){r<this.idxs[i]&&(this.idxs[i]=r,this.propagateLeftFrom(i));return}this.seqs.splice(i,0,t),this.idxs.splice(i,0,r),i+1<this.idxs.length&&(this.idxs[i]=Math.min(this.idxs[i],this.idxs[i+1])),this.propagateLeftFrom(i),this.evict()}evict(){if(this.maxSize){let t=this.seqs.length-this.maxSize;t>0&&(this.seqs.splice(0,t),this.idxs.splice(0,t))}}propagateLeftFrom(t){let r=this.idxs[t];for(let o=t-1;o>=0&&!(this.idxs[o]<=r);o--)this.idxs[o]=r}__snapshot(){return this.seqs.map((t,r)=>({seq:t,idx:this.idxs[r]}))}};function _I(e,t){let r=0,o=e.length;for(;r<o;){let n=r+o>>>1;e[n]<t?r=n+1:o=n}return r}var aa=class{constructor(t,r){this.capacity=t;I(this,"buffer");I(this,"length",0);r?(this.buffer=r.buffer,this.length=r.length,g(this.buffer.length===this.capacity,"Buffer capacity mismatch:",this.buffer.length,"!=",this.capacity)):this.buffer=new Float64Array(t)}push(t){this.buffer[this.length]=t,this.length+=1}clone(){return this.buffer.subarray(0,this.length)}},sa=class{constructor(t){this.bucketSize=t;I(this,"buckets",[]);I(this,"_length",0);I(this,"bucketShift");I(this,"bucketMask");g((t&t-1)===0,`Bucket size must be a power of 2, got: ${t}`),this.bucketShift=Math.log2(t),this.bucketMask=t-1}add(t){let r=this.buckets[this.buckets.length-1];(!r||r.length>=r.capacity)&&(r=new aa(this.bucketSize),this.buckets.push(r)),r.push(t);let o=this._length;return this._length+=1,o}get(t){let r=t>>this.bucketShift,o=t&this.bucketMask;return this.buckets[r]?.buffer[o]}get length(){return this._length}slice(t,r){t<0&&(t=this.length+t),r<0&&(r=this.length+r);let o=t>>this.bucketShift,n=r>>this.bucketShift,i=Math.min(this.length,r)-t;if(i<=0)return[];let a=Array.from({length:i}),s=0,l=t&this.bucketMask,c=this.buckets[o];if(o===n){let u=r&this.bucketMask;for(let f=l;f<u;++f)a[s++]=c.buffer[f];return a}for(let u=l;u<this.bucketSize;++u)a[s++]=c.buffer[u];for(let u=o+1;u<n;++u){let f=this.buckets[u];for(let h=0;h<f.length;++h)a[s++]=f.buffer[h]}let m=r&this.bucketMask,d=this.buckets[n];for(let u=0;u<m;++u)a[s++]=d.buffer[u];return a}toState(){return new Float64Array(this.slice(0,this.length))}fromState(t){let r=t;this._length=r.length;let o=0;for(o=0;o<r.length-this.bucketSize;o+=this.bucketSize){let i=r.subarray(o,o+this.bucketSize);this.buckets.push(new aa(this.bucketSize,{buffer:i,length:i.length}))}let n=new aa(this.bucketSize);for(;o<r.length;++o)n.push(r[o]);this.buckets.push(n)}};var si=class{constructor(t=1024){I(this,"uniques",[]);I(this,"indices");I(this,"count",0);I(this,"lookup");I(this,"cursor",0);this.indices=new Uint32Array(t)}ensureCapacity(t){if(t<=this.indices.length)return;let r=this.indices.length||1;for(;r<t;)r<<=1;let o=new Uint32Array(r);o.set(this.indices),this.indices=o}hydrateThrough(t){for(this.lookup||(this.lookup=new Map);this.cursor<=t;++this.cursor){let r=this.uniques[this.cursor];this.lookup.set(r,this.cursor)}}indexOfExisting(t){if(this.lookup?.has(t))return this.lookup.get(t);for(;this.cursor<this.uniques.length;++this.cursor){let r=this.uniques[this.cursor];if(this.lookup??=new Map,this.lookup.set(r,this.cursor),Object.is(r,t))return this.cursor}}add(t){let r=this.indexOfExisting(t);r===void 0&&(r=this.uniques.length,this.uniques.push(t),this.lookup??=new Map,this.lookup.set(t,r),this.cursor=this.uniques.length);let o=this.count;return this.ensureCapacity(o+1),this.indices[o]=r,this.count=o+1,o}get(t){if(t<0||t>=this.count)throw RangeError("index out of bounds");return this.uniques[this.indices[t]]}slice(t,r){let o=Math.max(0,r-t),n=new Array(o);for(let i=0;i<o;++i)n[i]=this.uniques[this.indices[t+i]];return n}get length(){return this.count}toState(){return[JSON.stringify(this.uniques),this.indices.subarray(0,this.count)]}fromState(t){let[r,o]=t;this.uniques=JSON.parse(r),this.indices=new Uint32Array(o),this.count=this.indices.length,this.lookup=void 0,this.cursor=this.uniques.length}rehydrate(){this.cursor<this.uniques.length&&this.hydrateThrough(this.uniques.length-1)}};function JI(e){switch(typeof e){case"string":return 1;case"number":return e===0?Object.is(e,-0)?15:14:2;case"boolean":return 3;case"undefined":return 4;case"object":return e===null?5:e instanceof Uint8Array?8:e instanceof Uint16Array?9:e instanceof Uint32Array?10:e instanceof Float32Array?12:e instanceof Float64Array?13:e instanceof BigUint64Array?11:Array.isArray(e)?6:7;default:throw Error(`Unknown type: ${e}`)}}var ql=class{constructor(t){I(this,"buffer");I(this,"view");I(this,"offset");this.buffer=t??new Uint8Array(1024*1024),this.view=new DataView(this.buffer.buffer),this.offset=0}ensureCapacity(t){let r=this.offset+t;if(r>this.buffer.length){let o=this.buffer.length*2;for(;o<r;)o*=2;let n=new Uint8Array(o);n.set(this.buffer),this.buffer=n,this.view=new DataView(this.buffer.buffer)}}align(t){let r=this.offset+t-1&~(t-1);this.ensureCapacity(r-this.offset),this.offset=r}write(t){let r=JI(t);switch(this.writeType(r),r){case 1:this.writeString(t);break;case 2:this.writeNumber(t);break;case 16:this.writeVarInt(t);break;case 17:this.writeVarUint(t);break;case 14:this.writeZero();break;case 15:this.writeZeroNegative();break;case 3:this.writeBoolean(t);break;case 4:this.writeUndefined();break;case 5:this.writeNull();break;case 6:this.writeArray(t);break;case 7:this.writeObject(t);break;case 8:this.writeUint8Array(t);break;case 9:this.writeUint16Array(t);break;case 10:this.writeUint32Array(t);break;case 12:this.writeFloat32Array(t);break;case 13:this.writeFloat64Array(t);break;case 11:this.writeBigUint64Array(t);break;default:throw Error(`Unknown type: ${r}`)}}writeUint8(t){return this.ensureCapacity(1),this.view.setUint8(this.offset,t),this.offset+=1,1}writeUint16(t){this.ensureCapacity(2),this.view.setUint16(this.offset,t,!0),this.offset+=2}writeUint32(t){this.ensureCapacity(4),this.view.setUint32(this.offset,t,!0),this.offset+=4}writeFloat32(t){this.ensureCapacity(4),this.view.setFloat32(this.offset,t,!0),this.offset+=4}writeFloat64(t){this.ensureCapacity(8),this.view.setFloat64(this.offset,t,!0),this.offset+=8}writeVarInt(t){let r=t>=0?t*2:-t*2-1;this.writeVarUint(r)}writeVarUint(t){let r=t;for(;r>=128;)this.writeUint8(r%128|128),r=Math.floor(r/128);this.writeUint8(r)}writeType(t){this.writeUint8(t)}writeString(t){let r=GD(t);this.writeVarUint(r.length),this.ensureCapacity(r.length),this.buffer.set(r,this.offset),this.offset+=r.length}writeNumber(t){this.writeFloat64(t)}writeBoolean(t){this.writeUint8(t?1:0)}writeUndefined(){}writeNull(){}writeZero(){}writeZeroNegative(){}writeArray(t){this.writeVarUint(t.length);for(let r of t)this.write(r)}writeObject(t){let r=Object.keys(t);this.writeVarUint(r.length);for(let o of r)this.writeString(o),this.write(t[o])}writeTypedArrayGeneric(t,r){this.writeVarUint(t.length),this.align(r);let o=t.length*r;this.ensureCapacity(o);let n=new Uint8Array(t.buffer,t.byteOffset,o);this.buffer.set(n,this.offset),this.offset+=o}writeUint8Array(t){this.writeTypedArrayGeneric(t,Uint8Array.BYTES_PER_ELEMENT)}writeUint16Array(t){this.writeTypedArrayGeneric(t,Uint16Array.BYTES_PER_ELEMENT)}writeUint32Array(t){this.writeTypedArrayGeneric(t,Uint32Array.BYTES_PER_ELEMENT)}writeFloat32Array(t){this.writeTypedArrayGeneric(t,Float32Array.BYTES_PER_ELEMENT)}writeFloat64Array(t){this.writeTypedArrayGeneric(t,Float64Array.BYTES_PER_ELEMENT)}writeBigUint64Array(t){this.writeTypedArrayGeneric(t,BigUint64Array.BYTES_PER_ELEMENT)}getBuffer(){return this.buffer.slice(0,this.offset)}},Xl=class{constructor(t){I(this,"buffer");I(this,"view");I(this,"offset");if(!(t instanceof Uint8Array))throw new Error(`Buffer is not a Uint8Array: ${t}`);this.buffer=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.offset=0}align(t){let r=(t-this.offset%t)%t;this.offset+=r}read(){let t=this.readType();switch(t){case 1:return this.readString();case 2:return this.readNumber();case 16:return this.readVarInt();case 17:return this.readVarUint();case 14:return 0;case 15:return-0;case 3:return this.readBoolean();case 4:return this.readUndefined();case 5:return this.readNull();case 6:return this.readArray();case 7:return this.readObject();case 8:return this.readUint8Array();case 9:return this.readUint16Array();case 10:return this.readUint32Array();case 12:return this.readFloat32Array();case 13:return this.readFloat64Array();case 11:return this.readBigUint64Array();default:throw Error(`Unknown type: ${t}`)}}readUint8(){let t=this.view.getUint8(this.offset);return this.offset+=1,t}readUint16(){let t=this.view.getUint16(this.offset,!0);return this.offset+=2,t}readUint32(){let t=this.view.getUint32(this.offset,!0);return this.offset+=4,t}readFloat32(){let t=this.view.getFloat32(this.offset,!0);return this.offset+=4,t}readFloat64(){let t=this.view.getFloat64(this.offset,!0);return this.offset+=8,t}readVarInt(){let t=this.readVarUint();return t%2===0?t/2:-Math.floor(t/2)-1}readVarUint(){let t=0,r=0;for(;;){let o=this.readUint8();if(t+=(o&127)*2**r,(o&128)===0)break;if(r+=7,r>53)throw new Error("VarUint is too big")}return t}readType(){return this.readUint8()}readString(){let t=this.readVarUint(),r=this.buffer.subarray(this.offset,this.offset+t);return this.offset+=t,jD(r)}readNumber(){return this.readFloat64()}readBoolean(){return this.readUint8()===1}readUndefined(){}readNull(){return null}readArray(){let t=this.readVarUint(),r=new Array(t);for(let o=0;o<t;o++)r[o]=this.read();return r}readObject(){let t=this.readVarUint(),r={};for(let o=0;o<t;o++){let n=this.readString();r[n]=this.read()}return r}readTypedArray(t){let r=this.readVarUint(),o=t.BYTES_PER_ELEMENT;this.align(o);let n=this.offset+this.buffer.byteOffset,i=r*o;if(n%o!==0){let a=new ArrayBuffer(i);return new Uint8Array(a).set(new Uint8Array(this.buffer.buffer,n,i)),this.offset+=i,new t(a,0,r)}return this.offset+=i,new t(this.buffer.buffer,n,r)}readUint8Array(){return this.readTypedArray(Uint8Array)}readUint16Array(){return this.readTypedArray(Uint16Array)}readUint32Array(){return this.readTypedArray(Uint32Array)}readFloat32Array(){return this.readTypedArray(Float32Array)}readFloat64Array(){return this.readTypedArray(Float64Array)}readBigUint64Array(){return this.readTypedArray(BigUint64Array)}},$D=new TextEncoder,HD=new TextDecoder;function GD(e){return $D.encode(e)}function jD(e){return HD.decode(e)}function Zd(e){let t=new ql;return t.write(e),t.getBuffer()}function eu(e){return new Xl(e).read()}var qI=2**17,li=class{constructor(){I(this,"columns",{client:new sa(qI),seq:new sa(qI),id:new si,key:new si,value:new si})}getRowInternal(t){return{client:this.columns.client.get(t),seq:this.columns.seq.get(t),id:this.columns.id.get(t),key:this.columns.key.get(t),value:this.columns.value.get(t)}}getRow(t){if(t<0||t>=this.columns.client.length)throw new Error("Index out of bounds");return this.getRowInternal(t)}getRows(t=0,r=this.columns.client.length){if(t<0||r>this.columns.client.length||t>r)throw new Error("Index out of bounds");let o=new Array(r-t);for(let n=t;n<r;n++)o[n-t]=this.getRowInternal(n);return o}toBuffer(){return Zd([this.columns.client.toState(),this.columns.seq.toState(),this.columns.id.toState(),this.columns.key.toState(),this.columns.value.toState()])}fromBuffer(t){let[r,o,n,i,a]=eu(t);this.columns.client.fromState(r),this.columns.seq.fromState(o),this.columns.id.fromState(n),this.columns.key.fromState(i),this.columns.value.fromState(a)}get length(){return this.columns.client.length}};function tu(e,t){let r=[],o=Math.min(e.length,t.length);for(let n=0;n<o;++n)e[n]!==t[n]&&r.push({operation:"replace",value:t[n],index:n});for(let n=o;n<e.length;++n)r.push({operation:"delete",value:e[n],index:n});for(let n=o;n<t.length;++n)r.push({operation:"insert",value:t[n],index:n});return r}function ru(e,t,r,o,n,i){let a=t-e;if(a<1e-8)return e+a/2;let s;if(o!==null&&o===r&&n!==null){let c=i-n;s=Math.min(.01*c,.5)}else s=.01+((r^i)>>>0)%100/100*.98;let l=e+a*s;return l<=e||l>=t?e+a/2:l}var YI=new ArrayBuffer(8),_D=new Float64Array(YI),XI=new Uint32Array(YI),JD=e=>(_D[0]=e,[XI[0]>>>0,XI[1]>>>0]),KI=(e,t)=>e<<t|e>>>32-t,Yl=(e,t)=>{let r=Math.imul(t,3432918353);r=KI(r,15),r=Math.imul(r,461845907);let o=e^r;return o=KI(o,13),Math.imul(o,5)+3864292196>>>0},ou=e=>{let t=e;return t^=t>>>16,t=Math.imul(t,2246822507),t^=t>>>13,t=Math.imul(t,3266489909),(t^t>>>16)>>>0},Kl=e=>{let t=0,r=0;for(;r+1<e.length;r+=2){let o=e.charCodeAt(r)|e.charCodeAt(r+1)<<16;t=Yl(t,o)}return r<e.length&&(t=Yl(t,e.charCodeAt(r))),ou(t^e.length)},qD=2097151,XD=e=>{let t=2654435769,r=2135587861,o=i=>{t=Yl(t,i),r=Yl(r,i^2915580697)},n=i=>{switch(typeof i){case"string":o(Kl(i));break;case"number":{let[a,s]=JD(i);o(a),o(s)}break;case"boolean":o(i?1:0);break;case"undefined":o(2);break;case"symbol":o(Kl(i.description??""));break;case"bigint":o(Number(i&0xffffffffn)),o(Number(i>>32n&0xffffffffn));break;case"function":o(Kl(i.toString()));break;case"object":{if(i===null){o(7);break}if(Array.isArray(i)){let s=i.length;if(o(165),o(s),s>32){for(let c=0;c<8;++c)n(i[c]);for(let c=s-8;c<s;++c)n(i[c]);let l=(s-16)/16|0;for(let c=8;c<s-8;c+=l)n(i[c])}else for(let l=0;l<s;++l)n(i[l]);break}o(195);let a=0;for(let s in i){if(++a>32)break;o(Kl(s)),n(i[s])}o(a);break}default:o(13)}};return n(e),t=ou(t),r=ou(r),(t&qD)*4294967296+r},nu=XD;var ur="$deleted",cn="$keep",Ql="$keep_value";function QI(e,t,r,o){return e===r?t>o:e>r}function KD(e,t){return e.seq===t.seq?e.client-t.client:e.seq-t.seq}function iu(e){if(typeof e=="string"&&e.startsWith("arr("))return e.slice(4,-1)}function la(e){if(typeof e=="string"&&e.startsWith("obj("))return e.slice(4,-1)}function ZI(e){return`arr(${e})`}function eT(e){return`obj(${e})`}var au=class e{constructor(t){I(this,"seq",0);I(this,"client");I(this,"table",new li);I(this,"latest",new ia);I(this,"resolved",new Map);I(this,"arraySortedIndicesCache",new Map);I(this,"parentIdOverrides",new Map);I(this,"parentIdHistoryByNodeId",new Map);I(this,"minIndexCache",new Jl({maxSize:1e3}));I(this,"getIdFromObject");I(this,"readTransactionLevel",0);I(this,"foundIds",new Set);I(this,"transactionSeq");I(this,"transactionHadChanges",!1);this.client=Qd(t),this.reset()}reset(){this.latest.clear(),this.resolved.clear(),this.seq=0,this.table=new li,this.arraySortedIndicesCache.clear(),this.minIndexCache.clear()}fromBuffer(t){this.reset(),this.table.fromBuffer(t),this.indexRowsOptimized(),this.fixHierarchy()}toBuffer(){return this.table.toBuffer()}getRows(t,r){return this.table.getRows(t,r)}getRowsSorted(){return this.getRows().sort(KD)}indexRowsOptimized(){let{client:t,id:r,key:o,seq:n,value:i}=this.table.columns;for(let a=this.length-1;a>=0;a--)this.updateRowIndex(a,n.get(a),r.get(a),o.get(a),i.get(a),t.get(a))}clone(t){let r=new e(t);return r.fromBuffer(this.toBuffer()),r.indexRowsOptimized(),r.getIdFromObject=this.getIdFromObject,r}createUniqueKeyFromRow(t){return`${t.client}/${t.seq}/${t.id}/${t.key}`}merge(t){return this.mergeRows(t.getRows())}mergeRows(t){let r=new Set(this.getRows().map(i=>this.createUniqueKeyFromRow(i))),o=1/0,n=!1;for(let i of t){i.key==="parentid"&&(n=!0);let a=this.createUniqueKeyFromRow(i);r.has(a)||(r.add(a),this.addRowData(i.id,i.key,i.value,i.client,i.seq),o=Math.min(o,i.seq))}return this.resolved.clear(),this.arraySortedIndicesCache.clear(),n&&this.fixHierarchy(o),o}addRows(t){let r=1/0,o=!1;for(let n of t)n.key==="parentid"&&(o=!0),this.addRowData(n.id,n.key,n.value,n.client,n.seq),r=Math.min(r,n.seq);return this.resolved.clear(),this.arraySortedIndicesCache.clear(),o&&this.fixHierarchy(r),r}updateKeyValue(t,r,o){if(this.transactionSeq===void 0)throw new Error("Not in a current transaction");this.addRowData(t,r,o,this.client,this.transactionSeq)}addRowData(t,r,o,n,i){let a=this.table.columns.client.length;if(!this.shouldAddRow(t,r,o,i,n))return;let s=this.table.columns;s.client.add(n),s.seq.add(i),s.id.add(t),s.key.add(r),s.value.add(o),this.transactionHadChanges=!0,this.updateRowIndex(a,i,t,r,o,n)}shouldAddRow(t,r,o,n,i){let a=this.latest.get(t,r);if(a===void 0)return!0;let s=this.table.columns;if(s.value.get(a)!==o)return!0;let c=s.seq.get(a),m=s.client.get(a);return QI(n,i,c,m)}updateRowIndex(t,r,o,n,i,a){r>=this.seq&&(this.seq=r+1);let s=this.latest.get(o,n),l=this.table.columns;if((s===void 0||QI(r,a,l.seq.get(s),l.client.get(s)))&&this.latest.set(o,n,t),this.resolved.delete(o),this.arraySortedIndicesCache.delete(o),n==="parentid"){let c=this.parentIdHistoryByNodeId.get(o);c||(c=[],this.parentIdHistoryByNodeId.set(o,c)),c.push(t)}this.minIndexCache.add(r,t)}getPrevParentId(t,r,o){let n,i=this.parentIdHistoryByNodeId.get(t);if(!i?.length)return n;let a=this.table.columns;for(let s of i){let l=a.seq.get(s);if(l>r||!o&&l===r)continue;let c=a.client.get(s);(!n||l>n.seq||l===n.seq&&c>n.client)&&(n={seq:l,client:c,value:a.value.get(s)})}return n}isAncestorOf(t,r,o,n=new Set){if(t===r)return!0;if(!t||t==="$deleted"||n.has(t))return!1;n.add(t);let i=this.getPrevParentId(t,o,!0);if(!i)return!1;let a=this.parentIdOverrides.get(t)?.get(i.seq)??i.value;return this.isAncestorOf(a,r,o,n)}fixHierarchy(t=0){this.parentIdHistoryByNodeId=new Map([...this.parentIdHistoryByNodeId.entries()].sort((o,n)=>o[0].localeCompare(n[0])));for(let[o,n]of this.parentIdOverrides)for(let[i,a]of n)i>=t&&n.delete(i);let r=this.table.columns;for(let[o,n]of this.parentIdHistoryByNodeId)for(let i of n){let a=r.seq.get(i);if(a<t)continue;let s=r.value.get(i);if(this.isAncestorOf(s,o,a)){let l=this.parentIdOverrides.get(o);l||(l=new Map,this.parentIdOverrides.set(o,l));let c=this.getPrevParentId(o,a,!1);l.set(a,c?c.value:ur)}}}getParentId(t){let r=this.latest.get(t,"parentid");if(!r)return;let o=this.table.columns.seq.get(r);return this.parentIdOverrides.get(t)?.get(o)??this.table.columns.value.get(r)}getChildrenIds(t){let r=this.getCurrentValue(t,"children");if(!r)return;let o=iu(r);if(!o)return;let n=this.getArray(o,!1);if(!Array.isArray(n))return;let i=new Set;for(let a of n){let s=la(a);s&&this.getParentId(s)===t&&i.add(s)}if(i){let a=Array.from(this.parentIdOverrides.keys()).sort((s,l)=>s.localeCompare(l));for(let s of a)this.getParentId(s)===t&&!i.has(s)&&i.add(s)}return Array.from(i)}_getIdFromObject(t){return this.getIdFromObject?.(t)}createReferenceId(t,r,o,n,i){if(r===0)return`${o}.${n}`;if(r===1)return`${o}.${i??nu(t)}`;z(r)}getOrCreateReferenceFromValue(t,r,o,n){if(Array.isArray(t)){let i=this.createReferenceId(t,r,o,n,void 0);return this.setArray(i,t,o),ZI(i)}if(na(t)){let i=typeof t.id=="string"?t.id:void 0,a=this._getIdFromObject(t)??this.createReferenceId(t,r,o,n,i);return this.setObject(a,t),eT(a)}return t}getReferenceValue(t,r,o,n){let i=iu(t);if(i)return this.getArray(i,!0,o,n);let a=la(t);return a?this.getObjectInner(a,!0,r,o,n):t}getCurrentValue(t,r){let o=this.latest.get(t,r);if(o!==void 0)return this.table.columns.value.get(o)}getCurrentSeq(t,r){let o=this.latest.get(t,r);if(o!==void 0)return this.table.columns.seq.get(o)}validateObjectUpdate(t,r){if(!na(r))throw new Error("Store.setObject: object is not an object");let o=this._getIdFromObject(r);if(o&&o!==t)throw new Error(`Store.getIdFromObject mismatch: ${o} !== ${t}: The id that we got to update the object is not equal to the result of getIdFromObject. See Store.update.test.ts`);return t}deleteRemovedKeys(t,r){let o=this.latest.getSubMap(t);if(o)for(let[n]of o)n!==cn&&(n in r||this.setObjectKey(t,n,ur))}tryReuseExistingReference(t,r){let o=iu(t);if(Array.isArray(r)&&o)return this.setArray(o,r),!0;let n=la(t);return na(r)&&n?(this.setObject(n,r),!0):!1}setObject(t,r,o){return this.transaction(()=>{let n=this.validateObjectUpdate(t,r);if(this.deleteRemovedKeys(n,r),Object.keys(r).length===0){this.setObjectKey(n,cn,Ql);return}for(let i in r)this.setObjectKey(n,i,r[i])},o)}setObjectKey(t,r,o,n){return this.transaction(()=>{let i=this.getCurrentValue(t,r);if(this.tryReuseExistingReference(i,o))return i;let a=this.getOrCreateReferenceFromValue(o,0,t,r);return i===a||this.updateKeyValue(t,r,a),i},n)}deleteObjectKey(t,r,o){this.transaction(()=>{this.getCurrentValue(t,r)!==void 0&&this.updateKeyValue(t,r,ur)},o)}setObjectKeyPath(t,r,o,n){this.transaction(()=>{if(!r[0])return;let i=t;for(let s=0;s<r.length-1;++s){let l=r[s],c=this.getRawObjectData(i);if(!c)throw new Error("Object not found");let m=c[l];m||(this.setObjectKey(i,l,{}),m=this.getCurrentValue(i,l));let d=la(m);if(!d){let u=r.slice(0,s+1);throw new Error(`${u} is not an object`)}i=d}let a=r[r.length-1];this.setObjectKey(i,a,o)},n)}getObjectKey(t,r){if(this.getCurrentValue(t,cn)!==ur)return this.getReferenceValue(this.getCurrentValue(t,r),!0,1/0,0)}getRawObjectData(t){return this.getObjectInner(t,!1,!0)}getObject(t){return this.getObjectInner(t,!0,!0)}getObjectWithShallowChildren(t,r){return this.getObjectInner(t,!0,!0,r,0)}getObjectInner(t,r,o,n=1/0,i=0){this.readTransactionLevel++;let a=()=>{this.readTransactionLevel--,this.foundIds.delete(t)};if(this.foundIds.has(t)){a();return}if(this.foundIds.add(t),!o&&this.resolved.has(t))return a(),this.resolved.get(t);let s=this.latest.getSubMap(t);if(!s){a();return}let l={};o||this.resolved.set(t,l);let c=this.table.columns;if(this.getCurrentValue(t,cn)===ur){a();return}for(let[m,d]of s){if(m===cn||d===void 0)continue;let u=c.value.get(d);u!==ur&&(m==="children"&&i>=n||(l[m]=r?this.getReferenceValue(u,o,n,i+1):u))}return a(),this.readTransactionLevel===0&&this.foundIds.clear(),l}populateNodeMap(t,r){let o=this.table.columns,n=i=>{let a=this.latest.getSubMap(i);if(!a)return;let s=a.get("__class"),l=a.get("id");if(l===void 0||s===void 0)return;let c=o.value.get(l);if(!c)return;let m={};m.parentid=this.getParentId(i);let d=this.getChildrenIds(i);if(d){m.children=d;for(let u of d)n(u)}for(let[u,f]of a){if(u===cn||f===void 0)continue;let h=o.value.get(f);h!==ur&&u!=="children"&&u!=="parentid"&&(m[u]=this.getReferenceValue(h,!0,1/0,0))}t.set(c,m)};n(r)}resolveHierarchy(t,r){let o=n=>{let i=t.get(n);if(!i)return;let a=i;if(Array.isArray(a.children)){let s=[];for(let l of a.children)if(typeof l=="string"){let c=o(l);c&&s.push(c)}a.children=s}return a};return o(r)}getNode(t){let r=new Map;return this.populateNodeMap(r,t),this.resolveHierarchy(r,t)}applyArrayEdits(t,r){let o=0;for(let n of r)switch(n.operation){case"delete":this.arrayRemove(t,n.index+o,1),o--;break;case"insert":this.arrayInsert(t,n.index+o,n.value),o++;break;case"replace":this.arrayReplace(t,n.index+o,n.value);break}}setArray(t,r,o,n){this.transaction(()=>{let i=this.getArray(t,!1);i||(this.updateKeyValue(t,.5,Ql),i=[]);let a=r.map(l=>this.getOrCreateReferenceFromValue(l,1,t,void 0)),s=tu(i,a);this.applyArrayEdits(t,s)},n)}getArraySortedIndicesCached(t){let r=this.arraySortedIndicesCache.get(t);if(r)return r;let o=this.latest.getSubMap(t);if(!o)return[];let n=this.table.columns,i=Array.from(o.values()).sort((a,s)=>n.key.get(a)-n.key.get(s)).filter(a=>{let s=n.value.get(a);return s!==ur&&s!==Ql});return this.arraySortedIndicesCache.set(t,i),i}getArray(t,r=!0,o=1/0,n=0){if(!this.latest.getSubMap(t))return;let a=this.getArraySortedIndicesCached(t),s=[],l=this.table.columns;for(let c of a){let m=l.value.get(c);m===Ql||m===ur||s.push(r?this.getReferenceValue(m,!0,o,n+1):m)}return s}arrayReplace(t,r,o){return this.transaction(()=>{this.arraySplice(t,r,1,o)})}arraySplice(t,r,o,...n){return this.transaction(()=>{if(!this.latest.getSubMap(t))return;let a=this.getArraySortedIndicesCached(t),s=a.length,l=r<0?Math.max(s+r,0):Math.min(r,s),c=o===void 0?s-l:Math.min(o,s-l),m=this.table.columns,d=[];for(let N of a.slice(l,l+c))d.push(m.value.get(N)),this.updateKeyValue(t,m.key.get(N),ur);let u=l>0?a[l-1]:void 0,f=u!==void 0?m.key.get(u):0,h=a[l],y=h!==void 0?m.key.get(h):f+1,S=f,C=u!==void 0?m.client.get(u):null,T=u!==void 0?m.seq.get(u):null;for(let N of n){let x=C===this.client&&T!==null?T+1:1,V=ru(S,y,this.client,C,T,x);this.updateKeyValue(t,V,this.getOrCreateReferenceFromValue(N,1,t,void 0)),S=V,C=this.client,T=x}return d})}arrayInsert(t,r,...o){return this.arraySplice(t,r,0,...o)}arrayRemove(t,r,o=1){return this.arraySplice(t,r,o)}get length(){return this.table.columns.client.length}compact(t){let r=new e(t??`${this.client}`);r.getIdFromObject=this.getIdFromObject;let o=new Set,n=this.table.columns;for(let i=0;i<this.length;i++)o.add(n.id.get(i));for(let i of o){let a=this.latest.getSubMap(i);if(a)for(let[s,l]of a){if(l===void 0)continue;let c=n.value.get(l),m=n.client.get(l),d=n.seq.get(l);c!==ur&&r.addRowData(i,s,c,m,d)}}return r}transaction(t,r){if(this.transactionSeq!==void 0)return t();this.transactionSeq=r??this.seq;let o=t();return this.transactionHadChanges&&(this.seq=Math.max(this.seq,this.transactionSeq+1),this.transactionHadChanges=!1),this.transactionSeq=void 0,o}};async function foe(e){let t=Xc.on(hu).expect();return new Promise(r=>{Ii(e)&&e.stores.canvasStore.setColorSamplerActive(!0),e.scheduler.runBeforeNextFrame(async()=>{let{color:o}=await t.sampleColor();e.scheduler.process(()=>{Ii(e)&&e.stores.canvasStore.setColorSamplerActive(!1),r(o)})})})}function tT(){return _g.isOn("disableSecureCanvas")}var YD,QD,ZD=new Promise((e,t)=>{YD=e,QD=t});function Ioe(e){if(Ii(e)){if(e.canvasSandbox?.sandbox.controlsVisibility)return Promise.resolve(e.canvasSandbox.sandbox.controlsVisibility);if(tT())return Promise.resolve(new yy(e))}return Gg(e)?e.stores.sandboxStore.getControlsVisibility():ZD}function Loe(e,t,r){return Np(r)?ok(e,t,r):wp(r)?rk(e,t,r):Tp(r)?nk(e,t,r):null}function ek(e,t){return Ue(t*Math.sin(nc(e)),t*Math.cos(nc(e))*-1)}function tk(e,t){if(e.type==="conic"){let{angle:r,radius:o}=e;return t.map(n=>{let i=r+n.position*360;return ek(i,o)})}return t.map(r=>gt.pointAtPercentDistance(e.axis,r.position))}function rk(e,t,r){let o=e.getRect(t),n=r.centerAnchorX*o.width,i=r.centerAnchorY*o.height,a=r.widthFactor*o.width,s=r.heightFactor*o.height,l=a*2,c=s*2,m=a+n,d=i-s,u={width:l,height:c},f=e.convertPointToCanvas(t,{x:n,y:i}),h=e.convertPointToCanvas(t,{x:m,y:i}),y=e.convertPointToCanvas(t,{x:n,y:d}),{rotation:S}=e.convertRectToCanvasWithRotation(t),C=gt(f,h);return{type:"radial",start:f,end:h,center:gt.pointAtPercentDistance(C,0),axis:C,rotation:S,size:u,topCenter:y}}function ok(e,t,r){let o=e.getRect(t),n={x:o.width/2,y:o.height/2},i=e.convertPointToCanvas(t,n),a=r.angle*Math.PI/180,s={x:-Math.sin(a)*100,y:Math.cos(a)*100},l=e.convertPointToCanvas(t,Ue.add(n,s)),c=gt(i,l),m=Zl(r.angle),d=et.pointsAtOrigin(o),u=Math.floor(m/90)+3,f=d[u%4],h=e.convertPointToCanvas(t,f),y=d[(u+2)%4],S=e.convertPointToCanvas(t,y),C=gt.perpendicular(c,h),T=gt.intersection(C,c);if(!T)return null;let N=Ue.subtract(i,T),x=Ue.add(T,N,N),V=d[(u+1)%4],A=e.convertPointToCanvas(t,V),F=gt.perpendicular(C,A),j=gt.perpendicular(c,i),W=gt.intersection(F,j);if(!W)return null;let K={width:Ue.distance(W,i)*2,height:Ue.distance(T,x)};return{type:"linear",start:T,end:x,center:i,axis:gt(T,x),startCorner:h,endCorner:S,size:K}}function nk(e,t,r){let o=e.getRect(t),n=e.convertPointToCanvas(t,{x:o.width/2*r.centerAnchorX/.5,y:o.height/2*r.centerAnchorY/.5}),[i,a]=et.midPoints(o),s=et.center(o),l=Ue.distance(s,i),c=Ue.distance(s,a),m=Math.min(l,c),d=e.totalAncestorRotation(t),u=Zl(d+r.angle);return{type:"conic",start:Ue(s.x,s.y-m),center:n,rotation:0,radius:m,angle:u}}var Eoe=(e,t,r,o)=>{let n=tk(e,t),i=n[0],a=n[n.length-1];if(i.x===a.x&&i.y===a.y&&Ue.distance(r,i)<o)return!0;let s=gt(i,a),l=gt.perpendicular(s,r),c=gt.intersection(s,l);if(e.type==="radial"&&Ue.distance(r,e.topCenter)<o)return!0;if(e.type==="conic")return Ue.distance(r,e.center)<=e.radius+40;if(!c)return!1;let m=Ue.distance(r,c),d=Ue.distance(r,i),u=Ue.distance(r,a),f=Ue.distance(i,a);return d>f&&u<d?Math.max(u,m)<o:u>f&&d<u?Math.max(d,m)<o:m<o};function ik(e,t){let r=e.reduce((a,s)=>Math.abs(a.position-t)<Math.abs(s.position-t)?a:s),o=e.findIndex(a=>a===r),n=r.position-t>0?o-1:o+1,i=e[n]??r;return[r,i]}function Ooe(e,t,r,o){let[n,i]=ik(t,r),a=ga([n.position,i.position],[0,1])(r),s=su(e,n,o),l=su(e,i,o);return ga([0,1],[s,l])(a)}function su(e,t,r){let o=t.value;if(!Aa(o))return o;let n=vm(o),i=n?Wg(n,e):null;return i&&Hu(i)?i.colorForMode(r):Im(o)||"transparent"}function Boe(e,t,r){return t.map(o=>o.merge({value:su(e,o,r)}))}function zoe(e,t){let r=gt(t,e.center),o=e.center.x,n=e.center.y-e.radius,i=gt(Ue(o,n),e.center),a=gt.intersectionAngle(i,r),l=Zl(a)-e.angle,c=Zl(l);return Math.abs(c/360)}function Zl(e){if(e===360)return e;let t=e%360;return t<0?360+t:t}function Uoe(e){return e.sort((t,r)=>t.position-r.position)}function Woe(e){let t=!1,r=ga([e.stops[0]?.position??0,e.stops[e.stops.length-1]?.position??1],[0,1]),o=e.stops.map(n=>((n.position<0||n.position>1)&&(t=!0),n.merge({position:r(n.position)})));return t?o:void 0}var rT="--top-flash-inset",oT="--right-flash-inset",nT="--bottom-flash-inset",iT="--left-flash-inset",aT="--flash-radius",lu="flash_fh6lfgu",cu="defaultStyle_d8eehx6",sT="warningStyle_wdvaq7i",lT="glowStyle_ghqxg7a";var da=2;function cT(e="default"){switch(e){case"glow":return[lT];case"default":return[cu];case"warning":return[cu,sT]}}function ca(e,t,r){e.style.setProperty(t,`${r??0}px`)}function dT(e,t){ca(e,rT,t?.inset?.top),ca(e,oT,t?.inset?.right),ca(e,nT,t?.inset?.bottom),ca(e,iT,t?.inset?.left),t?.radius&&ca(e,aT,t.radius),e.addEventListener("animationend",function r(){e.classList.remove(lu),e.classList.remove(...cT(t?.style)),e.removeEventListener("animationend",r)}),e.classList.add(lu),e.classList.add(...cT(t?.style))}function uT(e){dT(e,{style:"default",inset:{top:da,right:-(zc.panelPadding-da),left:-(zc.panelPadding-da),bottom:da}})}function mT({id:e,flash:t}){let r=document.getElementById(e);r instanceof HTMLDivElement&&(gI(r,{scrollMode:"if-needed",block:"start"}),t&&uT(r))}function pT(e){let t=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:document.defaultView,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(t)}var fT="breadcrumb-collection";function sk(e,t,r){let o=e.tree.getNode(r);if(!o)return null;if(!_o(o))return{variableProvider:o,variableId:t};let n=e.tree.getNodeWithTrait(o.dataRepeaterArray.providerId,Om);return n?{variableProvider:n,variableId:o.dataRepeaterArray.id}:null}function Nne(e,t,r){let{chromeStore:o,modalStore:n,variablesStore:i,contentManagementStore:a,scopeStore:s,codeEditorStore:l,selectionStore:c}=e.stores;if(r===yp){o.setLocalizationsVisible(!0);return}let m=sk(e,t,r);if(!m)return;let{variableProvider:d,variableId:u}=m;if(Rm(d))i.selectedVariableId=u,n.set({type:"Variables",source:"variableReference"});else if(U(d)||Wr(d)){let{dataIdentifier:f}=d;if(!f)return;if(vr(f)){if(o.isViewOnly)return;n.set({type:"Confirmation",title:"External Collection",description:`This is an external ${"Collection".toLowerCase()} preview. To edit, choose a collection to swap in or create a local copy of this collection.`,confirmLabel:"View Options",source:"edit_action",onConfirm:()=>{o.chromeIsVisible=!0,mt(d)?(c.set(d.id),e.scheduler.runAtEndOfFrame(()=>mT({id:"data-repeater-panel",flash:!0}))):U(d)?e.scheduler.runAtEndOfFrame(()=>{let S=document.getElementById(fT);S&&pT(S)}):void 0}});return}let h=Ci(e.tree,f);if(h){U(d)&&g(d.isLoaded(),"Web page node should be loaded");let S=lk({collectionNode:h,engine:e,variableId:u,variableProvider:d});S?(a.pushExistingItemToOverlayStack(S.collectionItemNode.id),a.setCollectionItemControlToHighlight(S.variableId)):(s.select(Cp,{keepHistory:!1}),c.set(h),a.setCollectionItemControlToHighlight(u));return}let y=Ty(P,f);y&&l.editFile(y.file)}}function lk({collectionNode:e,engine:t,variableId:r,variableProvider:o}){let n=hT({engine:t,variableProvider:o});if(n)return n;let i=r.split(".");g(i.length>=0,"VariableID must not be empty");let a=wi(o,t.stores.treeStore.sandboxCollectionData),s=t.tree.getNodeWithTrait(a,so);if(s)return $a(t.tree,t.stores.treeStore.sandboxCollectionData,r,s,e)}function hT({engine:e,variableProvider:t}){if(!Yf(t))return;let[r,...o]=t.collectionFilters?.filters.flatMap(l=>l?.itemKey!=="id"?[]:l.transforms).flatMap(l=>ck(l)??[])??[];if(!r?.providerId||o.length>0)return;let n=e.tree.getNode(r.providerId);if(!n||!(Le(n)||U(n))||!n.dataIdentifier)return;let i=Ci(e.tree,n.dataIdentifier);if(!i)return;let a=wi(n,e.stores.treeStore.sandboxCollectionData),s=e.tree.get(a);if(so(s))return s?{collectionItemNode:s,collectionNode:i,variableId:r.id}:hT({engine:e,variableProvider:n})}function ck(e){if(!(e.name!=="equals"&&e.name!=="isIncludedIn"||!me(e.value)||!e.value.providerId))return e.value}var Rne="My website";var xne="My description",Mne="yoursite.url";export{Xc as a,sr as b,IA as c,TA as d,NA as e,wA as f,RA as g,xA as h,MA as i,VA as j,DA as k,kA as l,PA as m,FA as n,AA as o,$N as p,LA as q,UA as r,WA as s,foe as t,tT as u,YD as v,QD as w,Ioe as x,dZ as y,Qi as z,Zi as A,xZ as B,BZ as C,gI as D,nee as E,cee as F,dee as G,VI as H,uee as I,fee as J,hee as K,mk as L,pk as M,fk as N,bee as O,wee as P,kI as Q,kee as R,ta as S,Gl as T,Wee as U,$ee as V,aC as W,lC as X,eL as Y,QV as Z,Zee as _,ZV as $,ln as aa,ete as ba,WI as ca,Qte as da,ire as ea,Loe as fa,ek as ga,tk as ha,Eoe as ia,Ooe as ja,su as ka,Boe as la,zoe as ma,Uoe as na,Woe as oa,cC as pa,da as qa,dT as ra,mT as sa,fT as ta,Nne as ua,yD as va,sre as wa,dre as xa,wT as ya,lP as za,cP as Aa,KO as Ba,VC as Ca,YO as Da,YC as Ea,Q_ as Fa,bl as Ga,wl as Ha,xl as Ia,b4 as Ja,gv as Ka,x8 as La,M8 as Ma,Zx as Na,eM as Oa,tM as Pa,rM as Qa,V8 as Ra,Sv as Sa,an as Ta,Hv as Ua,Wv as Va,qN as Wa,vL as Xa,KN as Ya,O9 as Za,W9 as _a,sn as $a,ko as ab,pC as bb,Xv as cb,ni as db,Zv as eb,zY as fb,tI as gb,rI as hb,nI as ib,ii as jb,sI as kb,lI as lb,cI as mb,NV as nb,LQ as ob,fre as pb,Rne as qb,xne as rb,Mne as sb,UQ as tb,dI as ub,Sre as vb,jI as wb,uI as xb,CD as yb,kD as zb,PD as Ab,UD as Bb,Qd as Cb,WD as Db,ur as Eb,cn as Fb,eT as Gb,au as Hb};
//# sourceMappingURL=https://app.framerstatic.com/chunk-6M6DEEG6.mjs.map
