import{a as Xe}from"https://app.framerstatic.com/chunk-JSOI5ZKD.mjs";import{a as Qe}from"https://app.framerstatic.com/chunk-CAYX5SA5.mjs";import{o as ne}from"https://app.framerstatic.com/chunk-3TJANG4N.mjs";import{a as $e,b as Ge}from"https://app.framerstatic.com/chunk-Q6FTMIL5.mjs";import{ed as te}from"https://app.framerstatic.com/chunk-N6T5M2U2.mjs";import{e as Ve}from"https://app.framerstatic.com/chunk-MTCSGQFI.mjs";import{Ab as _e,Be as oe,Fe as Ue,He as ce,Re as de,Tf as Ke,Uf as ze,gg as Ye,mb as Fe,qf as He,ue as je,ve as Ae}from"https://app.framerstatic.com/chunk-MJU7MCEH.mjs";import{a as Be}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import{$c as Ne,_c as q,dd as we,hd as _,id as j,kd as We,nd as De,qd as ee,td as D}from"https://app.framerstatic.com/chunk-EBH5X5S4.mjs";import{Ai as Z,Bd as J,Bi as ke,Ch as Ce,Ci as p,Di as W,Du as xe,Mt as Re,Pb as Se,Sl as B,di as V,ec as Te,ev as F,fc as ve,l as G,pe as ye}from"https://app.framerstatic.com/chunk-WDCEA3EQ.mjs";import{g as Oe,i as Me,m as Ee}from"https://app.framerstatic.com/chunk-3PGDFP4U.mjs";import{a as Ie,b as X,i as he,l as Pe}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Sd as Le,a as Q,b as w}from"https://app.framerstatic.com/chunk-NOOQGO4X.mjs";import{l as pe,u as ge,z as be}from"https://app.framerstatic.com/chunk-IZV4HDYJ.mjs";import{a as N}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{e as P}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";function Je(e){let t=[],o=new Set,n=e.get(e.root.homePageNodeId);n&&t.push(n);let i=Re(e,{shouldAssert:!0});for(let r of i.walk()){if(!ye(r)||!r.webPageId||o.has(r.webPageId))continue;let s=e.get(r.webPageId);s&&(o.add(r.webPageId),t.push(s))}return t}var Ze=P(Q());var kt=ge("usePreloadedScope");function qe(e){let t=te();Ze.default.useEffect(()=>{if(!X(e))return;let o=t.tree.get(e);!Ve(o)||o.isLoaded()||(kt.debug("Loading scope node",e),o.load())},[e])}function To(e,t,o){let n=te(),i=p(e)?e.webPageId:null;return qe(i),Xe(["Tree"],()=>Vt(n.tree,e,t,o,n.stores.scopeStore.active),[e,t,o,n.stores.scopeStore.active],!0)}function xt(e){let t={};for(let o in e){let n=e[o];Te(n)||X(n)||q(n)&&wt(n)&&(t[o]=!0)}return t}function Vt(e,t,o,n,i){let r=Je(e),s={},l=[],c=[];for(let m of r)s[m.id]=m,m.dataIdentifier&&ne(e,m,o)&&c.push(m),l.push(m);let a=p(t)?s[t.webPageId]:void 0,d=p(t)&&!a,g=D(e,a),u=g?De(g):[],b=u.every(m=>o?.has(m)),v;return n&&n!==V&&(v=e.root.getNonDefaultLocale(n)?.slug),{warnings:p(t)&&t.pathVariables?xt(t.pathVariables):void 0,targetWebPagePathVariables:u,link:Z(t)?t:void 0,selectedWebPageId:a?.id,selectedPageMissing:d,collectionItemVariableInScope:b,pageLinkOptions:l,collectionWithPathVariableInScopeOptions:c,scrollTargetOptions:a?Nt(e,i,a.id)?.nodes:void 0,webPageDataIdentifier:a?.dataIdentifier,localeSlug:v,localeId:n}}function Nt(e,t,o){let n=new Set;if(!o)return;let i=e.get(o)?.loaded;if(!i)return;let r=e.getScopeNodeFor(t),l=J(r)&&r.abTestingParentId===o?r:i;for(let d of l.walk())we(d)&&n.add(d);let c=[],a=new Set;for(let d of n)c.push(d),a.add(d.id);return{nodes:c,ids:a}}function wt({identifier:e,collectionItemId:t,key:o,value:n}){let i=G.dataForIdentifier(e);if(!i)return!1;let r=We(void 0,i,V,t);return!r||i.annotations?.framerSlug!==o?!1:n!==r}function ie(e,t,o){return e.replace(Se,(n,i)=>i===t.id?o.slug:`:${t.name.toLowerCase()}`)}function et(e,t,o,n="Home",i){let r=p(t)&&!i?Ne(t):void 0,s=p(t)?Qe(e,t):null;if(!t||!Z(t)||!s)return;let l="";if(o&&o!==V){let a=e.root.getNonDefaultLocale(o);a?.slug&&(l="/"+a.slug)}if(s.id===e.root.homePageNodeId)return l?l+"/":n;let c=D(e,s);if(c){if(r?.identifier){let a=F(e,r.identifier);if(a){let d=_(e,o),u=j(a,d)[r.collectionItemId];if(u){let b=a.variables.find(B);if(b){let v={id:r.collectionItemId,slug:u};return l+ie(c,b,v)}}}return}if(J(s)&&s.dataIdentifier){let a=F(e,s.dataIdentifier);if(a&&!r){let d=_(e,o),g=j(a,d),u=a.variables.find(B);if(u)return l+ee(c,g,u)}}return l+c}}var I=P(Q());var ue=P(Q());var A=P(Q());var tt="tooltip_tzsvjdc",ot="tooltipTitle_t1ehb6cn";var f=P(w()),Ot=A.default.createContext(void 0);function nt({delay:e,direction:t,interactive:o=!0,icon:n,className:i,initialVisibility:r,...s}){let l=A.default.useRef(null),c=A.default.useContext(Ot),{triggerProps:a,tooltipProps:d}=Ke({className:tt,direction:t,interactive:o,offset:5,triggerRef:l,offsetXRef:c,delay:e,initialVisibility:r});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(je,{...a,className:i,ref:l,children:n}),(0,f.jsx)(Mt,{...s,...d})]})}function Mt(e){return A.default.useEffect(()=>{if(e.image){let t=new Image;t.src=e.image,t.alt=e.title,t.decode?.().catch(pe)}},[e.image,e.title]),(0,f.jsx)(ze,{...e,tint:e.tint??Oe.panelBackground,children:(0,f.jsxs)(Ae,{gap:Me.panelPadding,direction:"column",children:[e.image&&(0,f.jsx)("div",{children:(0,f.jsx)("img",{src:e.image,alt:e.title,width:"100%",style:{borderRadius:5,marginBottom:5,aspectRatio:"1.75"},decoding:"async"})}),e.title&&(0,f.jsx)(de,{className:ot,style:{fontWeight:Ee.weight.heading},children:(0,f.jsx)(ce,{children:e.title})}),(0,f.jsx)("div",{children:(0,f.jsx)(de,{children:(0,f.jsx)(ce,{children:e.text})})}),e.actions]})})}var me=12,it="tooltipIcon_t1vnemam",rt="inputWithError_ijpnope",at="clearButton_c6pgvh1";var re=P(w()),st=ue.default.memo(e=>{let{selectedCollectionItemId:t,selectedCollectionItemSlugIsOutdated:o,selectedLink:n,webPageDataIdentifier:i,onChange:r}=e,s=Ue(),l=ue.default.useRef(null),c=Bt(o,n,i,t,r,s);return c?(0,re.jsx)(nt,{...c,direction:"right",delay:"long",className:it,icon:(0,re.jsx)(_e,{style:{width:me,height:me},ref:l})}):null});function Et(e,t,o,n){let i=G.dataForIdentifier(t);N(i,"Data should exist");let r=$e(void 0,i,o)??Ge(void 0,i);if(!r)return;let s=i.annotations?.framerSlug;N(Le(s),"Collection must have a slug key annotation");let l={identifier:i.identifier,collectionItemId:o,key:s,value:r.slug};n({...e,pathVariables:{...e.pathVariables,[s]:l}},!0)}function Bt(e,t,o,n,i,r){if(e&&p(t)&&o&&n)return{title:"Link Error",text:"The linked path is outdated.",actions:(0,re.jsx)(oe,{variant:"primary",enabled:!r,onClick:()=>Et(t,o,n,i),children:"Update Link"}),interactive:!0}}var T=P(w()),Ft="framerUI-link-input",_t={x:0,y:10};function jt(e,t){if(!t||t.length===0)return;N(t.length<=1,"WebPages only support a single path variable at this time.");let o=t[0];if(!o)return;let n=e.pathVariables?.[o];if(q(n))return n.collectionItemId}var At=/\W+/;function Ut(e){return new Set(e.split(At))}var xn=({tree:e,link:t,onChange:o,constantChange:n,supportsPageLinks:i,hideSlugValues:r,supportsVariables:s,pageLinkInfo:l,variableInfo:c,autoFocus:a,className:d,enabled:g,readOnly:u,tabIndex:b,onMouseDown:v,hideErrorTooltip:m=!1,homePageName:y="Home",onClear:U,menuOffset:O=_t,menuWidth:h,menuClassName:k,onOpenChange:L,backdropEnabled:S,linkListStickySectionHeaders:R})=>{let{pageLinkOptions:C,collectionWithPathVariableInScopeOptions:H,warnings:mt,selectedPageMissing:ut,webPageDataIdentifier:ft,targetWebPagePathVariables:K}=l,fe=!!(K&&K.length>0&&K.some(x=>!!mt?.[x])),z=fe||ut,pt=ke(t)?t.url:"",M=et(e,t,l.localeId,y,r)??(z?"":pt),[le,gt]=(0,I.useState)(()=>dt(M)),Y=e.root.homePageNodeId,E=(0,I.useMemo)(()=>ct({tree:e,pageLinkInfo:l,webPages:C,homePageId:Y,homePageName:y,variableInfo:c,collectionPageType:r?"noSlugInScope":"showSlugValues"}),[e,l,C,Y,y,c,r]),$=(0,I.useMemo)(()=>ct({tree:e,pageLinkInfo:l,webPages:H,homePageId:Y,variableInfo:c,homePageName:y,collectionPageType:"slugInScope"}),[e,l,H,Y,c,y]),bt=(0,I.useCallback)((x,se)=>{if(se||n){if(x===M)return;let Ct=E.get(x)??$.get(x)??W({url:x});if(o(Ct,se),se)return}let Lt=dt(x);gt(Lt)},[n,M,E,$,o]),It=(0,I.useMemo)(()=>Yt(E,$,le),[E,$,le]),ht=E.get(M),Pt=!!c?.idOfMutableVariableProvider,St=s&&Pt,Tt=(0,I.useContext)(Ye)===null,[vt]=(0,I.useState)(()=>(Pe(t)||he(t)||Ce(t))&&!St&&Tt),yt=p(l.link)?jt(l.link,K):void 0;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(He,{id:Ft,clearSelectionOnEmptySearch:!0,autoCompleteEnabled:i,showAllWhenOpened:p(t),tabIndex:b,onMouseDown:v,searchItemValue:!!le,items:It,value:M,placeholder:Ht(t,z,i),constantChange:!0,onChange:bt,autoFocus:Ie(a)?a:vt,menuOffset:O,enabled:g,readOnly:u,getSearchTokens:Ut,className:Be(z&&rt),wrapperClassName:d,rightSlot:U?(0,T.jsx)(oe,{variant:"clean",type:"button",className:at,onClick:U,title:"Remove Link",children:(0,T.jsx)(Fe,{})}):void 0,onOpenChange:L,backdropEnabled:S,menuWidth:h,menuClassName:k,stickySectionHeaders:R,containOverscroll:!0}),z&&!m&&(0,T.jsx)(st,{selectedCollectionItemId:yt,selectedCollectionItemSlugIsOutdated:fe,selectedLink:ht,webPageDataIdentifier:ft,onChange:o})]})};function Ht(e,t,o){return t?"Missing":be(e)?"Multiple\u2026":o?"Page or URL\u2026":"URL\u2026"}function ae(e,t,o,n=!1){n?o.unshift([t,e]):o.push([t,e])}function Kt(e,t){if(e.variableSourceIdentifiers)for(let o in e.variableSourceIdentifiers){if(e.variableSourceIdentifiers[o]===t)return o;for(let n of e.combined.get(o)||[])if(n.type==="collectionreference"&&n.dataIdentifier===t)return o}}function ct({tree:e,pageLinkInfo:t,webPages:o,homePageId:n,variableInfo:i,homePageName:r,collectionPageType:s}){let l=[],c=t.localeSlug?`/${t.localeSlug}`:"";return o.forEach(a=>{let d=n===a.id,g=d&&!c?r:D(e,a);if(!g)return l;if(a.dataIdentifier){let u=F(e,a.dataIdentifier);if(!u)return;let b=u.variables.find(B);if(!b)return;let v=t.localeId??V,m=b.id,y=m;if(i&&!i.ids.has(m)){for(let h of i.ids)if(xe(h,m)){y=h;break}}let U=_(e,v),O=j(u,U);if(s==="slugInScope"||s==="noSlugInScope"){let h=!!(i&&ne(e,a,i.ids)),k=ee(g,O,b);if(s==="slugInScope"&&h){N(i,"variableInfo should exist when inScope");let L=Kt(i,a.dataIdentifier),S=L?e.get(L):void 0,R=S?{[m]:ve(y,S.originalid??S.id)}:void 0,C=W({webPageId:a.id,pathVariables:R});ae(C,c+k,l)}else if(s==="noSlugInScope"&&!h){let L=Object.entries(O)[0];if(!L)return l;let[S,R]=L,C={identifier:a.dataIdentifier,collectionItemId:S,key:m,value:R},H=W({webPageId:a.id,pathVariables:{[m]:C}});ae(H,c+k,l)}return l}for(let[h,k]of Object.entries(O)){let S=ie(g,b,{id:h,slug:k}),R={identifier:a.dataIdentifier,collectionItemId:h,key:m,value:k},C=W({webPageId:a.id,pathVariables:{[m]:R}});ae(C,c+S,l,d)}}else{let u=W({webPageId:a.id});ae(u,c+g,l,d)}}),new Map(l)}function dt(e){let t=e.trim(),o=t.indexOf("/:");o!==-1&&(t=t.substring(o));let n=t.split("/").filter(Boolean);for(;n.length>0;){let i=n.join("/")+"/",r="/"+i;if(t.startsWith(r)||t.startsWith(i))return r;n.pop()}return null}var zt=/\/$/u;function Yt(e,t,o){let n=[],i=Array.from(e.keys()),r=Array.from(t.keys());if(o){let s=[];[...r,...i].forEach(a=>{if(!a.startsWith(o))return;let d=a.replace(o,".../");s.push({type:"option",value:a,title:d})});let c=o.replace(zt,"");return n.push({type:"section",value:c,title:c,items:s}),n}return r.length>0&&n.push({type:"section",value:"CMS",items:r.map(s=>({type:"option",value:s}))}),i.length>0&&n.push({type:"section",value:"Pages",items:i.map(s=>({type:"option",value:s}))}),n}export{Ot as a,nt as b,Mt as c,Je as d,qe as e,To as f,Vt as g,Nt as h,et as i,Ft as j,xn as k};
//# sourceMappingURL=https://app.framerstatic.com/chunk-NMGVY23D.mjs.map
